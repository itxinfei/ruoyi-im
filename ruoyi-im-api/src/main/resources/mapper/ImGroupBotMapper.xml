<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.im.mapper.ImGroupBotMapper">

    <resultMap type="ImGroupBot" id="ImGroupBotResult">
        <result property="id"    column="id"    />
        <result property="groupId"    column="group_id"    />
        <result property="botName"    column="bot_name"    />
        <result property="botType"    column="bot_type"    />
        <result property="avatar"    column="avatar"    />
        <result property="description"    column="description"    />
        <result property="isEnabled"    column="is_enabled"    />
        <result property="createBy"    column="create_by"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateBy"    column="update_by"    />
        <result property="updateTime"    column="update_time"    />
    </resultMap>

    <sql id="selectImGroupBotVo">
        select id, group_id, bot_name, bot_type, avatar, description, is_enabled, create_by, create_time, update_by, update_time from im_group_bot
    </sql>

    <select id="selectByGroupId" parameterType="Long" resultMap="ImGroupBotResult">
        <include refid="selectImGroupBotVo"/>
        where group_id = #{groupId}
    </select>

    <select id="selectEnabledBots" resultMap="ImGroupBotResult">
        <include refid="selectImGroupBotVo"/>
        where is_enabled = 1
    </select>

    <select id="selectEnabledByGroupId" parameterType="Long" resultMap="ImGroupBotResult">
        <include refid="selectImGroupBotVo"/>
        where group_id = #{groupId} and is_enabled = 1
    </select>
    
    <select id="countByGroupId" parameterType="Long" resultType="int">
        select count(1) from im_group_bot where group_id = #{groupId}
    </select>

    <select id="selectByGroupIds" resultMap="ImGroupBotResult">
        <include refid="selectImGroupBotVo"/>
        where group_id in
        <foreach item="item" index="index" collection="groupIds" open="(" separator="," close=")">
            #{item}
        </foreach>
    </select>

</mapper>
