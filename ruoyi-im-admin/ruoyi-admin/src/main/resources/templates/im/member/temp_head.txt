<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <th:block th:include="include :: header('群组成员管理')" />
    <link th:href="@{/css/im-admin.css}" rel="stylesheet"/>
    <style>
        .select-list ul li {
            margin: 0px 10px 5px 0px !important;
        }
        .select-list ul li input {
            width: 140px !important;
        }
        .select-list ul li select {
            width: 140px !important;
        }
        .member-stat-card {
            margin-bottom: 10px;
        }
        .ibox-content {
            padding: 10px 15px;
        }
        .ibox-title {
            padding: 10px 15px;
            min-height: 40px;
        }
        .no-margins {
            margin-top: 0 !important;
            margin-bottom: 0 !important;
        }
    </style>
</head>
<body class="gray-bg">
    <div class="container-div im-page">
        <div class="row">
            <div class="col-sm-12" style="margin-top: 10px;">
                <div class="row">
                    <div class="col-sm-3">
                        <div class="ibox float-e-margins member-stat-card">
                            <div class="ibox-title">
                                <span class="label label-primary pull-right">总</span>
                                <h5>成员总数</h5>
                            </div>
                            <div class="ibox-content">
                                <h2 class="no-margins text-navy" id="totalCount">0</h2>
                                <small>群组成员总量</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="ibox float-e-margins member-stat-card">
                            <div class="ibox-title">
                                <span class="label label-danger pull-right">主</span>
                                <h5>群主数量</h5>
                            </div>
                            <div class="ibox-content">
                                <h2 class="no-margins text-danger" id="ownerCount">0</h2>
                                <small>群主人数</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="ibox float-e-margins member-stat-card">
                            <div class="ibox-title">
                                <span class="label label-warning pull-right">管</span>
                                <h5>管理数量</h5>
                            </div>
                            <div class="ibox-content">
                                <h2 class="no-margins text-warning" id="adminCount">0</h2>
                                <small>管理员人数</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="ibox float-e-margins member-stat-card">
                            <div class="ibox-title">
                                <span class="label label-info pull-right">禁</span>
                                <h5>禁言数量</h5>
                            </div>
                            <div class="ibox-content">
                                <h2 class="no-margins text-info" id="mutedCount">0</h2>
                                <small>已禁言成员</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-12 search-collapse">
                <form id="member-form">
                    <div class="select-list">
                        <ul>
                            <li>
                                <label class="input-label">群组ID：</label><input type="text" name="groupId" placeholder="请输入群组ID"/>
                            </li>
                            <li>
                                <label class="input-label">用户昵称：</label><input type="text" name="userNickname" placeholder="请输入用户昵称"/>
                            </li>
                            <li>
                                <label class="input-label">角色：</label><select name="role">
                                    <option value="">所有</option>
                                    <option value="OWNER">群主</option>
                                    <option value="ADMIN">管理员</option>
                                    <option value="MEMBER">普通成员</option>
                                </select>
                            </li>
                            <li>
                                <label class="input-label">是否禁言：</label><select name="isMuted">
                                    <option value="">所有</option>
                                    <option value="0">否</option>
                                    <option value="1">是</option>
                                </select>
                            </li>
                            <li>
                                <a class="btn btn-primary btn-rounded btn-sm" onclick="$.table.search()"><i class="fa fa-search"></i>&nbsp;搜索</a>
                                <a class="btn btn-warning btn-rounded btn-sm" onclick="$.form.reset()"><i class="fa fa-refresh"></i>&nbsp;重置</a>
                            </li>
                        </ul>
                    </div>
                </form>
            </div>

            <div class="col-sm-12 select-table table-striped">
                <div class="btn-group-sm" id="toolbar">
                    <a class="btn btn-success" onclick="addMember()" shiro:hasPermission="im:group:member:add">
                        <i class="fa fa-plus"></i> 添加成员
                    </a>
                    <a class="btn btn-primary single disabled" onclick="editRole()" shiro:hasPermission="im:group:member:edit">
                        <i class="fa fa-edit"></i> 修改角色
                    </a>
                    <a class="btn btn-warning single disabled" onclick="toggleMute()" shiro:hasPermission="im:group:member:edit">
                        <i class="fa fa-ban"></i> 禁言/解禁
                    </a>
                    <a class="btn btn-info multiple disabled" onclick="batchMute()" shiro:hasPermission="im:group:member:edit">
                        <i class="fa fa-ban"></i> 批量禁言
                    </a>
                    <a class="btn btn-success multiple disabled" onclick="batchUnmute()" shiro:hasPermission="im:group:member:edit">
                        <i class="fa fa-check-circle"></i> 批量解禁
                    </a>
                    <a class="btn btn-danger multiple disabled" onclick="$.operate.removeAll()" shiro:hasPermission="im:group:member:remove">
                        <i class="fa fa-remove"></i> 移除成员
                    </a>
                    <a class="btn btn-warning" onclick="$.table.exportExcel()" shiro:hasPermission="im:group:member:export">
                        <i class="fa fa-download"></i> 导出
                    </a>
                </div>
                <table id="bootstrap-table"></table>
            </div>
        </div>
    </div>

    <th:block th:include="include :: footer" />
    <script th:inline="javascript">
