# 基于若依的私有化Web版钉钉复刻系统（数据安全优先）开发需求文档及AI提示词库

# 一、项目概述

## 1.1 项目目标

开发一款运行在浏览器的私有化Web版钉钉复刻系统，核心定位为企业级即时通讯与协同办公平台；后端基于若依（RuoYi）框架构建统一管理中台，前端采用Vue3技术栈，**1:1完整复刻钉钉6.5.x版本PC端UI布局、交互风格及全部核心功能**，同时以数据安全为首要前提，实现组织架构、工作台、即时通讯、审批、应用中心等核心模块的私有化部署，适配企业级权限管控、数据脱敏存储与业务扩展需求，确保企业数据全生命周期安全可控。

## 1.2 核心约束

- 技术栈约束：前端固定为Vue3，后端Spring Boot（基于若依框架），运行环境为PC Web；UI组件库采用Element Plus，**严格模仿复刻钉钉6.5.x版本PC端UI布局、组件样式及交互逻辑**，确保视觉与操作体验一致性

- 功能约束：提供完整即时通讯（IM）功能，包含单聊、群聊、消息通知、文件传输等核心能力，配套工作台、审批等协同办公模块

- 权限约束：复用若依的用户/角色/菜单权限体系，实现管理员与普通用户的差异化功能可见性，支持私有化部署下的精细化权限管控；新增数据权限管控，实现不同角色对聊天记录、审批数据、组织信息的分级查看权限

- 规范约束：全栈开发必须严格遵守《阿里巴巴Java开发手册》（最新版）、《阿里巴巴前端开发手册》（Vue专项）、《阿里巴巴数据库设计规范》，同时遵守《信息安全技术 企业即时通讯应用安全规范》，确保代码可读性、可维护性、安全性，重点保障数据传输、存储、访问全流程安全

# 二、产品定位与核心特性

## 2.1 产品一句话定义

基于若依中台构建的私有化Web版钉钉复刻系统，以数据安全为核心前提，完整复刻钉钉6.5.x版本的即时通讯、协同办公等全部核心功能，提供组织管理、即时通讯、工作台、审批流转、应用聚合等核心能力，支持企业本地服务器私有化部署，实现数据全量自主管控，避免第三方托管风险。

## 2.2 核心特性

- 私有化部署：支持本地服务器/私有云部署，数据全量存储于企业自有服务器，无任何数据外泄至第三方的情况；支持部署环境隔离（开发/测试/生产），生产环境关闭外部网络访问权限，保障物理环境安全

- 完整IM能力：支持单聊、群聊、消息回执、文件/图片传输、消息撤回/编辑等全量即时通讯功能

- 灵活组织架构：基于若依sys_dept/sys_user实现企业-部门-成员层级管理，支持自定义组织架构配置

- 定制化工作台：支持自定义卡片式布局，可配置常用应用、待办事项、数据看板等模块

- 一体化协同：集成审批中心、应用中心等协同模块，实现通讯与办公无缝衔接

# 五、UI设计规范（1:1复刻钉钉6.5.x，可直接落地）

## 3.1 整体布局

完全模仿复刻原生钉钉PC端6.5.x版本UI布局，精准还原该版本的四级/三级布局结构、元素尺寸、间距比例及响应式规则：IM聊天场景采用“顶部导航栏+左侧功能导航栏+中间会话/列表区+右侧主内容区”四级布局，工作台/审批/通讯录等场景采用“顶部导航栏+左侧功能导航栏+右侧主内容区”三级布局，**所有布局参数（如各栏宽度、高度、元素间距）均以钉钉6.5.x版本为基准**；移动端Web端复刻钉钉6.5.x版本移动端布局风格，为“顶部栏+底部功能栏+中间内容区”，确保多端布局与钉钉6.5.x原生体验完全一致：

```Plain Text


// IM聊天场景四级布局（复刻钉钉6.5.x版本）
┌──────────────────────────────────────────────────────────────┐
│ 顶部导航栏 TopBar（完全复刻6.5.x：企业Logo/名称+搜索框+功能图标区，高度48px）  │
├───────┬──────────────┬──────────────────────────────────────┤
│ 左侧栏 │ 中间会话区  │ 右侧主内容区 Content（聊天窗口/详情页）  │
│ Side  │ Session     │ （严格复刻6.5.x聊天窗口布局：消息气泡样式、输入区位置、功能按钮排布） │
│ Bar   │ List        │                                      │
│（64px）│（240px）    │ （自适应剩余宽度）                     │
└───────┴──────────────┴──────────────────────────────────────┘

// 工作台/审批场景三级布局（复刻钉钉6.5.x版本）
┌──────────────────────────────────────────────────────────────┐
│ 顶部导航栏 TopBar（与钉钉6.5.x完全一致：元素顺序、尺寸、间距、hover效果）       │
├───────┬──────────────────────────────────────────────────────┤
│ 左侧栏 │ 右侧主内容区 Content（复刻6.5.x模块排布：工作台卡片样式、审批列表布局）   │
│ Side  │                                                      │
│ Bar   │                                                      │
│（64px/192px，可折叠）│（自适应剩余宽度）                     │
└───────┴──────────────────────────────────────────────────────┘

// 关键布局参数说明（复刻钉钉6.5.x）
// 1. 左侧导航栏：展开宽度192px，折叠宽度64px，导航项高度48px，图标尺寸20px，文本间距8px
// 2. 中间会话区：固定宽度240px，会话列表项高度64px，头像尺寸40px
// 3. 响应式规则：屏幕宽度＜1366px时，中间会话区可收缩至180px；宽度＜1024px时，左侧栏默认折叠
```

## 3.2 组件样式规范

|组件|样式要求|
|---|---|
|顶部栏|高度48px（复刻钉钉6.5.x顶部栏固定高度），背景色#ffffff（完全匹配6.5.x顶部栏背景色），左侧展示企业Logo+企业名称（Logo尺寸24px×24px，与名称间距8px，名称字体16px，完全对齐6.5.x样式），中间为全局搜索框（精准复刻钉钉6.5.x搜索框：默认宽度280px，聚焦后宽度360px，背景色#f5f5f5，左侧搜索图标颜色#8c8c8c，边框圆角2px），右侧依次排列消息通知图标、应用中心图标、用户头像/姓名（图标尺寸20px，间距16px，与6.5.x布局完全一致）|
|左侧导航栏|复刻钉钉6.5.x左侧导航栏样式：展开宽度192px，折叠宽度64px，默认展开状态，支持折叠/展开切换；导航顺序严格遵循6.5.x：消息（IM）、工作台、通讯录、审批、应用中心、系统管理（仅管理员）；图标采用与6.5.x一致的线性图标，尺寸20px，hover/选中状态视觉反馈完全复刻6.5.x（选中时左侧4px蓝色竖线，背景色#e8f3ff，图标文本色#1677ff）|
|主内容区|背景色#f5f5f5（匹配钉钉6.5.x主内容区背景），模块采用卡片式布局（卡片圆角4px，阴影0 1px 2px rgba(0,0,0,0.06)，完全复刻6.5.x卡片样式）；工作台、应用中心等模块的卡片排列、间距（横向24px，纵向24px）严格对齐6.5.x版本；支持2-4列自适应，适配规则与6.5.x一致（屏幕宽度≥1680px时4列，1366px≤宽度＜1680px时3列，＜1366px时2列）|
## 3.3 颜色与字体规范

|类型|具体要求|
|---|---|
|颜色|完全复刻钉钉6.5.x颜色体系：主色#1677ff，成功色#52c41a，警告色#faad14，错误色#ff4d4f，背景色#f5f5f5（页面背景）、#ffffff（卡片/面板背景），文本主色#333333，辅助文本#666666，占位文本#8c8c8c，完全匹配6.5.x各元素颜色规范|
|字体|复刻钉钉6.5.x字体规范：标题18px（页面主标题）/16px（模块标题），正文14px（列表项、按钮文本），说明文本12px（时间、状态说明）；字体统一为无衬线字体（微软雅黑/思源黑体），行高与6.5.x一致（标题行高1.5，正文行高1.4）|
# 六、核心模块交互细节规范（1:1复刻钉钉6.5.x，超细节版）

## 4.1 全局通用交互规范

### 4.1.1 鼠标hover通用规则

- 所有可交互元素（按钮、菜单、卡片、图标）hover时，均需有明确视觉反馈，反馈延迟≤100ms，无卡顿

- hover反馈优先级：边框颜色变化＞背景色变化＞阴影变化，禁止同时出现3种及以上反馈（避免杂乱）

- 非交互元素（纯文本、静态图标）hover时无任何反馈，避免误导用户

### 4.1.2 点击交互通用规则

- 点击可交互元素时，需有“按下-回弹”视觉反馈（如按钮缩放至0.98倍后还原，时长150ms）

- 点击后加载状态：需在点击元素旁显示loading图标（圆形旋转，直径16px，颜色#1677ff），加载完成前禁止重复点击（按钮置灰或添加遮罩）

- 点击错误反馈：若操作失败，需在元素下方显示红色提示文本（12px，#ff4d4f），提示文本存在时长3s后自动消失，或点击空白处关闭

### 4.1.3 弹窗/抽屉通用交互

- 弹窗打开：采用渐入+轻微缩放动画（从0.95倍放大至1倍，透明度从0.8升至1，时长200ms），打开时居中显示，若页面滚动，弹窗始终跟随视口居中

- 弹窗关闭：支持3种关闭方式（右上角×按钮、点击弹窗外部空白区域、按ESC键），关闭动画与打开动画反向，时长150ms

- 抽屉打开：从左侧/右侧滑入（默认左侧，宽度≤350px），滑入速度200ms，边缘无锯齿；打开后抽屉覆盖主内容区，主内容区添加半透明遮罩（透明度0.5，背景#000）

- 弹窗/抽屉内表单：未填写必填项点击提交时，需对未填项添加红色边框闪烁提示（闪烁2次，每次0.3s，间隔0.2s），同时在输入框下方显示“请填写该字段”提示

## 4.2 顶部栏模块交互细节

### 4.2.1 企业Logo/名称区域交互

- hover反馈：企业名称文本颜色从白色（#ffffff）变为浅灰色（#f5f5f5），无其他变化；Logo无hover反馈

- 点击交互：点击Logo/名称时，跳转到工作台首页（默认路由/im/workbench），点击后无加载状态（首页为预加载）

- 企业切换（多企业场景）：若用户关联多个企业，hover企业名称时，下方显示企业切换下拉菜单（白色背景，阴影0 2px 8px rgba(0,0,0,0.1)），菜单项高度36px，hover时背景色#f5f5f5，点击后切换企业并刷新页面

### 4.2.2 搜索框交互

- 默认状态：搜索框宽度200px，背景色#0f62d9，占位文本“全局搜索”（14px，#bfd4f5），左侧显示搜索图标（#bfd4f5）

- hover状态：搜索框背景色#0e5bc0，无宽度变化

- 聚焦状态：搜索框宽度扩展至280px（过渡动画时长200ms），背景色#ffffff，边框无，左侧搜索图标变为#1677ff，占位文本消失

- 输入交互：输入过程中实时显示搜索建议下拉框（显示最近搜索记录+匹配结果），建议项高度32px，hover背景#f5f5f5；按Enter键触发搜索，搜索时搜索框右侧显示loading图标，搜索完成后显示搜索结果页面

- 失焦状态：若未输入内容，恢复默认状态；若已输入内容，保持聚焦时的宽度和背景色，显示已输入文本，右侧显示“清除”图标（×），点击清除图标清空文本并恢复默认状态

### 4.2.3 消息通知交互

- 未读标识：红点直径8px，颜色#ff4d4f，位于图标右上角；若未读数量＞99，显示“99+”文本（12px，白色，背景#ff4d4f，圆角4px，padding 0 4px）

- hover交互：hover时图标颜色从白色变为浅灰色（#f5f5f5），同时显示未读数量提示文本（如“3条未读消息”，12px，白色，背景#333333，圆角4px，padding 2px 8px）

- 点击交互：点击后显示消息下拉面板（白色背景，阴影0 4px 16px rgba(0,0,0,0.15)，宽度360px），面板内按时间倒序排列消息；点击面板内消息跳转至对应聊天窗口或详情页，点击面板空白处/其他区域关闭面板；点击后未读标识消失，消息标记为已读

- 消息刷新：消息面板显示时，顶部有“下拉刷新”提示，下拉距离≥30px松开触发刷新，刷新时显示loading图标，刷新完成后更新消息列表

### 4.2.4 用户头像/姓名区域交互

- hover交互：用户姓名文本颜色从白色变为浅灰色（#f5f5f5），头像无变化；同时显示下拉菜单触发区域（覆盖头像+姓名+箭头）

- 点击交互：点击后显示下拉菜单（白色背景，阴影0 2px 8px rgba(0,0,0,0.1)，宽度160px），菜单项包括“个人资料”“系统设置”“切换账号”“退出登录”，每个菜单项高度36px，hover背景#f5f5f5

- 菜单项交互：点击“个人资料”打开个人信息弹窗（居中显示，宽度400px）；点击“系统设置”跳转到设置页面；点击“切换账号”显示账号切换面板；点击“退出登录”触发确认弹窗（提示“确定要退出登录吗？”，有“确定”“取消”按钮），点击确定后清除Token并跳转至登录页

## 4.3 左侧导航栏模块交互细节

### 4.3.1 导航项通用交互

- 默认状态：未选中导航项高度48px，图标颜色#8c8c8c，文本颜色#333333，内边距左侧24px（图标与文本间距8px）

- hover状态：背景色#f5f5f5，图标颜色#1677ff，文本颜色#1677ff，无其他变化

- 选中状态：背景色#e8f3ff，左侧显示4px宽蓝色竖线（#1677ff），图标颜色#1677ff，文本颜色#1677ff

- 未读提示：若导航项有未读消息，在文本右侧显示红点（直径6px，#ff4d4f）或“N”数字提示（12px，#ff4d4f）

- 点击交互：点击未选中项时，取消当前选中项状态，设置为选中状态，跳转至对应模块页面（页面切换无动画，直接加载）；点击已选中项时，刷新当前模块页面（页面顶部显示加载进度条，高度2px，#1677ff，加载完成后消失）

### 4.3.2 折叠/展开交互

- 触发按钮：位于左侧导航栏底部，图标为“←”（折叠）/“→”（展开），按钮高度48px，宽度192px（展开状态）/64px（折叠状态），hover背景色#f5f5f5

- 折叠过程：导航栏宽度从192px收缩至64px（过渡动画时长200ms），收缩过程中文本逐渐隐藏，图标居中显示；折叠后仅显示图标，导航项高度不变，hover时显示文本提示（白色背景，阴影0 2px 8px rgba(0,0,0,0.1)，12px，#333333）

- 展开过程：导航栏宽度从64px扩展至192px（过渡动画时长200ms），图标先显示，文本逐渐显示，恢复展开状态布局

- 记忆功能：折叠/展开状态需本地存储（localStorage），下次打开页面保持上次状态

### 4.3.3 系统管理导航项交互

- 权限控制：仅管理员角色可见，普通用户无此导航项

- 交互逻辑：与其他导航项一致，但选中状态背景色为#fff2f0，左侧竖线颜色#ff4d4f，图标和文本颜色#ff4d4f

## 4.4 IM聊天模块交互细节

### 4.4.1 聊天列表交互

- 列表项默认状态：高度64px，背景色#ffffff，边框底部1px solid #f0f0f0；左侧用户/群组头像（直径40px），右侧显示名称（14px，#333333）、最新消息摘要（12px，#8c8c8c）、消息时间（12px，#8c8c8c），未读消息显示红点标识

- hover状态：列表项背景色#f5f5f5，无其他变化

- 点击交互：点击列表项跳转至对应聊天窗口，未读消息标记为已读；若为群组聊天，点击头像旁下拉箭头显示群组操作菜单（查看群成员、群设置等）

- 搜索筛选：支持按名称模糊搜索聊天列表，搜索结果高亮匹配关键词；支持按未读、群聊、单聊分类筛选

### 4.4.2 聊天窗口交互

- 消息展示：按时间顺序排列消息，气泡式布局，己方消息居右（背景色#1677ff，文字白色），对方消息居左（背景色#ffffff，文字#333333）；消息包含发送时间、内容、状态（已发送/已读）

- 消息操作：hover消息气泡显示操作菜单（撤回、转发、复制），仅支持操作己方消息；撤回消息后显示“已撤回一条消息”提示，对方无法查看原内容

- 输入框交互：输入框高度自适应，默认36px，最大高度120px；支持快捷键Enter发送消息（Shift+Enter换行）；输入时显示输入状态“正在输入...”

- 附件发送：点击输入框左侧附件图标，支持选择文件/图片发送；图片发送后可点击预览，文件发送后显示文件名称、大小及下载按钮

- 消息刷新：滚动至聊天窗口顶部时显示“加载更多”，点击后加载历史消息；支持消息搜索，搜索结果高亮显示

## 4.5 工作台模块交互细节

### 4.5.1 应用卡片交互

- 默认状态：卡片尺寸120px×120px（宽×高），背景色#ffffff，圆角4px，无阴影；图标尺寸48px×48px，位于卡片顶部居中，文本14px，#333333，位于图标下方居中，文本与图标间距8px

- hover状态：卡片阴影变为0 2px 8px rgba(0,0,0,0.1)，卡片轻微上浮（transform: translateY(-2px)，过渡时长150ms），图标颜色变为#1677ff，文本颜色不变

- 点击交互：点击卡片时有“按下”反馈（transform: scale(0.98)，时长100ms），松开后还原并跳转至应用页面；若应用加载较慢，在卡片中心显示loading图标（直径24px），直至页面加载完成

- 应用管理交互：管理员hover卡片时，右上角显示“编辑”图标（×，16px，#8c8c8c），点击编辑图标弹出应用配置菜单（移动、删除、设置常用）；普通用户无此图标

- 卡片排列：默认2列（屏幕宽度＜1200px）/3列（1200px≤宽度＜1600px）/4列（宽度≥1600px），列间距24px，行间距24px，自适应时卡片尺寸不变，仅调整列数

### 4.5.2 待办事项列表交互

- 列表项默认状态：高度64px，背景色#ffffff，边框底部1px solid #f0f0f0；左侧图标（时间/审批图标）颜色#1677ff，尺寸16px；标题文本14px，#333333；时间文本12px，#8c8c8c；右侧“处理”按钮默认隐藏

- hover状态：列表项背景色#f5f5f5，右侧“处理”按钮显示（Element Plus primary按钮，尺寸mini，宽度60px）

- 点击交互：点击列表项非按钮区域，跳转至待办事项详情页；点击“处理”按钮，直接打开审批处理弹窗（居中显示，宽度500px）

- 批量操作：列表顶部有“批量已读”“批量删除”按钮（默认隐藏），勾选列表项左侧复选框后显示；勾选全选框时选中所有列表项，再次勾选取消全选

- 刷新交互：列表右上角有“刷新”图标（16px，#8c8c8c），hover时颜色#1677ff，点击后显示loading图标，刷新待办事项列表，刷新完成后loading消失

### 4.5.3 数据概览看板交互

- 统计项交互：统计项卡片尺寸200px×80px，背景色#ffffff，圆角4px，阴影0 1px 4px rgba(0,0,0,0.05)；hover时阴影变为0 2px 8px rgba(0,0,0,0.1)，无其他变化

- 数值交互：点击统计数值时，跳转至对应详细数据页面（如点击“今日审批”数值，跳转至审批统计页面）

- 刷新交互：看板右上角“刷新”图标，hover颜色#1677ff，点击后所有统计项数值旁显示loading图标（直径14px），刷新完成后更新数值并隐藏loading

- 时间筛选：看板顶部有时间筛选下拉框（默认“今日”），选项包括今日、昨日、近7天、近30天；点击选项时，筛选框关闭，看板显示loading状态，加载对应时间范围的数据

## 4.6 审批中心模块交互细节

### 4.6.1 审批分类导航交互

- 默认状态：导航项高度48px，文本14px，#333333，内边距左侧24px；未选中项无背景，选中项背景色#e8f3ff，文本颜色#1677ff，左侧显示4px宽蓝色竖线

- hover状态：未选中项背景色#f5f5f5，文本颜色#1677ff；选中项hover无变化

- 点击交互：点击未选中项时，取消当前选中状态，设置为选中状态，右侧列表区域显示loading图标，加载对应分类的审批列表；点击已选中项时，刷新当前分类列表

- 未读提示：若分类下有未审批事项，在文本右侧显示红点（直径6px，#ff4d4f）或数字提示（如“5”，12px，#ff4d4f）

### 4.6.2 审批列表交互

- 列表项默认状态：高度80px，背景色#ffffff，边框底部1px solid #f0f0f0；包含审批标题（14px，#333333）、申请人（12px，#8c8c8c）、申请时间（12px，#8c8c8c）、审批状态标签（如“待审批”“已通过”）

- 状态标签样式：待审批（红色，#ff4d4f）、已通过（绿色，#52c41a）、已驳回（橙色，#faad14）、处理中（蓝色，#1677ff），标签为圆角4px，padding 2px 8px，文本12px

- hover状态：列表项背景色#f5f5f5，无其他变化

- 点击交互：点击列表项任意区域，跳转至审批详情页；详情页加载时显示loading图标（居中显示，直径32px）

- 筛选交互：列表顶部有筛选条件（审批类型、时间范围、状态），选择筛选条件后点击“筛选”按钮，列表显示loading状态，加载筛选结果；点击“重置”按钮，清空所有筛选条件，恢复默认列表

- 分页交互：分页控件位于列表底部居中，当前页码背景色#1677ff，文本白色；hover页码时背景色#e8f3ff，文本#1677ff；点击页码跳转至对应页，点击“上一页”“下一页”切换页码，无数据时分页控件隐藏

### 4.6.3 发起审批交互

- 发起按钮交互：按钮为Element Plus primary按钮，尺寸medium，文本“发起审批”；hover时背景色#0f62d9，点击时有按下反馈，松开后打开“选择审批模板”弹窗

- 模板选择交互：弹窗宽度600px，高度400px，顶部搜索框（搜索模板名称），模板以卡片形式排列（2列，卡片尺寸260px×120px）；hover模板卡片时背景色#f5f5f5，点击卡片跳转至对应审批表单页面

- 表单填写交互：表单字段按顺序排列，标签居左（12px，#8c8c8c），输入框/选择器宽度100%；必填字段标签前显示红色星号（*）；输入框聚焦时边框颜色#1677ff，失焦时验证内容，错误时显示红色边框和提示文本

- 附件上传交互：点击“上传附件”按钮打开文件选择框，支持多文件上传；上传中显示进度条（高度2px，#1677ff），上传完成显示成功图标（√，绿色），上传失败显示失败图标（×，红色），可点击删除图标移除附件

- 提交交互：点击“提交”按钮时，先验证表单必填项，验证通过后显示loading状态，提交成功后显示“提交成功”提示（绿色，居中显示，3s后消失），跳转至“我发起的”审批列表；验证失败时，聚焦第一个未填必填项并显示提示

### 4.6.4 审批处理交互

- 处理按钮交互：详情页底部有“通过”“驳回”“加签”“转审”按钮；默认状态“通过”“驳回”为primary按钮，其他为default按钮；hover时按钮背景色变化（primary按钮hover#0f62d9，default按钮hover#f5f5f5）

- 通过交互：点击“通过”按钮，弹出意见输入框（宽度300px，高度120px，默认空），有“确定”“取消”按钮；输入意见后点击确定，显示loading状态，处理成功后显示“处理成功”提示，跳转至“我已审批”列表；点击取消关闭弹窗

- 驳回交互：点击“驳回”按钮，弹出意见输入框（必填，提示“请输入驳回原因”），输入后点击确定，处理成功后显示提示，跳转至对应列表；未输入意见点击确定时，显示“请输入驳回原因”提示

- 加签/转审交互：点击“加签”/“转审”按钮，弹出成员选择弹窗（支持搜索成员），选择成员后点击确定，显示loading状态，处理成功后提示“加签成功”/“转审成功”，详情页更新审批流程

## 4.7 通讯录模块交互细节

### 4.7.1 组织架构层级交互

- 默认状态：企业名称为16px，#333333，左侧有展开/折叠图标（△/▽，14px，#8c8c8c）；部门名称为14px，#333333，左侧展开/折叠图标，层级越深左侧缩进越多（每级缩进16px）

- 展开/折叠交互：点击展开/折叠图标，部门列表展开/折叠（过渡动画时长150ms）；展开时显示子部门和成员，折叠时仅显示部门名称；点击部门名称也可触发展开/折叠

- hover状态：企业/部门名称hover时颜色#1677ff，背景色#f5f5f5（宽度覆盖整个左侧区域）

- 选中状态：部门选中时背景色#e8f3ff，文本颜色#1677ff，右侧显示成员数量（如“12人”，12px，#8c8c8c）

### 4.7.2 成员列表交互

- 列表项默认状态：高度48px，背景色#ffffff，左侧成员头像（直径32px，圆形），头像右侧成员姓名（14px，#333333）和职位（12px，#8c8c8c），职位位于姓名下方；右侧有“更多”图标（···，14px，#8c8c8c），默认隐藏

- hover状态：列表项背景色#f5f5f5，右侧“更多”图标显示

- 点击交互：点击成员姓名/头像，打开成员详情弹窗（宽度300px，背景#ffffff，阴影0 2px 8px rgba(0,0,0,0.1)）；点击“更多”图标，显示操作菜单（发送消息、添加好友、查看详情），菜单项高度32px，hover背景#f5f5f5

- 成员详情弹窗交互：弹窗内显示头像（直径64px）、姓名（16px）、职位（14px，#8c8c8c）、部门（14px，#8c8c8c）、联系方式（电话/邮箱，14px，#1677ff）；底部有“复制联系方式”“返回”按钮，点击“复制”后显示“复制成功”提示，点击“返回”关闭弹窗

### 4.7.3 成员搜索交互

- 搜索框状态：与顶部栏搜索框样式一致，默认宽度200px，聚焦后扩展至280px

- 搜索交互：输入关键词实时匹配成员姓名/部门/职位，搜索结果显示在下方列表（隐藏组织架构层级），匹配到的关键词高亮显示（背景#fff2f0，颜色#ff4d4f）；无匹配结果时显示“无匹配成员”（14px，#8c8c8c，居中显示）

- 清空交互：搜索框右侧“清除”图标，点击清空关键词，恢复显示完整组织架构和成员列表

## 4.8 应用中心模块交互细节

### 4.8.1 应用九宫格交互

- 默认状态：应用图标直径64px，文本14px，#333333，图标与文本间距8px；九宫格行列间距24px，默认3列排列

- hover状态：应用图标颜色#1677ff，文本颜色#1677ff，无背景变化

- 点击交互：点击应用图标/文本，根据应用配置的跳转方式打开应用（路由跳转直接打开页面，iframe嵌入在当前页面主内容区打开，外部链接在新标签页打开）；加载时显示loading图标（应用图标位置）

- 应用分类交互：顶部有应用分类标签（如“办公协同”“数据分析”“系统工具”），标签默认14px，#8c8c8c，hover时颜色#1677ff，选中时背景色#e8f3ff，文本#1677ff，圆角16px，padding 4px 12px；点击分类标签，应用列表切换为对应分类的应用

### 4.8.2 管理员应用配置交互

- 配置入口：应用中心右上角“应用配置”按钮（仅管理员可见），hover背景#f5f5f5，点击打开配置页面

- 应用排序交互：配置页面应用列表可拖拽排序（拖拽时应用卡片有半透明效果，阴影加深），排序完成后点击“保存排序”按钮，显示保存成功提示，应用中心九宫格按新顺序显示

- 应用添加/删除交互：点击“添加应用”按钮，打开应用选择弹窗，勾选应用后点击“确定”添加；点击应用卡片右上角“删除”图标（×，16px，#8c8c8c），弹出确认弹窗，点击“确定”删除应用，删除后应用中心不再显示

- 跳转方式配置：每个应用后有“跳转方式”下拉框（路由跳转/iframe嵌入/外部链接），选择后输入对应地址，点击“保存”按钮保存配置，保存成功后应用点击跳转按配置执行

# 七、核心功能模块清单（复刻钉钉+安全增强）

## 5.1 IM聊天模块（核心）

- 核心功能：单聊/群聊、消息发送/接收、消息回执、消息撤回/编辑、文件/图片传输、聊天记录查询

- 交互要求：支持输入状态显示、消息已读/未读标识、历史消息加载，聊天窗口支持多标签切换

## 5.2 工作台模块

- 核心功能：常用应用入口（卡片式）、待办事项列表（审批待处理）、数据概览看板（今日审批数、未读消息数、新增应用数）

- 交互要求：应用卡片支持点击跳转，待办事项支持点击直达处理页，数据看板支持刷新和时间筛选

## 5.3 消息通知模块

- 核心功能：系统通知、审批通知（发起/通过/驳回）、业务提醒、消息聚合展示

- 交互要求：顶部栏红点标识未读数量，点击展开通知列表，支持标记已读/删除、点击跳转详情

## 5.4 通讯录模块

- 核心功能：企业-部门-成员层级展示、员工搜索、成员详情查看（姓名、部门、职位、联系方式）、添加好友/创建群组

- 数据来源：复用若依sys_dept（部门）、sys_user（用户）表，构建私有化组织架构

## 5.5 审批中心模块（重点）

- 核心功能：发起审批（多模板选择）、审批分类查看（待我审批、我发起的、我已审批）、审批详情查看、审批处理（通过/驳回/加签）

- 审批模板：内置请假、报销模板，支持自定义通用表单模板

## 5.6 应用中心模块

- 核心功能：企业内部系统入口聚合（九宫格布局）、应用搜索、管理员应用配置（添加/删除/排序/跳转方式设置）

- 跳转支持：路由跳转（同前端项目内模块）、iframe嵌入（外部系统）、外部链接跳转

## 5.7 系统管理模块（复用若依）

- 核心功能：用户管理、角色管理、菜单管理、权限分配、应用配置、系统参数设置

- 权限控制：仅管理员角色可见，复用若依现有接口与页面样式，适配IM系统UI风格

## 5.8 核心服务模块定位（前后端不分离版）

- ruoyi-im-web：前端Web聊天界面模块，负责即时通讯相关的前端页面展示与交互，包括单聊/群聊界面、消息收发展示、好友/群组列表管理等，基于layui+thymeleaf构建，复用若依前端基础样式；**该模块直接对接ruoyi-im-api核心后端API子模块，通过调用其提供的接口实现所有前端数据交互与业务逻辑联动**

- ruoyi-im-admin：**若依管理体系相关代码模块（独立目录）**，核心定位是平台级管理，负责用户审核、群组创建审核、消息内容审计、系统参数配置等管理功能，仅管理员可见；基于若依框架独立开发，复用若依管理后台的权限管控、菜单管理等原生能力，与ruoyi-im-api模块相互独立，无任何接口调用或数据关联

- ruoyi-im-api：核心后端API子模块，作为业务中台提供所有核心接口（用户认证、好友关系管理、消息收发、群组管理、审批流程等），支撑ruoyi-im-web前端及其他业务模块的数据处理与逻辑调度；与ruoyi-im-admin模块相互独立，无任何关联

# 八、项目代码目录结构说明

项目采用模块化分层设计，新增IM相关模块与若依原生模块并列存在，各模块独立目录化管理，核心模块对接/独立关系清晰，具体目录结构及说明如下：

|目录/文件名称|类型|核心说明|
|---|---|---|
|ruoyi-im-admin|独立模块目录（若依管理体系）|基于若依框架独立开发的管理后台模块，归属若依管理体系；核心功能为用户审核、群组创建审核、消息内容审计、系统参数配置等平台级管理能力；仅管理员可见，复用若依原生权限管控、菜单管理能力；与ruoyi-im-api模块完全独立，无接口调用及数据关联，独立实现数据操作|
|ruoyi-im-api|独立模块目录（核心后端API）|IM系统业务中台核心，提供全量核心业务接口（用户认证、好友关系管理、消息收发、群组管理、审批流程等）；支撑ruoyi-im-web前端模块的数据处理与逻辑调度；依赖若依原生基础模块（ruoyi-common、ruoyi-framework等），与ruoyi-im-admin模块完全独立无关联|
|ruoyi-im-web|独立模块目录（前端Web界面）|基于layui+thymeleaf构建的前端Web聊天界面模块；包含单聊/群聊界面、消息收发展示、好友/群组列表管理等前端页面及静态资源；直接对接ruoyi-im-api模块接口实现数据交互与业务联动；复用若依前端基础样式与路由、权限框架，与ruoyi-im-admin模块无直接关联|
|pom.xml|根目录依赖配置文件|管理所有模块（新增IM模块+若依原生模块）的依赖关系，统一控制依赖版本；确保ruoyi-im-api、ruoyi-im-web、ruoyi-im-admin等模块可协同打包部署，实现项目整体构建|
|ruoyi-admin|若依原生模块目录|若依框架原生管理后台模块，提供系统基础管理能力（用户/角色/菜单管理等）；与ruoyi-im-admin模块协同，共同构成系统全量管理功能体系；为其他模块提供基础权限支撑|
|ruoyi-common|若依原生模块目录|若依框架公共工具模块，提供日志、异常处理、数据校验、缓存等基础工具类；为ruoyi-im-api、ruoyi-im-web、ruoyi-im-admin等所有模块提供基础能力支撑，是项目核心依赖模块|
|ruoyi-framework|若依原生模块目录|若依框架核心模块，包含Spring Boot启动配置、Shiro权限框架、MyBatis-Plus持久层等核心组件；所有模块的基础架构依赖，保障系统架构稳定性与一致性|
|ruoyi-system|若依原生模块目录|若依框架系统核心模块，包含用户、部门、角色等核心数据实体与服务；ruoyi-im-api、ruoyi-im-web等模块复用其sys_user、sys_dept等表数据构建组织架构体系|
|其他若依原生模块（ruoyi-generator/ruoyi-quartz等）|若依原生模块目录|为项目提供辅助能力：ruoyi-generator支持IM新增数据表的代码自动生成；ruoyi-quartz可实现IM系统定时任务（消息过期清理等）；均为各模块提供基础辅助支撑|
## 5.2 核心模块目录关联说明

- 对接关系：仅ruoyi-im-web（前端）与ruoyi-im-api（后端API）存在直接对接，通过接口实现数据交互

- 独立关系：ruoyi-im-admin与ruoyi-im-api、ruoyi-im-web均无任何接口调用或数据关联，三者为独立模块

- 公共依赖：所有模块均依赖ruoyi-common、ruoyi-framework等若依原生基础模块，保障基础能力统一

- 部署协同：所有模块通过根目录pom.xml统一打包部署，ruoyi-im-admin部署后融入若依管理后台体系，其他模块按功能独立运行但协同工作

# 九、与若依框架的集成要求（前后端不分离版，适配私有化）

## 6.1 模块命名规范

遵循若依官方模块命名规范，所有新增模块统一以ruoyi-为前缀，与原生模块（ruoyi-admin、ruoyi-system等）保持一致，避免命名冲突，具体新增模块如下：

- ruoyi-im-web：前端Web聊天界面模块，负责即时通讯相关页面展示与交互

- ruoyi-im-admin：**若依管理体系相关代码模块（独立目录）**，基于若依框架独立开发，负责平台级管理功能（用户审核、群组管控等），仅对管理员开放；依托若依原生管理体系，复用若依管理后台核心能力，与ruoyi-im-api模块相互独立，无关联关系，独立实现自身管理功能的数据操作

- ruoyi-im-api：核心后端API子模块，提供所有核心业务接口，支撑ruoyi-im-web及其他功能的数据交互；与ruoyi-im-admin模块相互独立，无关联关系

## 6.2 前端集成方案

基于若依前后端不分离架构，所有前端资源整合至ruoyi-im-web模块的指定目录，复用ruoyi-admin的前端框架（layui+thymeleaf）：

- 资源目录：前端页面文件（.html）放置于`ruoyi-im-web/src/main/resources/templates/im` 目录；对应的js、css、图片等静态资源放置于`ruoyi-im-web/src/main/resources/static/im` 目录

- 路由配置：复用若依Spring MVC路由机制，在ruoyi-im-web模块中通过`@RequestMapping("/im")`统一配置路由前缀，所有IM相关页面路由均以`/im/xxx`格式定义（如/im/chat、/im/workbench），避免与若依原生模块路由冲突

- 权限复用：直接复用若依Shiro权限控制体系，通过`@RequiresPermissions`注解控制ruoyi-im-web模块页面及按钮的访问权限，与ruoyi-admin原生权限体系无缝兼容；页面级权限通过若依菜单管理功能（sys_menu表）配置，按钮级权限通过权限标识精准控制

- UI适配：基于layui组件库（若依原生前端组件）开发，严格遵循前文UI设计规范，确保与ruoyi-admin现有页面风格统一，无需引入额外UI组件库

## 6.3 后端集成方案

- 模块依赖：ruoyi-im-api、ruoyi-im-web模块在pom.xml中添加ruoyi-admin、ruoyi-system、ruoyi-common等原生模块依赖，复用若依核心基础能力（日志框架、异常处理机制、数据校验工具、缓存组件等），无需重复开发基础功能

- 包结构规范：后端代码统一按模块划分包路径，确保结构清晰：
- ruoyi-im-api模块：包路径为`com.ruoyi.im.api`，包含核心接口定义（如ChatService、GroupService、ApprovalService）、数据传输对象（DTO）、实体类（Entity）等
- ruoyi-im-web模块：包路径为`com.ruoyi.im.web`，按功能划分子包：
  - com.ruoyi.im.web.controller：控制层，处理前端IM相关请求（路由前缀/im）
  - com.ruoyi.im.web.service.impl：服务实现层，实现ruoyi-im-api定义的核心接口
  - com.ruoyi.im.web.mapper：数据访问层，操作数据库表，依赖若依MyBatis-Plus基础能力
  - com.ruoyi.im.web.util：工具类层（IM消息加密、格式转换、日期处理等）
  - com.ruoyi.im.web.config：模块专属配置类（如WebSocket配置、消息队列配置等）

- 数据库集成：新增数据表统一以`im_`为前缀（如im_chat_record、im_group、im_friend、im_approval_template），与若依原生表区分；复用sys_user、sys_dept、sys_role、sys_menu等原生表存储用户、部门、权限、菜单数据，通过关联字段（如user_id关联sys_user表id）实现数据联动；新增表需遵循若依数据库设计规范，包含创建时间、创建人、更新时间、更新人、删除标志（del_flag）等通用字段

- 配置集成：新增系统配置项（如IM消息缓存时长、文件存储路径、WebSocket连接参数等）存入若依原生配置表sys_config，通过ruoyi-common模块的ConfigService工具类获取配置值，支持配置项动态修改，无需重启服务；敏感配置（如文件存储密钥）需通过若依加密机制处理，避免明文存储

- 日志集成：复用若依Logback日志框架，按若依日志规范记录系统日志（操作日志、异常日志、访问日志）；操作日志通过ruoyi-common模块的Log注解自动记录，异常日志统一抛至若依全局异常处理器处理，确保日志格式与原生模块一致，便于问题排查

## 6.4 与ruoyi-im-admin的集成要点

- 功能归属与部署：ruoyi-im-admin为若依管理体系相关的独立模块目录（非ruoyi-admin子目录），基于若依框架独立开发，作为平台级管理功能模块单独存在；部署时与ruoyi-admin、ruoyi-im-web等模块一同打包部署，通过根目录pom.xml统一构建，无需单独部署，部署后融入若依管理后台体系；与ruoyi-im-api模块独立部署、无关联

- 代码目录规范：ruoyi-im-admin作为若依管理体系相关代码模块，独立目录对应的包路径统一为`com.ruoyi.im.admin`，内部划分子包：controller（管理端接口）、service（管理端业务逻辑）、mapper（管理端数据访问），确保与若依原生管理模块目录结构规范一致；**模块独立开发、独立实现数据操作，不调用ruoyi-im-api模块任何接口，与ruoyi-im-api无关联**

- 权限适配要点：ruoyi-im-admin的所有管理接口和页面，均需通过若依原生的Shiro权限注解（`@RequiresPermissions`）控制访问权限，权限标识统一以“im:admin:xxx”格式命名（如“im:admin:user:audit”对应用户审核权限）；权限配置通过若依系统管理的“角色管理”功能分配，仅授予管理员角色，确保管理功能的安全性

- 菜单集成规范：ruoyi-im-admin的管理页面需作为子菜单集成至ruoyi-admin的原生菜单体系中，菜单父节点建议选择“系统管理”，菜单路径、图标、排序等配置通过若依“菜单管理”功能录入，菜单URL需与ruoyi-im-admin的接口路由保持一致，确保从若依原生管理后台可直接跳转至IM管理功能页面

- 数据交互安全：ruoyi-im-admin作为独立模块，数据操作独立实现，不与ruoyi-im-api进行任何数据交互；敏感管理操作（如消息审计、群组删除）需额外记录操作日志，日志内容包含操作人、操作时间、操作内容、IP地址等信息，日志数据复用若依sys_oper_log表存储

# 十、AI提示词库（开发辅助用，精准复刻+安全适配）

## 7.1 前端开发提示词

### 7.1.1 Vue3+Element Plus组件开发提示词

请基于Vue3+Element Plus，1:1复刻钉钉6.5.x版本IM聊天窗口组件，同时满足以下安全与功能要求：1. 布局包含聊天列表区、消息展示区、输入区，完全匹配钉钉6.5.x布局比例与元素位置；2. 支持单聊/群聊切换，消息气泡样式、颜色、位置（己方居右、对方居左）与钉钉完全一致；3. 实现消息发送/接收、已读/未读状态显示、输入框自适应高度、文件/图片上传功能，交互逻辑与钉钉完全同步；4. 新增消息端到端加密功能，确保传输过程安全；5. 支持聊天记录加密存储与脱敏展示，敏感信息（手机号、邮箱）自动脱敏；6. hover消息显示撤回/复制/转发菜单，仅支持操作己方消息，菜单样式与位置复刻钉钉；7. 支持快捷键Enter发送消息（Shift+Enter换行）；8. 样式严格遵循钉钉6.5.x颜色体系（主色#1677ff、背景色#f5f5f5等）、字体规范（正文14px等），确保视觉完全一致。

### 7.1.2 页面布局适配提示词

基于若依前后端不分离架构（layui+thymeleaf），1:1复刻钉钉6.5.x版本工作台页面，同时适配私有化安全要求：1. 采用“顶部栏+左侧导航栏+主内容区”三级布局，完全复刻钉钉6.5.x工作台布局结构、元素尺寸、间距比例，复用若依原生顶部栏和左侧导航组件并严格适配钉钉6.5.x样式；2. 主内容区完全复刻钉钉6.5.x工作台：包含常用应用区（卡片尺寸112px×112px，2-4列自适应，图标、文本与钉钉完全一致）、待办事项列表（列表项高度64px，状态标签样式、位置对齐6.5.x）、数据概览看板（统计卡片尺寸200px×80px，布局间距16px，图表样式与钉钉一致）；3. 实现应用卡片hover上浮、点击跳转、管理员编辑功能（编辑图标样式与位置复刻6.5.x），待办事项hover显示处理按钮，交互逻辑与钉钉完全同步；4. 新增数据权限管控，确保不同角色仅能查看对应权限范围内的待办事项与数据看板；5. 样式完全匹配钉钉6.5.x颜色、字体、间距规范，确保与原生版本视觉一致，同时前端页面开启XSS、CSRF防护。

## 7.2 后端开发提示词

### 7.2.1 若依框架集成API开发提示词

基于若依框架开发ruoyi-im-api模块的聊天消息接口，要求1:1复刻钉钉消息交互逻辑，同时强化数据安全：1. 接口功能：实现单聊消息的发送与接收，支持消息状态（已发送/已读）更新，完全匹配钉钉消息传输逻辑；2. 遵循若依接口规范，使用RESTful风格，返回格式统一为{"code":200,"msg":"成功","data":{}}；3. 依赖ruoyi-common模块的日志、异常处理、数据校验工具；4. 涉及数据表im_chat_record（消息表，需进行字段级AES-256加密）、sys_user（用户表），通过user_id关联，实现消息与用户信息的关联查询；5. 接口添加Shiro权限注解控制访问，同时新增数据权限校验，确保用户仅能访问本人相关的聊天消息；6. 记录详细的接口调用审计日志（操作人、时间、IP、消息类型）；7. 实现消息端到端加密传输，接口请求/响应参数均需加密处理；8. 支持消息内容过滤，拦截敏感信息（如违规词），符合信息安全规范。

### 7.2.2 WebSocket长连接开发提示词

基于Spring Boot（若依框架）开发IM系统的WebSocket长连接模块，要求复刻钉钉实时消息推送体验，同时保障连接安全：1. 实现客户端与服务端的连接建立/断开、心跳检测（避免连接超时，心跳间隔与钉钉一致）；2. 支持单聊消息实时推送、群聊消息广播，消息推送前校验用户权限，确保仅推送给有权限的用户；3. 集成若依Token认证机制，连接建立时校验Token有效性，无效连接直接断开；同时支持IP白名单校验，仅允许授权终端连接；4. 处理并发连接场景，确保消息推送的顺序性和一致性，异常断开时记录日志并支持重连，重连时同步未接收消息；5. 配置参数（连接超时时间、消息缓存大小）从若依sys_config表读取，支持动态修改；6. WebSocket连接采用WSS加密协议，防止消息传输过程中被窃听、篡改；7. 限制单用户最大连接数，防止恶意连接攻击；8. 新增连接审计日志，记录连接建立/断开时间、用户ID、终端IP、设备信息。

## 7.3 数据库设计提示词

遵循《阿里巴巴数据库设计规范》、若依数据库规范及《信息安全技术 数据存储安全规范》，设计IM系统的群组相关数据表，要求适配私有化安全存储需求：1. 包含im_group（群组表）、im_group_member（群成员表），完全匹配钉钉群组数据结构；2. im_group表需包含群组ID、群组名称、创建人ID、创建时间、更新时间、删除标志（del_flag）、群公告、群禁言状态等字段，关联sys_user表创建人信息；3. im_group_member表包含群组ID、用户ID、加入时间、角色（群主/普通成员/管理员）、是否禁言等字段，联合主键为（group_id, user_id）；4. 字段类型合理选择（如ID用bigint、名称用varchar(64)），添加索引优化查询（group_id、user_id字段建索引）；5. 敏感字段（如群公告中可能包含的敏感信息）需进行字段级AES-256加密存储；6. 所有表均需包含创建人、创建时间、更新人、更新时间、删除标志（del_flag）等若依通用字段，支持数据追溯；7. 说明表之间的关联关系，提供建表SQL语句（兼容MySQL 5.7.44），并标注加密字段与加密方式；8. 考虑数据备份需求，表结构设计支持增量备份与全量备份。

## 7.4 测试用例生成提示词

针对IM聊天模块的消息发送功能，生成详细测试用例，要求覆盖功能复刻完整性与数据安全：1. 覆盖正常场景（单聊/群聊消息发送、文本/文件/图片/语音类型消息）、异常场景（无权限发送、消息过长、网络中断、重复发送、敏感信息发送）；2. 功能复刻验证：测试消息气泡样式、发送/接收交互逻辑、已读/未读标识、撤回功能是否与钉钉6.5.x完全一致；3. 安全测试场景：消息传输加密验证（抓包测试是否为密文）、消息存储加密验证（数据库查询是否为密文）、数据权限验证（非群成员无法查看群消息）、敏感信息拦截验证（发送违规词是否被拦截）；4. 测试步骤清晰，包含前置条件、操作步骤、预期结果；5. 重点验证交互细节（如已读/未读状态标识、输入状态显示、消息撤回功能、快捷键发送）与钉钉6.5.x的一致性；6. 适配不同角色（普通用户、部门管理员、超级管理员）的权限测试，确保权限管控有效；7. 参考文档“核心模块交互细节规范”，验证所有交互逻辑符合要求；8. 新增安全测试点：异常登录发送消息、未授权终端发送消息、消息重放攻击测试。
> （注：文档部分内容可能由 AI 生成）