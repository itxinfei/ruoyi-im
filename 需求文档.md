# 企业级即时通讯与协同办公系统需求规格说明书

## 文档信息

| 项目 | 内容 |
|------|------|
| 文档版本 | v1.0 |
| 创建日期 | 2025-01-08 |
| 文档状态 | 待评审 |

---

## 一、项目概述

### 1.1 项目背景

随着企业数字化转型的深入，即时通讯与协同办公已成为企业运营的基础设施。为解决企业使用第三方即时通讯工具带来的数据安全隐患，本项目旨在开发一套支持私有化部署的企业级即时通讯与协同办公系统，实现企业数据的全生命周期自主管控。

### 1.2 项目目标

构建基于若依框架的企业级即时通讯与协同办公平台，参考钉钉6.5.x版本的UI设计风格与交互模式，实现以下核心目标：

| 维度 | 目标描述 |
|------|----------|
| 功能完整性 | 覆盖即时通讯（单聊/群聊）、工作台、审批流程、通讯录、应用中心等核心功能模块 |
| 数据安全性 | 支持私有化部署，数据全量存储于企业自有服务器，提供数据脱敏、访问审计等安全能力 |
| 系统扩展性 | 基于若依框架构建，复用其权限管理、用户管理能力，支持企业定制化扩展 |
| 用户体验 | 参考钉钉6.5.x UI设计规范，提供一致性的操作体验 |

### 1.3 技术选型

| 层次 | 技术选型 | 说明 |
|------|----------|------|
| 前端框架 | Vue 3 + Element Plus | 采用组合式API，TypeScript开发 |
| 后端框架 | Spring Boot（基于若依） | 复用若依基础能力 |
| 持久层 | MyBatis | 兼容若依数据访问规范 |
| 数据库 | MySQL 5.7+ | 兼容若依数据库规范 |
| 安全框架 | Apache Shiro | 复用若依权限体系 |

---

## 二、产品定位与核心特性

### 2.1 产品定义

面向中大型企业的私有化即时通讯与协同办公平台，支持本地服务器/私有云部署，提供组织管理、即时通讯、工作台、审批流转、应用聚合等核心能力，实现企业数据全量自主管控。

### 2.2 核心特性

#### 2.2.1 私有化部署
- 支持本地服务器/私有云部署
- 数据全量存储于企业自有服务器
- 支持部署环境隔离（开发/测试/生产）
- 生产环境可关闭外部网络访问

#### 2.2.2 完整IM能力
- 单聊、群聊消息收发
- 消息回执与已读状态
- 文件/图片传输
- 消息撤回/编辑
- 聊天记录查询

#### 2.2.3 灵活组织架构
- 复用若依sys_dept/sys_user实现企业-部门-成员层级管理
- 支持自定义组织架构配置
- 支持组织架构同步与导入

#### 2.2.4 协同办公能力
- 可定制化工作台
- 审批流程引擎
- 应用中心聚合

### 2.3 适用场景

| 场景 | 描述 |
|------|------|
| 数据敏感型企业 | 金融、政府、科研等对数据安全要求高的行业 |
| 内部协同需求 | 需要统一通讯与办公平台的中大型企业 |
| 系统集成需求 | 需要将通讯能力与企业现有系统集成的场景 |

---

## 三、系统架构设计

### 3.1 模块划分

```
┌─────────────────────────────────────────────────────────┐
│                     前端层（Vue3 + Element Plus）         │
├─────────────────────────────────────────────────────────┤
│  IM聊天界面  │  工作台  │  审批中心  │  通讯录  │  应用中心 │
├─────────────────────────────────────────────────────────┤
│                     后端层（Spring Boot）                │
├───────────────┬───────────────┬─────────────────────────┤
│ ruoyi-im-api  │ ruoyi-im-admin│   ruoyi-system         │
│  核心业务API   │  平台管理模块  │   若依系统模块          │
├───────────────┴───────────────┴─────────────────────────┤
│                   ruoyi-common / ruoyi-framework         │
│                    公共基础组件/框架层                    │
├─────────────────────────────────────────────────────────┤
│              数据层（MySQL + Redis + 文件存储）           │
└─────────────────────────────────────────────────────────┘
```

### 3.2 核心模块说明

| 模块 | 定位 | 主要职责 |
|------|------|----------|
| ruoyi-im-api | 核心业务中台 | 提供用户认证、好友关系、消息收发、群组管理、审批流程等核心接口 |
| ruoyi-im-admin | 平台管理模块 | 用户审核、群组管控、消息审计、系统配置等管理功能（仅管理员） |
| ruoyi-im-web | 前端界面模块 | IM聊天界面、工作台等前端页面展示与交互 |

### 3.3 模块间关系

```
前端调用关系：
ruoyi-im-web  -->  ruoyi-im-api  -->  ruoyi-system

管理调用关系：
若依管理后台  -->  ruoyi-im-admin  -->  ruoyi-system

独立关系：
ruoyi-im-admin  ⊥  ruoyi-im-api（无接口调用，数据独立）
```

---

## 四、功能需求说明（完全复刻钉钉PC客户端功能）

> 本章节功能模块完全对应钉钉PC客户端实际功能，确保Web版本功能完整性。

### 4.1 左侧导航栏功能（完全对应钉钉）

钉钉PC客户端左侧导航栏包含以下核心功能入口：

| 序号 | 功能模块 | 钉钉PC端功能说明 | 复刻优先级 |
|------|----------|------------------|------------|
| 1 | **消息** | 单聊、群聊、消息收发、多媒体消息、多端同步 | P0 |
| 2 | **DING** | 重要通知、短信/电话提醒、定时提醒、已读回执 | P0 |
| 3 | **工作台** | 企业办公应用中心、考勤打卡、审批、公告、应用管理 | P0 |
| 4 | **文档** | 在线文档、在线表格、白板、脑图、协作编辑 | P1 |
| 5 | **通讯录** | 企业组织架构、联系人、部门管理 | P0 |
| 6 | **邮箱** | 钉钉邮箱、消息助手提醒 | P2 |
| 7 | **应用中心** | 应用市场、企业定制应用、AI应用 | P1 |

### 4.2 消息模块（复刻钉钉消息功能）

#### 4.2.1 核心功能
| 功能点 | 钉钉功能说明 | 实现要求 |
|--------|--------------|----------|
| 单聊 | 一对一即时通讯 | 支持文本、表情、图片、文件发送，Enter发送，Shift+Enter换行 |
| 群聊 | 多人群组聊天 | 支持创建群组、添加/移除成员、群公告、群文件 |
| 消息类型 | 文字、表情、图片、文件、语音、视频、位置 | 按钉钉标准实现 |
| 消息状态 | 发送中、已发送、已读/未读 | 显示已读状态，未读消息红点提醒 |
| 消息操作 | 撤回（2分钟内）、转发、复制、收藏 | 完全复刻钉钉交互逻辑 |
| 多端同步 | PC端与移动端消息同步 | 基于WebSocket实现实时同步 |
| 消息搜索 | 搜索聊天记录 | 按关键词、时间范围搜索 |

#### 4.2.2 会话列表功能
| 功能点 | 说明 |
|--------|------|
| 最近会话 | 按时间倒序排列，显示最新消息预览 |
| 置顶会话 | 重要会话可置顶，保持在列表顶部 |
| 消息免打扰 | 对单个会话设置免打扰，不显示消息提醒 |
| 会话分组 | 支持按"全部"、"单聊"、"群聊"筛选 |

### 4.3 DING消息模块（复刻钉钉DING功能）

#### 4.3.1 核心功能
| 功能点 | 钉钉功能说明 |
|--------|--------------|
| DING发送 | 支持文字、语音、图片、文件，一键发送给单人或群组 |
| 强提醒方式 | 支持短信提醒、电话提醒（强提醒功能） |
| 定时发送 | 设置定时发送DING，重要事项不遗漏 |
| 已读回执 | 查看DING消息的已读/未读状态 |
| DING模板 | 常用DING模板（会议提醒、工作安排等） |
| 消息额度 | 企业DING消息额度管理 |

### 4.4 工作台模块（复刻钉钉工作台）

#### 4.4.1 核心功能
| 子模块 | 钉钉功能说明 |
|--------|--------------|
| **考勤打卡** | 上班打卡、下班打卡、外勤打卡、打卡记录查看 |
| **审批** | 请假审批、报销审批、出差审批、自定义审批流程 |
| **公告** | 企业公告发布、已读/未读统计、公告附件 |
| **日志** | 工作日志提交、日志查看、日志点评 |
| **日程** | 日程安排、会议邀请、日程提醒 |
| **任务** | 任务分配、任务跟踪、任务统计 |
| **报表** | 数据统计、报表生成、数据导出 |

#### 4.4.2 应用管理
| 功能点 | 说明 |
|--------|------|
| 常用应用 | 设置常用应用快捷入口，一键访问 |
| 应用添加 | 从应用中心添加应用到工作台 |
| 应用排序 | 自定义应用显示顺序 |

### 4.5 文档模块（复刻钉钉文档功能）

#### 4.5.1 核心功能
| 子功能 | 钉钉功能说明 |
|--------|--------------|
| **在线文档** | 富文本文档协作编辑，支持评论、修订 |
| **在线表格** | Excel式表格协作，支持公式、图表 |
| **表单** | 在线表单收集、数据汇总分析 |
| **白板** | 在线白板协作，支持绘图、贴纸 |
| **脑图** | 思维导图，支持多人协作编辑 |
| **AI智能创作** | AI辅助生成文档内容 |

#### 4.5.2 协作功能
| 功能点 | 说明 |
|--------|------|
| 实时协作 | 多人同时编辑，显示光标位置 |
| 协作光标 | 显示协作者头像和名字 |
| 评论@ | 对文档内容评论，@成员通知 |
| 版本历史 | 查看文档历史版本，支持版本对比 |
| 分享设置 | 设置文档查看/编辑权限 |

### 4.6 通讯录模块（复刻钉钉通讯录）

#### 4.6.1 核心功能
| 功能点 | 说明 |
|--------|------|
| **企业组织架构** | 树形展示企业-部门-成员层级结构 |
| **部门管理** | 查看部门成员、部门信息 |
| **成员搜索** | 按姓名、部门、职位搜索成员 |
| **成员详情** | 查看成员头像、职位、联系方式 |
| **添加好友** | 向企业成员发起好友申请 |
| **外部联系人** | 外部联系人管理 |

### 4.7 邮箱模块（复刻钉钉邮箱）

#### 4.7.1 核心功能
| 功能点 | 说明 |
|--------|------|
| 收件箱 | 查看收到的邮件 |
| 发件箱 | 查看已发送的邮件 |
| 写邮件 | 编辑和发送邮件 |
| 邮件附件 | 支持附件上传和下载 |
| 邮件提醒 | 新邮件红点提醒 |

### 4.8 应用中心模块（复刻钉钉应用中心）

#### 4.8.1 应用分类
| 分类 | 说明 |
|------|------|
| **办公协同** | 审批、考勤、日志、会议室等 |
| **人事管理** | 招聘、培训、绩效等 |
| **财务报销** | 费用报销、发票管理等 |
| **客户管理** | CRM、客户关系管理 |
| **数据分析** | 数据报表、BI工具 |
| **AI应用** | AI助手、智能创作等 |

#### 4.8.2 应用管理
| 功能点 | 说明 |
|--------|------|
| 应用安装 | 从应用市场安装应用到企业 |
| 应用配置 | 配置应用参数和权限 |
| 应用使用 | 在工作台或消息中使用应用 |
| 应用卸载 | 移除不需要的应用 |

### 4.9 系统管理模块（复刻若依+扩展）

| 功能点 | 说明 |
|--------|------|
| 用户管理 | 复用若依用户管理，扩展IM相关字段 |
| 角色管理 | 复用若依角色管理，扩展IM权限配置 |
| 菜单管理 | 复用若依菜单管理，管理IM模块菜单 |
| 系统配置 | IM系统参数配置（消息保留时长、文件存储路径等） |
| 数据审计 | 聊天记录审计、敏感操作日志 |

---

## 五、UI设计规范（基于钉钉PC客户端实际界面分析）

> 本规范基于钉钉PC客户端6.5.x版本实际界面分析得出，确保复刻的真实性与一致性。

### 5.1 整体布局结构

#### 5.1.1 布局模式

钉钉PC客户端采用**"四栏式"布局**（针对聊天场景），从左到右依次为：

```
┌─────────────────────────────────────────────────────────────────┐
│ 顶部导航栏 TopBar（高度：48px）                                    │
│ [Logo+搜索] [用户信息] [功能图标] [窗口控制]                        │
├──────┬───────────┬──────────────────────────────────────────────────┤
│左侧栏│ 中间会话区 │ 右侧聊天窗口区 ChatWindow                          │
│Side  │ Session   │                                               │
│Bar   │ List      │                                               │
│68px  │  320px    │ 自适应剩余宽度（flex: 1）                        │
├──────┴───────────┴──────────────────────────────────────────────────┤
│ 消息、DING、工作台、文档、通讯录、邮箱、应用中心                       │
└─────────────────────────────────────────────────────────────────┘
```

#### 5.1.2 布局尺寸规范（以1920×1080为基准）

| 区域 | 宽度 | 高度 | 说明 |
|------|------|------|------|
| 顶部导航栏 | 100% | 48px | 全局顶部，包含搜索、用户信息 |
| 左侧导航栏 | 68px | calc(100vh - 48px) | 核心功能入口，图标式导航 |
| 中间会话区 | 320px | calc(100vh - 48px) | 会话列表，支持滚动 |
| 右侧内容区 | flex: 1 | calc(100vh - 48px) | 聊天窗口/工作台等内容区 |

#### 5.1.3 最小尺寸要求

| 属性 | 数值 | 说明 |
|------|------|------|
| 窗口最小宽度 | 1200px | 低于此宽度出现横向滚动条 |
| 窗口最小高度 | 700px | 低于此高度出现纵向滚动条 |
| 内容区域最小宽度 | 800px | 右侧聊天区最小宽度 |

### 5.2 颜色规范

#### 5.2.1 品牌色系

| 颜色名称 | 颜色值 | 变量名 | 应用场景 |
|----------|--------|--------|----------|
| 品牌色 | #1890FF | --color-primary | 主按钮、链接、选中状态 |
| 品牌色-hover | #40A9FF | --color-primary-hover | 按钮悬停 |
| 品牌色-active | #096DD9 | --color-primary-active | 按钮按下 |
| 品牌色-disabled | #D9D9D9 | --color-primary-disabled | 禁用状态 |
| 品牌色-浅色 | #E6F7FF | --color-primary-light | 选中背景 |

#### 5.2.2 中性色系

| 颜色名称 | 颜色值 | 应用场景 |
|----------|--------|----------|
| 标题色 | #262626 | 一级标题、重要信息 |
| 正文色 | #333333 | 正文内容、消息内容 |
| 次要文字 | #666666 | 副标题、次要信息 |
| 辅助文字 | #999999 | 时间戳、提示信息 |
| 禁用文字 | #CCCCCC | 禁用状态文字 |
| 边框色 | #E8E8E8 | 分割线、边框 |
| 边框色-hover | #D9D9D9 | 边框悬停 |
| 背景色-base | #F5F7FA | 页面整体背景 |
| 背景色-white | #FFFFFF | 卡片、面板背景 |

#### 5.2.3 功能色系

| 颜色名称 | 颜色值 | 背景色 | 应用场景 |
|----------|--------|--------|----------|
| 成功 | #52C41A | #F6FFED | 发送成功、已读状态 |
| 警告 | #FAAD14 | #FFFBE6 | 消息撤回提示 |
| 错误 | #FF4D4F | #FFF1F0 | 发送失败、未读红点 |
| 信息 | #1890FF | #E6F7FF | 系统提示 |
| 在线状态 | #52C41A | - | 用户在线 |
| 离线状态 | #999999 | - | 用户离线 |
| 忙碌状态 | #FAAD14 | - | 用户忙碌 |

#### 5.2.4 消息气泡颜色

| 气泡类型 | 背景色 | 文字色 | 边框 |
|----------|--------|--------|------|
| 发送方（我） | #1890FF | #FFFFFF | - |
| 接收方 | #FFFFFF | #333333 | #E8E8E8 |
| 系统消息 | #F5F7FA | #999999 | - |
| 引用消息 | #F0F2F5 | #666666 | - |

### 5.3 字体规范

#### 5.3.1 字体家族

```css
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
             "Helvetica Neue", Arial, "Noto Sans", sans-serif,
             "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
             "Noto Color Emoji", "钉钉进步体", "微软雅黑", "PingFang SC";
```

#### 5.3.2 字号字重规范

| 级别 | 字号 | 字重 | 行高 | 应用场景 |
|------|------|------|------|----------|
| 特大标题 | 24px | 500 | 32px | 页面主标题 |
| 大标题 | 20px | 500 | 28px | 模块标题 |
| 中标题 | 18px | 500 | 26px | 群组名称、卡片标题 |
| 小标题 | 16px | 500 | 24px | 次级标题 |
| 正文 | 14px | 400 | 22px | 消息内容、表单标签 |
| 辅助文字 | 12px | 400 | 20px | 时间戳、提示信息 |
| 极小文字 | 11px | 400 | 18px | 版权信息、脚注 |

#### 5.3.3 字重定义

| 字重名称 | 数值 | 应用场景 |
|----------|------|----------|
| Regular | 400 | 正文内容 |
| Medium | 500 | 标题、强调文字 |
| Semibold | 600 | 重要强调 |
| Bold | 700 | 特殊强调 |

### 5.4 间距规范

遵循**"4的倍数"原则**，基础间距单位为4px：

| 间距级别 | 变量名 | 数值 | 应用场景 |
|----------|--------|------|----------|
| 极小间距 | --spacing-xs | 4px | 紧密排列的图标 |
| 小间距 | --spacing-sm | 8px | 图标与文字 |
| 基础间距 | --spacing-md | 12px | 列表项内边距（上下） |
| 中间距 | --spacing-lg | 16px | 卡片内边距、元素间距 |
| 大间距 | --spacing-xl | 24px | 区块间距 |
| 超大间距 | --spacing-xxl | 32px | 模块间距 |
| 巨大间距 | --spacing-xxxl | 48px | 页面级间距 |

### 5.5 组件样式规范

#### 5.5.1 按钮组件

**尺寸规范：**

| 按钮尺寸 | 高度 | 水平内边距 | 字号 | 图标间距 |
|----------|------|-----------|------|----------|
| 大按钮 | 40px | 24px | 16px | 8px |
| 默认按钮 | 32px | 16px | 14px | 6px |
| 小按钮 | 24px | 12px | 12px | 4px |

**类型样式：**

| 按钮类型 | 背景色 | 文字色 | 边框 | 圆角 | 阴影 |
|----------|--------|--------|------|------|------|
| 主按钮 | #1890FF | #FFFFFF | - | 4px | - |
| 次要按钮 | #FFFFFF | #1890FF | #1890FF | 4px | - |
| 虚线按钮 | #FFFFFF | #666666 | #D9D9D9(dashed) | 4px | - |
| 文本按钮 | transparent | #1890FF | - | 2px | - |
| 危险按钮 | #FF4D4F | #FFFFFF | - | 4px | - |

**交互状态：**

| 状态 | 背景色变化 | 其他效果 |
|------|-----------|----------|
| hover | 色值加深10% | 鼠标指针变为 pointer |
| active | 色值加深20% | 轻微缩放(0.98) |
| disabled | #F5F5F5背景 | #CCCCCC文字，鼠标not-allowed |
| loading | 主色背景 | 旋转图标 |

#### 5.5.2 头像组件

| 头像类型 | 尺寸 | 形状 | 边框 | 应用场景 |
|----------|------|------|------|----------|
| 超大头像 | 80×80px | 圆形 | 3px solid #FFF | 个人资料页 |
| 大头像 | 64×64px | 圆形 | 2px solid #FFF | 聊天窗口对方信息 |
| 默认头像 | 40×40px | 圆形 | 2px solid #FFF | 会话列表、消息气泡旁 |
| 小头像 | 32×32px | 圆形 | 1px solid #E8E8E8 | 群组成员列表 |
| 迷你头像 | 24×24px | 圆形 | - | @成员提及、消息引用 |

**头像状态标识：**

| 状态 | 样式 | 尺寸 |
|------|------|------|
| 在线 | 右下角绿点 | 10×10px |
| 离线 | 右下角灰点 | 10×10px |
| 忙碌 | 右下角橙点 | 10×10px |

#### 5.5.3 消息气泡组件

**发送方（我）气泡：**

| 属性 | 数值 |
|------|------|
| 背景色 | #1890FF |
| 文字色 | #FFFFFF |
| 圆角 | 右下角2px，其他8px |
| 最大宽度 | 60% |
| 内边距 | 10px 14px |
| 阴影 | 无 |

**接收方气泡：**

| 属性 | 数值 |
|------|------|
| 背景色 | #FFFFFF |
| 文字色 | #333333 |
| 圆角 | 左下角2px，其他8px |
| 边框 | 1px solid #E8E8E8 |
| 最大宽度 | 60% |
| 内边距 | 10px 14px |
| 阴影 | 0 1px 2px rgba(0,0,0,0.03) |

**消息元信息：**

| 属性 | 数值 |
|------|------|
| 发送状态图标 | 16×16px |
| 时间戳字号 | 12px |
| 时间戳颜色 | #999999 |

#### 5.5.4 列表组件（会话列表）

| 属性 | 数值 |
|------|------|
| 列表项高度 | 64px |
| 内边距 | 12px 16px |
| 头像尺寸 | 40×40px |
| 头像与内容间距 | 12px |
| 悬停背景 | #F5F7FA |
| 选中背景 | #E6F7FF |
| 分隔线 | 1px solid #F0F0F0 |
| 未读红点 | 直径8px，背景#FF4D4F |

**列表项信息层级：**

| 信息类型 | 字号 | 颜色 | 最大宽度 |
|----------|------|------|----------|
| 会话名称 | 14px | #333333 | 180px |
| 最新消息 | 13px | #999999 | 180px(单行截断) |
| 时间戳 | 12px | #CCCCCC | - |
| 未读数 | 12px | #FFFFFF | 背景#FF4D4F |

#### 5.5.5 输入框组件

| 属性 | 数值 |
|------|------|
| 最小高度 | 36px |
| 最大高度 | 150px |
| 内边距 | 8px 12px |
| 边框 | 1px solid #E8E8E8 |
| 边框-radius | 4px |
| 聚焦边框 | 1px solid #1890FF |
| 聚焦阴影 | 0 0 0 2px rgba(24,144,255,0.1) |
| 占位文字颜色 | #999999 |
| 字号 | 14px |

#### 5.5.6 卡片组件

| 属性 | 数值 |
|------|------|
| 背景色 | #FFFFFF |
| 边框 | 1px solid #E8E8E8 |
| 圆角 | 8px |
| 内边距 | 16px 20px |
| 阴影-rest | 0 1px 2px rgba(0,0,0,0.03) |
| 阴影-hover | 0 4px 12px rgba(0,0,0,0.08) |
| 阴影-click | 0 2px 6px rgba(0,0,0,0.06) |

### 5.6 导航栏规范

#### 5.6.1 左侧导航栏

| 属性 | 数值 |
|------|------|
| 导航栏宽度 | 68px |
| 导航项尺寸 | 48×48px |
| 图标尺寸 | 24×24px |
| 图标与文字间距 | 4px |
| 默认图标颜色 | #666666 |
| 选中图标颜色 | #1890FF |
| 选中背景色 | #E6F7FF |
| 选中指示器 | 左侧3px宽 #1890FF线条 |
| 提示工具提示 | 12px字号，圆角4px |

#### 5.6.2 顶部导航栏

| 属性 | 数值 |
|------|------|
| 导航栏高度 | 48px |
| 内边距 | 0 24px |
| 背景色 | #FFFFFF |
| 边框底 | 1px solid #E8E8E8 |
| 搜索框宽度 | 280px |
| 搜索框高度 | 32px |

### 5.7 动画与过渡规范

#### 5.7.1 缓动函数

| 缓动类型 | CSS值 | 应用场景 |
|----------|-------|----------|
| 线性 | linear | 进度条、加载动画 |
| 标准缓动 | ease | 一般过渡 |
| 入场缓动 | cubic-bezier(0, 0, 0.2, 1) | 元素进入 |
| 出场缓动 | cubic-bezier(0.4, 0, 1, 1) | 元素离开 |
| 弹性缓动 | cubic-bezier(0.34, 1.56, 0.64, 1) | 弹性效果 |

#### 5.7.2 动画时长

| 时长级别 | 时间 | 应用场景 |
|----------|------|----------|
| 极快 | 100ms | 颜色变化、阴影变化 |
| 快速 | 200ms | 一般状态切换 |
| 标准 | 300ms | 展开收起、页面切换 |
| 较慢 | 500ms | 复杂动画 |

#### 5.7.3 常用动画

| 动画类型 | 时长 | 缓动函数 |
|----------|------|----------|
| 淡入淡出 | 200ms | ease-in-out |
| 滑入滑出 | 300ms | cubic-bezier(0, 0, 0.2, 1) |
| 展开/收起 | 300ms | cubic-bezier(0, 0, 0.2, 1) |
| 消息发送 | 200ms | cubic-bezier(0.34, 1.56, 0.64, 1) |
| 按钮点击 | 100ms | ease-out |

### 5.8 图标规范

#### 5.8.1 图标尺寸

| 尺寸类型 | 数值 | 应用场景 |
|----------|------|----------|
| 极小图标 | 12×12px | 状态标识 |
| 小图标 | 16×16px | 列表操作、消息状态 |
| 默认图标 | 20×20px | 按钮图标、输入框图标 |
| 中图标 | 24×24px | 导航图标、功能入口 |
| 大图标 | 32×32px | 页面功能图标 |
| 超大图标 | 48×48px | 空状态插图 |

#### 5.8.2 图标颜色

| 场景 | 颜色值 |
|------|--------|
| 默认状态 | #666666 |
| 悬停状态 | #333333 |
| 激活状态 | #1890FF |
| 禁用状态 | #CCCCCC |
| 功能色图标 | 使用对应功能色 |

#### 5.8.3 图标库

推荐使用以下图标库：
- **Ant Design Icons** - 钉钉PC端使用的主要图标库
- **自定义图标** - 钉钉特有功能需自定义绘制

### 5.9 响应式设计

#### 5.9.1 断点定义

| 断点名称 | 分辨率 | 布局调整 |
|----------|--------|----------|
| 小屏幕 | < 1366px | 中间会话区收窄至280px |
| 标准屏幕 | 1366px - 1920px | 标准四栏布局 |
| 大屏幕 | > 1920px | 保持比例，内容区最大1800px居中 |

#### 5.9.2 适配策略

| 屏幕类型 | 会话区宽度 | 内容区处理 |
|----------|-----------|-----------|
| 小屏幕 | 280px | 正常显示 |
| 标准屏幕 | 320px | 正常显示 |
| 大屏幕 | 340px | 内容最大1800px居中 |

### 5.10 可访问性规范

#### 5.10.1 键盘导航

| 操作 | 快捷键 |
|------|--------|
| 发送消息 | Enter / Ctrl+Enter（可配置） |
| 换行 | Shift+Enter |
| 搜索会话 | Ctrl+F |
| 新建会话 | Ctrl+N |
| 关闭会话 | Ctrl+W |
| 切换会话 | Ctrl+Tab / Ctrl+Shift+Tab |

#### 5.10.2 焦点管理

| 场景 | 要求 |
|------|------|
| 焦点可见 | 焦点元素显示2px #1890FF轮廓 |
| 焦点顺序 | 符合视觉流，从左到右、从上到下 |
| 模态框焦点 | 打开时焦点移入，关闭时返回触发元素 |
| 焦点陷阱 | 模态框打开时焦点限制在模态框内 |

#### 5.10.3 ARIA标签

| 组件 | ARIA要求 |
|------|----------|
| 按钮 | aria-label 或 button内文字 |
| 输入框 | aria-label 描述用途 |
| 下拉菜单 | role="menu", aria-expanded |
| 对话框 | role="dialog", aria-modal="true" |
| 加载状态 | aria-busy="true" |
| 消息列表 | aria-live="polite" |

### 5.11 暗色模式规范（可选）

#### 5.11.1 暗色系颜色

| 颜色类型 | 暗色值 | 应用场景 |
|----------|--------|----------|
| 背景色-base | #141414 | 页面整体背景 |
| 背景色-elevated | #1F1F1F | 卡片、面板背景 |
| 背景色-component | #2A2A2A | 组件背景 |
| 文字色-primary | #E8E8E8 | 主要文字 |
| 文字色-secondary | #A6A6A6 | 次要文字 |
| 边框色 | #3A3A3A | 分割线、边框 |

---

## 六、数据安全要求

### 6.1 数据存储安全

| 安全项 | 要求 |
|--------|------|
| 数据加密 | 敏感字段（密码、密钥）使用AES-256加密存储 |
| 数据脱敏 | 手机号、邮箱等个人信息按需脱敏展示 |
| 数据备份 | 支持定时备份，备份数据加密存储 |
| 数据保留 | 聊天记录保留期限可配置，到期自动清理 |

### 6.2 访问控制

| 控制项 | 要求 |
|--------|------|
| 身份认证 | 支持用户名/密码登录，集成若依Shiro权限体系 |
| 权限分级 | 支持管理员、普通用户等角色，功能可见性差异化 |
| 操作审计 | 敏感操作记录操作日志（操作人、时间、IP、内容） |
| 会话管理 | 会话超时自动退出，支持强制下线 |

### 6.3 传输安全

| 安全项 | 要求 |
|--------|------|
| 传输加密 | 生产环境强制HTTPS |
| 接口签名 | 敏感接口增加签名校验 |
| 防重放 | 关键操作接口增加时间戳校验 |

---

## 七、非功能性需求

### 7.1 性能指标

| 指标 | 要求 |
|------|------|
| 响应时间 | 页面首屏加载 < 2s |
| 并发支持 | 支持1000+用户同时在线 |
| 消息延迟 | 消息发送延迟 < 500ms |
| 数据库查询 | 列表查询 < 1s |

### 7.2 兼容性要求

| 类型 | 要求 |
|------|------|
| 浏览器 | Chrome 90+、Edge 90+、Firefox 88+ |
| 分辨率 | 最低支持1366×768 |
| 数据库 | MySQL 5.7+、8.0+ |

### 7.3 可维护性要求

| 要求 | 说明 |
|------|------|
| 代码规范 | 遵循《阿里巴巴Java开发手册》《阿里巴巴前端开发手册》 |
| 接口文档 | 使用Swagger生成接口文档 |
| 日志规范 | 日志级别正确，关键操作记录日志 |

---

## 八、项目交付要求

### 8.1 交付清单

| 类别 | 内容 |
|------|------|
| 源代码 | 完整的前后端源代码，包含注释 |
| 数据库脚本 | 建表SQL、初始化数据SQL |
| 部署文档 | 部署步骤说明、配置说明 |
| 接口文档 | Swagger接口文档 |
| 用户手册 | 操作使用说明 |

### 8.2 验收标准

| 模块 | 验收标准 |
|------|----------|
| IM聊天 | 单聊、群聊消息收发正常，文件传输正常 |
| 工作台 | 应用卡片可正常跳转，待办事项正常显示 |
| 审批中心 | 审批流程可正常流转 |
| 通讯录 | 组织架构正常展示，成员搜索正常 |
| 系统管理 | 复用若依功能正常，IM管理功能正常 |

---

## 九、附录

### 9.1 术语说明

| 术语 | 说明 |
|------|------|
| 若依 | 一个基于Spring Boot的权限管理系统快速开发平台 |
| Element Plus | 基于Vue 3的组件库 |
| Shiro | Apache开源安全框架 |
| 私有化部署 | 在企业自有服务器上部署，数据不经过第三方服务器 |

### 9.2 参考文档

- 若依官方文档：http://doc.ruoyi.vip/
- Element Plus文档：https://element-plus.org/
- Vue 3文档：https://cn.vuejs.org/

---

## 变更记录

| 版本 | 日期 | 变更人 | 变更内容 |
|------|------|--------|----------|
| v1.0 | 2025-01-08 | - | 初始版本 |
