# 群组和个人信息组件 - 钉钉PC版6.5.x复刻方案

## 文档信息
- **创建日期**: 2025-01-15
- **目标组件**：
  1. 群组详情对话框（GroupDetailDialog.vue）
  2. 群组详情页面（group/detail.vue）
  3. 个人信息详情对话框（UserDetailDialog.vue）
  4. 联系人详情页面（contacts/detail.vue）
  5. 设置页面个人信息区域（settings/index.vue）

---

## 一、当前组件现状分析

### 1.1 群组详情对话框（GroupDetailDialog.vue）

**位置**：`ruoyi-im-web/src/views/im/conversation-detail/GroupDetailDialog.vue`

**当前功能**：
- ✅ 显示群组头像、名称、成员数量
- ✅ 成员列表显示
- ✅ 成员角色显示（群主/管理员）
- ✅ 成员操作下拉菜单（发消息、查看资料、移出）
- ✅ 内容统计（图片、视频、文件数量）
- ✅ 底部操作按钮（离开/解散群组、清空历史）

**钉钉6.5.x参考**：
- 群组资料弹窗从右上角弹出
- 顶部显示群组头像（100×100px）和名称
- 左侧显示成员列表，支持滚动
- 成员项显示头像、昵称、角色标签
- 底部显示操作按钮（蓝色主按钮 + 灰色次按钮）
- 支持邀请成员、设置群公告、管理群标签

---

### 1.2 群组详情页面（group/detail.vue）

**位置**：`ruoyi-im-web/src/views/im/group/detail.vue`

**当前功能**：
- ✅ 群组资料区域（头像、名称、描述、群主、创建时间）
- ✅ 成员列表区域（分页显示）
- ✅ 成员项显示头像、昵称、角色标签、操作下拉菜单
- ✅ 底部操作按钮（进入群聊、群组设置、邀请成员）

**钉钉6.5.x参考**：
- 三栏布局：左侧群组信息，中间成员列表，右侧聊天预览/操作
- 群组信息卡片，支持编辑群名称、群公告
- 成员列表支持角色筛选（全部/群主/管理员）
- 成员列表支持搜索功能
- 群组操作标签页签切换

---

### 1.3 个人信息详情对话框（UserDetailDialog.vue）

**位置**：`ruoyi-im-web/src/views/im/conversation-detail/UserDetailDialog.vue`

**当前功能**：
- ✅ 用户头像显示（100×100px，在线状态指示器）
- ✅ 用户昵称、用户ID显示
- ✅ 联系方式显示（手机号、邮箱）
- ✅ 详细信息区域（部门、职位、个性签名）
- ✅ 内容统计（媒体、文件、链接数量）
- ✅ 底部操作按钮（发消息、语音通话、视频通话、更多）

**钉钉6.5.x参考**：
- 用户资料弹窗从右下角弹出
- 大头像居中显示，周围有在线状态光圈（在线=绿色，离线=灰色）
- 顶部显示用户名称和ID
- 左侧显示联系方式卡片
- 右侧显示内容统计和快捷操作
- 支持编辑昵称、个性签名、部门职位
- 支持设置手机号、邮箱、添加备注
- 快捷操作包括：发消息、语音通话、视频通话、查看资料

---

### 1.4 联系人详情页面（contacts/detail.vue）

**位置**：`ruoyi-im-web/src/views/im/contacts/detail.vue`

**当前功能**：
- ✅ 联系人头像显示（80×80px，在线状态指示器）
- ✅ 联系人名称、ID显示
- ✅ 在线状态显示
- ✅ 详细信息区域（手机号、邮箱、部门、职位、备注、添加时间）
- ✅ 内容统计区域（媒体、文件、链接数量）
- ✅ 底部操作按钮（发消息、编辑备注、删除联系人）

**钉钉6.5.x参考**：
- 三栏布局：左侧联系人信息，中间聊天预览，右侧操作按钮
- 联系人信息卡片支持编辑昵称、个性签名、部门职位
- 联系人头像带有在线状态指示器（绿色圆点）
- 详细信息分栏显示，支持折叠/展开
- 内容统计使用图标+数字显示
- 支持标签管理（星标收藏、添加标签）
- 右侧操作按钮垂直排列

---

### 1.5 设置页面个人信息区域（settings/index.vue）

**位置**：`ruoyi-im-web/src/views/im/settings/index.vue`

**当前功能（"基本设置"标签页）**：
- ✅ 头像上传组件（圆形预览）
- ✅ 昵称输入框
- ✅ 性别选择（男/女/保密）
- ✅ 手机号输入框
- ✅ 邮箱输入框
- ✅ 个性签名输入框
- ✅ 保存按钮

**钉钉6.5.x参考**：
- 设置页面采用卡片式布局
- 每个设置项独立卡片，带标题和边框
- 头像上传区域带虚线边框和上传按钮
- 输入框使用统一的样式和交互
- 表单验证使用红色边框提示
- 保存按钮采用主要色（#1677ff）

---

## 二、与钉钉PC版6.5.x的差距分析

### 2.1 高优先级差距（P0 - 必须修复）

#### ❌ 差距1：个人资料弹窗布局不完整

**问题描述**：
当前 `UserDetailDialog.vue` 使用简单布局，缺少钉钉的以下特性：

1. **左侧联系方式卡片缺失**
   - 当前：只显示基本信息（手机号、邮箱）
   - 钉钉要求：独立的联系方式卡片，带图标、支持编辑、添加新联系方式

2. **内容统计样式不统一**
   - 当前：简单的文字+数字统计
   - 钉钉要求：卡片式布局，每个统计项带图标+标题+描述

3. **快捷操作布局不完整**
   - 当前：横向排列的按钮
   - 钉钉要求：右侧独立操作栏，按钮采用不同颜色和大小

4. **在线状态显示不够明显**
   - 当前：头像周围的小圆点
   - 钉钉要求：大头像周围的光圈动画效果

**影响**：用户体验与钉钉差距大

**修复优先级**：P0

---

#### ❌ 差距2：群组详情页面布局不够清晰

**问题描述**：
当前 `group/detail.vue` 使用简单三栏布局，缺少钉钉的以下特性：

1. **群组信息卡片样式简单**
   - 当前：基础的信息展示
   - 钉钉要求：带阴影、圆角、悬停效果的现代化卡片

2. **成员列表交互不完整**
   - 当前：只显示成员列表
   - 钉钉要求：支持批量操作、角色筛选、搜索功能

3. **聊天预览区域缺失**
   - 当前：成员列表区域过于简单
   - 钉钉要求：右侧显示聊天预览窗口，展示最近的聊天记录

4. **页签切换功能缺失**
   - 当前：只显示成员列表
   - 钉钉要求：支持"成员"/"公告"/"文件"/"图片"等多个标签页签

**影响**：群组管理功能不够完善

**修复优先级**：P0

---

#### ❌ 差距3：联系人详情页面布局不够专业

**问题描述**：
当前 `contacts/detail.vue` 使用简单三栏布局，缺少钉钉的以下特性：

1. **操作按钮布局不专业**
   - 当前：简单的按钮排列
   - 钉钉要求：右侧独立操作栏，大按钮+小按钮+分隔线

2. **内容统计区域样式不统一**
   - 当前：简单的文字统计
   - 钉钉要求：卡片式统计面板，每个统计类型有独立卡片

3. **标签管理功能缺失**
   - 当前：只显示基本标签（星标收藏）
   - 钉钉要求：支持标签分类、标签颜色、添加自定义标签

4. **备注编辑功能缺失**
   - 当前：只显示备注文本
   - 钉钉要求：支持行内编辑备注、保存按钮

**影响**：联系人管理体验不够完善

**修复优先级**：P0

---

#### ❌ 差距4：设置页面个人信息区域样式简单

**问题描述**：
当前 `settings/index.vue` 的"基本设置"标签页使用简单表单布局，缺少钉钉的以下特性：

1. **头像上传体验不够好**
   - 当前：基础的文件上传
   - 钉钉要求：圆形裁剪预览、多图上传、拖拽上传

2. **表单验证提示不明显**
   - 当前：红色边框提示
   - 钉钉要求：浮动提示消息、图标+动画效果

3. **设置项布局不够现代化**
   - 当前：简单的表单排列
   - 钉钉要求：每个设置项独立卡片，带图标、描述、悬停效果

4. **个人信息编辑状态反馈不明显**
   - 当前：无编辑状态指示
   - 钉钉要求：编辑时字段高亮、保存按钮提示"已修改"

**影响**：设置体验不够友好

**修复优先级**：P0

---

## 三、复刻方案设计

### 3.1 个人资料弹窗复刻方案

#### 目标
将 `UserDetailDialog.vue` 从简单弹窗升级为钉钉6.5.x风格的现代化个人信息资料卡。

#### 布局设计

```
┌─────────────────────────────────────────────────┐
│  ┌─────────┐   ┌────────────────┐   ┌───────────────────┐  │
│  │          │   │   用户信息      │   │     │
│  │  头像     │   │   │   ┌──────────┐  │   │
│  │  ┌──────┐  │   │   │ 头像     │   操作栏     │   │   │
│  │  │      │   │   │   │ 100×100px │   │   │   │   │
│  │ 头像    │   │   │   │           │   │   │   │   │
│  │ 80×80px  │   │   │   └──────────┘  │   │   │   │
│  │          │   │   │           │   │   │   │   │   │   │
│  │          │   │   │   └──────────┘  │   │   │   │   │   │
│  │          │   │   │           │   │   │   │   │   │   │
│  ├──────────┴   ┴──────────────────┤   │   │   │   │   │
│          │   │   │   │   │   │   │   │   │
│          │   │   │   │   │   │   │   │   │
│          │   │   │   │   │   │   │   │   │
│          │   │   │   │   │   │   │   │   │
│  联系方式卡片        │   操作按钮   │   快捷操作     │   │
│          │   ┌──────┐  │   ┌─────────┐  │   │   │   │   │   │
│  │  │ 手机   │   │   │   发消息  │   │   语音  │   │   │
│  │  ├──────┤  │   │   │   │   视频   │   │   │   │
│  │  邮箱   │   │   └─────────┤  │   │   更多   │   │   │
│  │  └──────┘  │   │   │   │   │   │   │   │
│          │   │   │   │   │   │   │   │   │   │
│          │   │   │   │   │   │   │   │   │
│  │  内容统计          │   │   │   │   │   │
│  │  ┌──────────┐  │   │   │   │   │   │
│  │  媒体  │   文件  │   链接  │   │   │
│  │  ├──────┤  │   │   │   │   │   │   │
│  │  │   │   │   │   │   │   │
│  └──────────┘  │   │   │   │   │   │
│          │   │   │   │   │   │   │   │   │
└────────────────────┴───────────────────────────┴───────────────────┴──────────────┘
```

#### 样式设计要点

##### 1. 头像区域
```scss
.user-profile-avatar-section {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px;
  
  .avatar-container {
    position: relative;
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 2px solid var(--dt-border-base);
    
    // 在线状态光圈动画
    .online-indicator {
      position: absolute;
      bottom: -2px;
      right: -2px;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--dt-success);
      animation: dtPulse 2s ease-in-out infinite;
    }
    
    .avatar-image {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
    }
  }
  
  .user-name {
    font-size: 18px;
    font-weight: var(--dt-font-weight-semibold);
    color: var(--dt-text-primary);
    margin-top: 12px;
  }
  
  .user-id {
    font-size: 12px;
    color: var(--dt-text-tertiary);
    margin-top: 4px;
  }
}

@keyframes dtPulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}
```

##### 2. 联系方式卡片
```scss
.contact-info-cards {
  display: flex;
  gap: 16px;
  
  .contact-card {
    flex: 1;
    background: var(--dt-bg-white);
    border: 1px solid var(--dt-border-base);
    border-radius: var(--dt-radius-base);
    padding: 20px;
    min-width: 240px;
    box-shadow: var(--dt-shadow-sm);
    transition: all var(--dt-transition-fast);
    
    &:hover {
      border-color: var(--dt-primary);
      box-shadow: var(--dt-shadow-md);
    }
  }
  
  .contact-card-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
    
    .card-icon {
      width: 24px;
      height: 24px;
      color: var(--dt-text-tertiary);
    }
    
    .card-title {
      font-size: 14px;
      font-weight: var(--dt-font-weight-medium);
      color: var(--dt-text-primary);
    }
  }
  
  .contact-card-body {
    display: flex;
    align-items: center;
    gap: 12px;
    
    .icon-wrapper {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--dt-bg-light);
      border-radius: var(--dt-radius-base);
      
      .el-icon {
        font-size: 16px;
        color: var(--dt-text-secondary);
      }
    }
    
    .info-value {
      font-size: 14px;
      color: var(--dt-text-primary);
    }
  }
  
  .contact-card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 16px;
    
    .edit-btn {
      padding: 6px 12px;
      border: 1px solid var(--dt-border-base);
      border-radius: var(--dt-radius-sm);
      background: transparent;
      color: var(--dt-text-secondary);
      cursor: pointer;
      transition: all var(--dt-transition-fast);
      
      &:hover {
        background: var(--dt-bg-hover);
        color: var(--dt-primary);
      }
    }
  }
}
```

##### 3. 内容统计区域
```scss
.content-stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
  margin-top: 24px;
  
  .stat-card {
    background: var(--dt-bg-white);
    border: 1px solid var(--dt-border-base);
    border-radius: var(--dt-radius-base);
    padding: 20px;
    text-align: center;
    transition: all var(--dt-transition-fast);
    
    &:hover {
      border-color: var(--dt-primary);
      box-shadow: var(--dt-shadow-sm);
      transform: translateY(-2px);
    }
  }
  
  .stat-icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 12px;
    
    .el-icon {
      font-size: 20px;
      color: var(--dt-text-secondary);
    }
  }
  
  .stat-count {
    font-size: 28px;
    font-weight: var(--dt-font-weight-bold);
    color: var(--dt-primary);
  }
  
  .stat-label {
    font-size: 13px;
    color: var(--dt-text-secondary);
    margin-top: 4px;
  }
}
```

##### 4. 操作区域
```scss
.action-bar {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 24px;
  background: var(--dt-bg-light);
  border-radius: var(--dt-radius-base);
  
  .primary-actions {
    display: flex;
    gap: 8px;
    
    .action-btn {
      flex: 1;
      align-items: center;
      justify-content: center;
      padding: 12px 24px;
      background: var(--dt-primary);
      color: var(--dt-bg-white);
      border: none;
      border-radius: var(--dt-radius-base);
      font-size: 14px;
      font-weight: var(--dt-font-weight-medium);
      cursor: pointer;
      transition: all var(--dt-transition-fast);
      min-width: 120px;
      
      &:hover {
        background: var(--dt-primary-hover);
        box-shadow: var(--dt-shadow-sm);
        transform: translateY(-2px);
      }
      
      .el-icon {
        font-size: 18px;
        margin-right: 8px;
      }
    }
  }
  
  .secondary-actions {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    
    .action-btn {
      align-items: center;
      justify-content: center;
      padding: 10px;
      background: transparent;
      border: 1px solid var(--dt-border-base);
      border-radius: var(--dt-radius-sm);
      color: var(--dt-text-secondary);
      cursor: pointer;
      transition: all var(--dt-transition-fast);
      font-size: 13px;
      
      &:hover {
        background: var(--dt-bg-hover);
        color: var(--dt-primary);
        border-color: var(--dt-primary);
      }
      
      .el-icon {
        font-size: 14px;
        margin-right: 6px;
      }
    }
  }
}
```

---

### 3.2 群组详情页面复刻方案

#### 目标
将 `group/detail.vue` 从简单三栏布局升级为钉钉6.5.x风格的现代化群组管理页面。

#### 布局设计

```
┌─────────────────────────────────────────────────┐
│  ┌──────────────────┐   ┌──────────────┐   ┌──────────────┐  │
│  │  群组信息      │   │  成员管理     │   │   聊天预览      │   │
│  │               │   │   │               │   │   │
│  │ ┌──────────┐  │   │   └──────────┐   │   │
│  │  │      │   │   │   ┌──────┐  │   │   │
│  │ 头像   │   │   │   │  成员列表  │   │   │   │
│  │ 120×120px  │   │   │   │  └──────┤  │   │   │
│  │  名称   │   │   │   │  │   │   │   │   │   │
│  │ 60×60px  │   │   │   │   │   │   │   │   │
│  │  群公告   │   │   │   │   │   │   │   │   │
│  │ ───────┤  │   │   │   │   │   │   │   │
│  │          │   │   │   │   │   │   │   │   │
│  ├──────────┴   ┴──────────────────┤   ┴──────────────┤   │
│          │   │   │   │               │   │   │   │
│          │   │   │   │   │   │   │   │
│          │   │   │   │   │   │   │   │   │
│          │   │   │   │   │   │   │   │
│  标签页签 [成员][公告][文件]   │
│  ──────────────────────────────────────────┤   │
│          │   │   │   │   │   │   │
└────────────────────┴───────────────────────────┴───────────────────┴──────────────┘
```

#### 样式设计要点

##### 1. 群组信息卡片
```scss
.group-info-card {
  background: var(--dt-bg-white);
  border: 1px solid var(--dt-border-base);
  border-radius: var(--dt-radius-lg);
  padding: 24px;
  box-shadow: var(--dt-shadow-md);
  margin-bottom: 16px;
  
  .card-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding-bottom: 20px;
    border-bottom: 1px solid var(--dt-border-light);
    
    .group-avatar-wrapper {
      position: relative;
      
      .group-avatar {
        width: 80px;
        height: 80px;
        border-radius: var(--dt-radius-base);
        border: 2px solid var(--dt-bg-white);
        box-shadow: var(--dt-shadow-sm);
        transition: all var(--dt-transition-fast);
        
        &:hover {
          transform: scale(1.02);
          box-shadow: var(--dt-shadow-md);
        }
      }
    }
  }
  
  .group-basic-info {
    flex: 2;
    gap: 16px;
    
    .group-name {
      flex: 1;
      
      .group-title {
        font-size: 18px;
        font-weight: var(--dt-font-weight-semibold);
        color: var(--dt-text-primary);
      }
      
      .group-id {
        font-size: 12px;
        color: var(--dt-text-tertiary);
        margin-left: 8px;
      }
    }
  }
}
```

##### 2. 成员列表标签页签切换
```scss
.member-tabs-wrapper {
  display: flex;
  gap: 8px;
  margin-bottom: 24px;
  
  .member-tab {
    flex: 1;
    padding: 8px 16px;
    background: transparent;
    border: none;
    border-radius: var(--dt-radius-base);
    color: var(--dt-text-secondary);
    cursor: pointer;
    transition: all var(--dt-transition-fast);
    font-size: 14px;
    
    &:hover {
      color: var(--dt-text-primary);
      background: rgba(22, 119, 255, 0.05);
    }
    
    &.active {
      color: var(--dt-primary);
      background: var(--dt-bg-white);
      border: 1px solid var(--dt-primary);
    }
  }
  
  .tab-indicator {
    width: 24px;
    height: 3px;
    background: var(--dt-primary);
    border-radius: 3px;
  }
}
```

##### 3. 成员列表
```scss
.member-list-container {
  flex: 1;
  overflow: hidden;
  background: var(--dt-bg-light);
  border-radius: var(--dt-radius-lg);
  border: 1px solid var(--dt-border-base);
  
  .member-list {
    overflow-y: auto;
    padding: 8px;
    
    .member-item {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      border-bottom: 1px solid var(--dt-border-light);
      transition: all var(--dt-transition-fast);
      
      &:hover {
        background: var(--dt-bg-hover);
      }
      
      .member-avatar {
        width: 40px;
        height: 40px;
        flex-shrink: 0;
        
        .el-avatar {
          width: 100%;
          height: 100%;
        }
      }
      
      .member-info {
        flex: 1;
        min-width: 0;
        
        .member-name {
          font-size: 14px;
          font-weight: var(--dt-font-weight-medium);
          color: var(--dt-text-primary);
        }
        
        .member-role {
          padding: 2px 8px;
          border-radius: var(--dt-radius-sm);
          font-size: 11px;
          color: var(--dt-bg-white);
          background: var(--dt-text-secondary);
          
          .role-owner {
            background: var(--dt-warning);
          }
          
          .role-admin {
            background: var(--dt-primary);
          }
          
          .role-member {
            background: var(--dt-info);
          }
        }
      }
      
      .member-actions {
        margin-left: auto;
        
        .action-dropdown {
          .action-btn {
            padding: 6px 12px;
            border: 1px solid var(--dt-border-base);
            border-radius: var(--dt-radius-sm);
            background: transparent;
            color: var(--dt-text-secondary);
            cursor: pointer;
            transition: all var(--dt-transition-fast);
            font-size: 13px;
            
            &:hover {
              background: var(--dt-bg-hover);
              border-color: var(--dt-primary);
            }
          }
        }
      }
    }
  }
  
  .member-search {
    padding: 12px 16px;
    border-bottom: 1px solid var(--dt-border-light);
  }
}
```

---

### 3.3 联系人详情页面复刻方案

#### 目标
将 `contacts/detail.vue` 从简单三栏布局升级为钉钉6.5.x风格的现代化联系人详情页面。

#### 布局设计

```
┌─────────────────────────────────────────────────┐
│  ┌──────────────────┐   ┌──────────────┐   ┌──────────────┐  │
│  │  联系人信息    │   │   操作按钮栏   │   │   │
│  │               │   │   │               │   │
│  │ ┌──────────┐  │   │   └──────────┐   │   │
│  │ 头像   │   │   │   聊天预览   │   │   │
│  │ 80×80px  │   │   │   │   │   │   │
│  │ 在线   │   │   │   │   │   │   │
│  │ ───────┤  │   │   │   │   │   │
│  │          │   │   │   │   │   │   │
│  ├──────────┴   ┴──────────────────┤   ┴──────────────┤   │   │
│  联系方式卡片    │   快捷操作      │   │
│          │   │   │   │   │   │   │
│  │ ┌──────┐  │   │   │   │   │   │
│  │ 手机  │   │   │   │   │   │   │
│  │ ├──────┤  │   │   │   │   │   │
│  │ 邮箱   │   │   │   │   │   │
│  │          │   │   │   │   │   │
│  │          │   │   │   │   │   │
│  │          │   │   │   │   │
│  │          │   │   │   │   │
│  └──────────┘  │   └──────────┘  │   │
│  ──────────────────────────────────────────┤   │   │
│  内容统计区域          │   │   │
│  │          │   │   │   │   │
│  ┌──────────┐  │   │   │   │   │
│  │ 媒体  │   文件  │   链接  │   │
│  │ ├──────┤  │   │   │   │   │
│  │      │   │   │   │   │   │
│  └──────────┘  │   │   │   │
└────────────────────┴───────────────────────────┴───────────────────┴──────────────┘
```

#### 样式设计要点

##### 1. 在线状态光圈
```scss
.online-status-ring {
  position: absolute;
  bottom: -2px;
  right: -2px;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: var(--dt-success);
  animation: dtPulse 2s ease-in-out infinite;
  opacity: 0.9;
}
```

##### 2. 操作按钮栏
```scss
.action-sidebar {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 24px;
  background: var(--dt-bg-light);
  border-left: 1px solid var(--dt-border-light);
  
  .action-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 20px;
    background: var(--dt-bg-white);
    border: 1px solid var(--dt-border-base);
    border-radius: var(--dt-radius-base);
    color: var(--dt-text-secondary);
    cursor: pointer;
    transition: all var(--dt-transition-fast);
    font-size: 14px;
    width: 100%;
    
    &:hover {
      background: var(--dt-primary);
      color: var(--dt-bg-white);
      border-color: var(--dt-primary);
      transform: translateY(-2px);
      box-shadow: var(--dt-shadow-sm);
    }
    
    .el-icon {
      font-size: 18px;
    margin-right: 8px;
    }
  }
}
```

---

### 3.4 设置页面个人信息区域复刻方案

#### 目标
将 `settings/index.vue` 的"基本设置"标签页升级为钉钉6.5.x风格的现代化设置页面。

#### 布局设计

```
┌─────────────────────────────────────────────────┐
│  ┌──────────────────┐   ┌──────────────┐   ┌──────────────┐  │
│  │  设置导航     │   │   头像上传   │   │   个人资料卡片   │
│  │               │   │   │               │   │
│  │ ┌──────────┐  │   │   └──────────┐   │   │
│  │ 基础     │   │   │   保存按钮   │   │   │
│  ├──────┤   │   │   │               │   │
│  │ 账号     │   │   │   联系方式     │   │   │
│  │ ├──────┤  │   │   └──────────┐   │   │
│  │ 安全     │   │   │   验证状态     │   │
│  │ └──────────┤   │   │   └──────────┐   │   │
│  │ 隐私     │   │   │   媒体     │   │   │
│  │ └──────────┤   │   │   │   │   │
│  ───────────┤  │   │   └──────────┤   ┴──────────────┤   │
└────────────────────┴───────────────────────────┴───────────────────┴──────────────┘
```

#### 样式设计要点

##### 1. 头像上传区域
```scss
.avatar-upload-card {
  background: var(--dt-bg-white);
  border: 1px solid var(--dt-border-base);
  border-radius: var(--dt-radius-base);
  padding: 32px;
  text-align: center;
  box-shadow: var(--dt-shadow-sm);
  
  .upload-area {
    width: 200px;
    height: 200px;
    border: 2px dashed var(--dt-border-base);
    border-radius: var(--dt-radius-base);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all var(--dt-transition-fast);
    position: relative;
    overflow: hidden;
    
    &:hover {
      border-color: var(--dt-primary);
      background: rgba(22, 119, 255, 0.03);
    }
    
    .upload-icon {
      font-size: 48px;
      color: var(--dt-text-tertiary);
    }
    
    .upload-text {
      font-size: 13px;
      color: var(--dt-text-secondary);
    }
  }
  
  .avatar-preview {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    
    .preview-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  }
}
```

##### 2. 表单验证提示
```scss
.form-validation-message {
  position: fixed;
  top: 12px;
  left: 50%;
  transform: translateX(-50%);
  padding: 12px 20px;
  background: rgba(0, 0, 0, 0.9);
  border-radius: var(--dt-radius-base);
  box-shadow: var(--dt-shadow-lg);
  z-index: 2000;
  display: flex;
    align-items: center;
    gap: 12px;
    animation: dtSlideDown 0.3s ease-out;
    
    .validation-icon {
      font-size: 24px;
      color: var(--dt-warning);
    }
    
    .validation-text {
      font-size: 14px;
      color: var(--dt-bg-white);
      font-weight: var(--dt-font-weight-medium);
    }
}

@keyframes dtSlideDown {
  from {
    transform: translateX(-50%) translateY(-10px);
    opacity: 0;
  }
  to {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
  }
  20%, 80% {
    opacity: 0.9;
  }
}
```

---

## 四、实施步骤

### 4.1 第一阶段：核心组件重构（本周完成）

#### 步骤1：重构 UserDetailDialog.vue（2小时）
- [ ] 创建新的组件结构，实现钉钉6.5.x布局
- [ ] 添加头像在线状态光圈动画
- [ ] 优化联系方式卡片样式
- [ ] 优化内容统计区域样式
- [ ] 优化操作按钮栏布局

#### 步骤2：重构 group/detail.vue（3小时）
- [ ] 创建标签页签切换组件
- [ ] 优化群组信息卡片样式
- [ ] 添加聊天预览区域
- [ ] 优化成员列表交互

#### 步骤3：重构 contacts/detail.vue（2小时）
- [ ] 优化在线状态显示
- [ ] 优化操作按钮栏布局
- [ ] 优化内容统计区域
- [ ] 添加标签管理功能

#### 步骤4：重构 settings/index.vue个人信息区域（2小时）
- [ ] 优化头像上传体验
- [ ] 添加表单验证提示动画
- [ ] 优化设置项卡片样式

### 4.2 第二阶段：功能增强（2周完成）

#### 步骤5：添加高级功能
- [ ] UserDetailDialog 支持编辑昵称、个性签名
- [ ] group/detail 支持搜索成员、批量操作
- [ ] contacts/detail 支持备注编辑、标签管理
- [ ] settings/index 支持批量编辑联系人信息

#### 步骤6：测试与优化（3天完成）
- [ ] 视觉回归测试
- [ ] 交互测试
- [ ] 响应式测试
- [ ] 性能测试

### 4.3 第三阶段：文档完善（1个月完成）

- [ ] 创建组件开发文档
- [ ] 创建样式指南文档
- [ ] 创建验收标准文档
- [ ] 创建迁移指南文档

---

## 五、技术实现要点

### 5.1 使用统一主题变量

所有新组件必须使用 `dingtalk-theme-enhanced.scss` 中定义的统一变量：

```vue
<style scoped lang="scss">
@import '@/styles/dingtalk-theme-enhanced.scss';

.user-profile-avatar-section {
  .avatar-container {
    // 使用统一变量
    border: 2px solid var(--dt-border-base);
  }
  
  .online-indicator {
    background: var(--dt-success);
  }
}
</style>
```

### 5.2 响应式设计原则

所有新组件必须支持钉钉6.5.x的响应式设计：

```scss
// 移动端适配
@media (max-width: 768px) {
  .user-profile-avatar-section {
    padding: 24px;
    
    .avatar-container {
      width: 80px;
      height: 80px;
    }
  }
  
  .contact-info-cards {
    flex-direction: column;
    gap: 12px;
  }
  
  .action-sidebar {
    padding: 16px;
  }
}

// 平板适配
@media (min-width: 769px) and (max-width: 1024px) {
  .group-info-card {
    .card-header {
      .group-avatar-wrapper {
        .group-avatar {
          width: 100px;
          height: 100px;
        }
      }
    }
  }
}
```

### 5.3 动画和过渡效果

所有新组件必须实现流畅的动画效果：

```scss
// 入场动画
@keyframes dtFadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// 悬停效果
.component-card {
  transition: all var(--dt-transition-fast);
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: var(--dt-shadow-md);
  }
}

// 按钮点击效果
.action-btn {
  transition: all var(--dt-transition-fast);
  
  &:active {
    transform: scale(0.95);
  }
}
```

### 5.4 无障碍设计

所有新组件必须考虑无障碍访问：

```vue
<!-- 添加键盘导航 -->
<div
  class="user-profile-avatar-section"
  tabindex="0"
  @keydown="handleKeyboardNavigation"
  role="region"
  aria-label="用户资料"
>
  <button
    class="action-btn"
    aria-label="发送消息"
    title="发送消息 (Ctrl+Enter)"
  >
    <el-icon><ChatDotRound /></el-icon>
  </button>
</div>
```

---

## 六、验收标准

### 6.1 视觉一致性

- ✅ 所有颜色符合钉钉6.5.x规范
- ✅ 所有间距符合钉钉8px/12px/16px系统
- ✅ 所有圆角符合钉钉4px/6px/8px系统
- ✅ 所有阴影符合钉钉规范
- ✅ 所有过渡动画流畅（0.3s）
- ✅ 所有hover效果一致

### 6.2 功能完整性

- ✅ 个人资料弹窗功能完整
- ✅ 群组详情页面功能完整
- ✅ 联系人详情页面功能完整
- ✅ 设置页面个人信息区域功能完整
- ✅ 所有快捷操作正常工作
- ✅ 所有表单验证正常工作

### 6.3 用户体验

- ✅ 操作反馈及时
- ✅ 加载状态清晰
- ✅ 错误提示友好
- ✅ 成功提示明显
- ✅ 编辑状态明确

### 6.4 响应式支持

- ✅ 移动端适配（60px导航栏）
- ✅ 平板适配
- ✅ 桌面适配
- ✅ 字体大小自适应

### 6.5 性能标准

- ✅ 首屏加载 < 2秒
- ✅ 页面切换流畅
- ✅ 列表滚动 > 60fps
- ✅ 动画性能良好

---

## 七、风险评估

### 7.1 技术风险

**风险1：重构工作量较大**
- 概率：中
- 影响：可能超出预期时间
- 缓解措施：分阶段交付、优先完成核心功能

**风险2：样式冲突**
- 概率：低
- 影响：新样式可能影响现有组件
- 缓解措施：使用scoped样式、充分测试

### 7.2 进度风险

**风险1：时间估算不准**
- 概率：中
- 影响：实际完成时间可能超过计划
- 缓解措施：每日评估进度、及时调整

**风险2：资源不足**
- 概率：低
- 影响：可能影响开发进度
- 缓解措施：优先完成P0级组件、P1级功能延后

---

## 八、总结

### 8.1 核心目标

将以下组件完美复刻钉钉PC版6.5.x：
1. **UserDetailDialog.vue** - 个人资料弹窗
2. **group/detail.vue** - 群组详情页面
3. **contacts/detail.vue** - 联系人详情页面
4. **settings/index.vue个人信息区域** - 设置页面个人信息区域

### 8.2 成功标准

项目达到以下标准视为成功：

- ✅ 所有组件布局符合钉钉6.5.x三栏/两栏设计
- ✅ 所有样式使用统一的 `--dt-*` 主题变量
- ✅ 所有动画流畅且符合钉钉规范
- ✅ 所有交互反馈及时且明显
- ✅ 所有功能完整实现（头像、内容统计、操作按钮、标签页签等）
- ✅ 所有快捷操作正常工作
- ✅ 响应式适配完善
- ✅ 性能达到钉钉标准

### 8.3 下一步行动

建议您按以下优先级开始实施：

**立即开始**（本周）：
1. 选择一个组件开始重构（建议从 UserDetailDialog.vue 开始）
2. 按照本文档的布局设计和样式要点实施
3. 充分测试每个组件的响应式和交互
4. 验收符合钉钉6.5.x规范

**预期完成时间**：本周内完成第一阶段核心组件重构

---

**文档版本**: v1.0
**最后更新**: 2025-01-15
**负责人**: 前端开发团队
