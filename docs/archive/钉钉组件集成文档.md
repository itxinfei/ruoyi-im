# é’‰é’‰é£æ ¼ç»„ä»¶é›†æˆæ–‡æ¡£

## æ–‡æ¡£ä¿¡æ¯
- **åˆ›å»ºæ—¥æœŸ**: 2025-01-15
- **ç›®æ ‡ç‰ˆæœ¬**: é’‰é’‰PCç‰ˆ 6.5.x
- **çŠ¶æ€**: ç¬¬ä¸€é˜¶æ®µå®Œæˆï¼Œç­‰å¾…ç¬¬äºŒé˜¶æ®µ

---

## ä¸€ã€æ–°å¢æ ·å¼æ–‡ä»¶è¯´æ˜

### 1.1 æ–‡ä»¶åˆ—è¡¨

å·²åˆ›å»ºä»¥ä¸‹æ–°çš„æ ·å¼æ–‡ä»¶æ¥æ”¯æŒé’‰é’‰6.5.xé£æ ¼ï¼š

| æ–‡ä»¶å | è·¯å¾„ | è¯´æ˜ |
|--------|------|------|
| `dingtalk-theme-enhanced.scss` | `src/styles/dingtalk-theme-enhanced.scss` | ç»Ÿä¸€ä¸»é¢˜å˜é‡ + Element Plusè¦†ç›– |
| `dingtalk-message-enhanced.scss` | `src/styles/dingtalk-message-enhanced.scss` | æ¶ˆæ¯æ°”æ³¡å®Œæ•´æ ·å¼ |
| `dingtalk-input-enhanced.scss` | `src/styles/dingtalk-input-enhanced.scss` | è¾“å…¥æ¡†å·¥å…·æ å®Œæ•´æ ·å¼ |
| `dingtalk-session-enhanced.scss` | `src/styles/dingtalk-session-enhanced.scss` | ä¼šè¯åˆ—è¡¨å®Œæ•´æ ·å¼ |

### 1.2 æ–‡ä»¶ä¼˜å…ˆçº§

1. **dingtalk-theme-enhanced.scss** â­â­â­
   - æœ€é‡è¦ï¼Œæ‰€æœ‰å…¶ä»–æ ·å¼æ–‡ä»¶çš„åŸºç¡€
   - å¿…é¡»å…ˆå¼•å…¥ï¼Œç¡®ä¿æ‰€æœ‰ç»„ä»¶ä½¿ç”¨ç»Ÿä¸€å˜é‡

2. **dingtalk-message-enhanced.scss** â­â­
   - èŠå¤©ç•Œé¢æ ¸å¿ƒæ ·å¼
   - å½±å“ç”¨æˆ·ä½“éªŒæœ€ç›´æ¥

3. **dingtalk-session-enhanced.scss** â­â­
   - ä¼šè¯åˆ—è¡¨æ ·å¼
   - å½±å“å¯¼èˆªå’Œæ¶ˆæ¯æŸ¥æ‰¾

4. **dingtalk-input-enhanced.scss** â­
   - è¾“å…¥æ¡†å·¥å…·æ 
   - å½±å“æ¶ˆæ¯å‘é€åŠŸèƒ½

---

## äºŒã€å¦‚ä½•åœ¨ç»„ä»¶ä¸­ä½¿ç”¨æ–°æ ·å¼

### 2.1 å¼•å…¥æ–°æ ·å¼æ–‡ä»¶

#### æ–¹å¼1ï¼šå…¨å±€å¼•å…¥ï¼ˆæ¨èï¼‰

åœ¨ `main.js` ä¸­å…¨å±€å¼•å…¥æ–°åˆ›å»ºçš„æ ·å¼æ–‡ä»¶ï¼š

```javascript
import '@/styles/dingtalk-theme-enhanced.scss'
import '@/styles/dingtalk-message-enhanced.scss'
import '@/styles/dingtalk-input-enhanced.scss'
import '@/styles/dingtalk-session-enhanced.scss'
```

**ä¼˜ç‚¹**ï¼š
- âœ… æ‰€æœ‰ç»„ä»¶è‡ªåŠ¨ä½¿ç”¨ç»Ÿä¸€æ ·å¼
- âœ… æš—è‰²ä¸»é¢˜åˆ‡æ¢æ—¶è‡ªåŠ¨æ›´æ–°
- âœ… å‡å°‘é‡å¤ä»£ç 

**ç¼ºç‚¹**ï¼š
- âš ï¸ æ‰“åŒ…ä½“ç§¯å¢åŠ ï¼ˆåŒ…å«æ‰€æœ‰æ ·å¼ï¼‰
- âš ï¸ æŸäº›ç»„ä»¶å¯èƒ½è¢«ä¸ç›¸å…³çš„æ ·å¼è¦†ç›–

#### æ–¹å¼2ï¼šæŒ‰éœ€å¼•å…¥ï¼ˆä¼˜åŒ–æ€§èƒ½ï¼‰

åœ¨éœ€è¦ä½¿ç”¨ç‰¹å®šæ ·å¼çš„ç»„ä»¶ä¸­å•ç‹¬å¼•å…¥ï¼š

```vue
<template>
  <div class="im-message-container">
    <!-- æ¶ˆæ¯å†…å®¹ -->
  </div>
</template>

<style scoped lang="scss">
@import '@/styles/dingtalk-message-enhanced.scss';

.im-message-container {
  // å¯ä»¥é‡å†™æˆ–è¡¥å……æ ·å¼
}
</style>
```

**ä¼˜ç‚¹**ï¼š
- âœ… å‡å°‘æ‰“åŒ…ä½“ç§¯
- âœ… æ ·å¼éš”ç¦»ï¼Œé¿å…æ±¡æŸ“
- âœ… æ›´å®¹æ˜“ç»´æŠ¤

**ç¼ºç‚¹**ï¼š
- âš ï¸ éœ€è¦åœ¨æ¯ä¸ªä½¿ç”¨æ ·å¼çš„ç»„ä»¶ä¸­å•ç‹¬å¼•å…¥
- âš ï¸ å®¹æ˜“é—æ¼å¼•å…¥

### 2.2 ä½¿ç”¨ç»Ÿä¸€å˜é‡

æ‰€æœ‰æ–°æ ·å¼æ–‡ä»¶éƒ½ä½¿ç”¨ `--dt-*` CSSå˜é‡ï¼ˆDingTalkï¼‰å’Œ `$dt-*` SCSSå˜é‡ï¼š

```vue
<template>
  <div class="message-bubble">
    <!-- è‡ªåŠ¨ä½¿ç”¨ --dt-primary, --dt-text-primary ç­‰å˜é‡ -->
  </div>
</template>
```

#### å¯ç”¨å˜é‡åˆ—è¡¨

```scss
// é¢œè‰²
--dt-primary: #1677ff;              // ä¸»è‰²
--dt-primary-hover: #4096ff;
--dt-primary-active: #0958d9;
--dt-text-primary: #262626;
--dt-text-secondary: #595959;
--dt-bg-white: #ffffff;
--dt-bg-base: #f0f2f5;
--dt-bg-hover: #f5f7fa;

// é—´è·
--dt-spacing-xs: 4px;
--dt-spacing-sm: 8px;
--dt-spacing-md: 12px;
--dt-spacing-lg: 16px;

// åœ†è§’
--dt-radius-base: 6px;
--dt-radius-lg: 8px;

// é˜´å½±
--dt-shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
--dt-shadow-base: 0 1px 3px 0 rgba(0, 0, 0, 0.1);

// è¿‡æ¸¡
--dt-transition-fast: 0.15s;
--dt-ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
```

---

## ä¸‰ã€ç»„ä»¶è¿ç§»æ­¥éª¤

### 3.1 æ¶ˆæ¯ç»„ä»¶è¿ç§»

#### å½“å‰ç»„ä»¶ï¼š`ImChatLayoutOptimized.vue`

**é—®é¢˜**ï¼š
å½“å‰æ¶ˆæ¯æ°”æ³¡æ ·å¼åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ï¼š
- `dingtalk-message.scss` - åŸºç¡€æ¶ˆæ¯æ°”æ³¡æ ·å¼
- `ImChatLayoutOptimized.vue` å†…è”æ ·å¼

**è¿ç§»æ–¹æ¡ˆ**ï¼š

##### æ­¥éª¤1ï¼šæ›¿æ¢æ¶ˆæ¯æ°”æ³¡æ ·å¼ç±»å

```vue
<!-- ä¿®æ”¹å‰ -->
<div class="message-bubble">

<!-- ä¿®æ”¹å -->
<div class="dt-message-bubble">
```

##### æ­¥éª¤2ï¼šå¼•ç”¨æ–°çš„æ ·å¼æ–‡ä»¶

```vue
<style scoped lang="scss">
@import '@/styles/dingtalk-message-enhanced.scss';

.message-content {
  .text-message {
    .text-content {
      // ä½¿ç”¨æ–°çš„å˜é‡å’Œæ ·å¼
    }
  }
}
</style>
```

##### æ­¥éª¤3ï¼šåˆ é™¤å†…è”æ ·å¼

åˆ é™¤ `ImChatLayoutOptimized.vue` ä¸­ä¸ `message-bubble` ç›¸å…³çš„å†…è”æ ·å¼å®šä¹‰ã€‚

#### éªŒæ”¶æ ‡å‡†

- [ ] æ‰€æœ‰æ¶ˆæ¯æ°”æ³¡ä½¿ç”¨ `.dt-message-bubble` ç±»å
- [ ] æœ€å¤§å®½åº¦é™åˆ¶ä¸º 60%
- [ ] å¼•ç”¨æ¶ˆæ¯æœ‰æ˜æ˜¾çš„è§†è§‰åˆ†éš”
- [ ] è¡¨æƒ…å°ºå¯¸ç¬¦åˆé’‰é’‰è§„èŒƒï¼ˆ24px/32pxï¼‰
- [ ] @æåŠã€#è¯é¢˜æ ·å¼æ­£ç¡®

### 3.2 è¾“å…¥æ¡†ç»„ä»¶è¿ç§»

#### å½“å‰ç»„ä»¶ï¼š`ImChatLayoutOptimized.vue` ç¬¬563-714è¡Œ

**é—®é¢˜**ï¼š
- å·¥å…·æ æ ·å¼åˆ†æ•£
- ç¼ºå°‘"æ›´å¤š"èœå•åŠŸèƒ½
- ç¼ºå°‘å¿«æ·é”®æç¤º

**è¿ç§»æ–¹æ¡ˆ**ï¼š

##### æ­¥éª¤1ï¼šä½¿ç”¨æ–°æ ·å¼ç±»å

```vue
<!-- ä¿®æ”¹å‰ -->
<div class="input-toolbar">
  <el-button :icon="ChatDotRound" />
  <el-button :icon="Folder" />
</div>

<!-- ä¿®æ”¹å -->
<div class="dt-input-toolbar">
  <button class="dt-toolbar-btn toolbar-btn">
    <el-icon :size="16"><component :is="ChatDotRound" /></el-icon>
  </button>
  <button class="dt-toolbar-btn toolbar-btn">
    <el-icon :size="16"><component :is="Folder" /></el-icon>
  </button>
</div>
```

##### æ­¥éª¤2ï¼šæ·»åŠ "æ›´å¤š"ä¸‹æ‹‰èœå•

```vue
<template>
  <div class="dt-input-toolbar">
    <!-- å·¦ä¾§å·¥å…·æŒ‰é’® -->
    <div class="toolbar-left">
      <el-tooltip content="è¡¨æƒ…">
        <button class="dt-toolbar-btn">
          <el-icon><component :is="EmojiOutlined" /></el-icon>
        </button>
      </el-tooltip>
      <!-- ... å…¶ä»–å·¥å…·æŒ‰é’® -->
    </div>

    <!-- å³ä¾§å¿«æ·é”®æç¤º -->
    <div class="dt-shortcut-hint">
      <span class="hint-text">æŒ‰</span>
      <span class="hint-key">
        <span class="kbd-key">Shift</span>
        <span class="kbd-plus">+</span>
        <span class="kbd-key">Enter</span>
      </span>
      <span class="hint-text">æ¢è¡Œ</span>
    </div>

    <!-- æ›´å¤šä¸‹æ‹‰èœå• -->
    <el-dropdown trigger="click" placement="top-end">
      <button class="dt-toolbar-btn">
        <el-icon><MoreFilled /></el-icon>
      </button>
      <template #dropdown>
        <el-dropdown-menu class="dt-more-dropdown-menu">
          <el-dropdown-item command="screenshot">
            <div class="menu-icon"><Camera /></div>
            æˆªå›¾
            <span class="shortcut">Ctrl+Alt+S</span>
          </el-dropdown-item>
          <el-dropdown-item command="favorites">
            <div class="menu-icon"><StarFilled /></div>
            æ”¶è—è¡¨æƒ…
            <span class="shortcut">Ctrl+E</span>
          </el-dropdown-item>
          <el-dropdown-item divided command="quick-reply">
            <div class="menu-icon"><ChatDotRound /></div>
            å¿«é€Ÿå›å¤
          </el-dropdown-item>
          <el-dropdown-item divided command="mention-all">
            <div class="menu-icon"><Promotion /></div>
            @æ‰€æœ‰äºº
            <span class="shortcut">@</span>
          </el-dropdown-item>
        </el-dropdown-menu>
      </template>
    </el-dropdown>
  </div>
</template>

<style scoped lang="scss">
@import '@/styles/dingtalk-input-enhanced.scss';

// è¿™é‡Œå¯ä»¥é‡å†™æˆ–è¡¥å……æ ·å¼
</style>
```

##### æ­¥éª¤3ï¼šå¼•å…¥æ–°æ ·å¼æ–‡ä»¶

```vue
<style scoped lang="scss">
@import '@/styles/dingtalk-input-enhanced.scss';

.dt-input-toolbar {
  // å¯ä»¥é‡å†™æˆ–è¡¥å……æ ·å¼
}
</style>
```

#### éªŒæ”¶æ ‡å‡†

- [ ] è¾“å…¥æ¡†å·¥å…·æ ä½¿ç”¨ `.dt-input-toolbar` ç±»å
- [ ] å·¥å…·æŒ‰é’®hoveræ•ˆæœç¬¦åˆé’‰é’‰è§„èŒƒ
- [ ] "æ›´å¤š"èœå•åŒ…å«æ‰€æœ‰åŠŸèƒ½ï¼ˆæˆªå›¾ã€æ”¶è—ã€å¿«é€Ÿå›å¤ã€@æ‰€æœ‰äººï¼‰
- [ ] å¿«æ·é”®æç¤ºæ­£ç¡®æ˜¾ç¤ºï¼ˆShift+Enteræ¢è¡Œï¼‰
- [ ] å·¥å…·æ ä¸è¾“å…¥æ¡†ä¹‹é—´æœ‰è§†è§‰åˆ†éš”

### 3.3 ä¼šè¯åˆ—è¡¨ç»„ä»¶è¿ç§»

#### å½“å‰ç»„ä»¶ï¼š`ImChatLayoutOptimized.vue` ç¬¬245-936è¡Œ

**é—®é¢˜**ï¼š
- ç¼ºå°‘ä¼šè¯åˆ†ç»„åŠŸèƒ½
- ç¼ºå°‘ä¼šè¯æœç´¢åŠŸèƒ½
- ç¼ºå°‘ç½®é¡¶ä¼šè¯è§†è§‰åŒºåˆ†

**è¿ç§»æ–¹æ¡ˆ**ï¼š

##### æ­¥éª¤1ï¼šé‡æ„ä¼šè¯åˆ—è¡¨ç»“æ„

```vue
<!-- ä¿®æ”¹å‰ -->
<div class="session-list">
  <div
    v-for="session in filteredSessions"
    :key="session.id"
    class="session-item"
  >
    <!-- ä¼šè¯å†…å®¹ -->
  </div>
</div>

<!-- ä¿®æ”¹å -->
<div class="dt-session-list">
  <!-- ç½®é¡¶ä¼šè¯åˆ†ç»„ -->
  <div v-if="pinnedSessions.length > 0" class="dt-session-group pinned">
    <div class="dt-group-header">
      <el-icon><StarFilled /></el-icon>
      <span>ç½®é¡¶</span>
    </div>
    <div
      v-for="session in pinnedSessions"
      :key="session.id"
      class="dt-session-item pinned"
    >
      <!-- ä¼šè¯å†…å®¹ -->
    </div>
  </div>

  <!-- @æåŠä¼šè¯åˆ†ç»„ -->
  <div v-if="mentionedSessions.length > 0" class="dt-session-group mentioned">
    <div class="dt-group-header">
      <el-icon><Promotion /></el-icon>
      <span>@æåŠ ({{ mentionedCount }})</span>
    </div>
    <div
      v-for="session in mentionedSessions"
      :key="session.id"
      class="dt-session-item mentioned"
    >
      <!-- ä¼šè¯å†…å®¹ -->
    </div>
  </div>

  <!-- æœªè¯»ä¼šè¯åˆ†ç»„ -->
  <div v-if="unreadSessions.length > 0" class="dt-session-group unread">
    <div class="dt-group-header">
      <el-icon><WarningFilled /></el-icon>
      <span>æœªè¯» ({{ unreadCount }})</span>
    </div>
    <div
      v-for="session in unreadSessions"
      :key="session.id"
      class="dt-session-item unread"
    >
      <!-- ä¼šè¯å†…å®¹ -->
    </div>
  </div>

  <!-- æ™®é€šä¼šè¯ -->
  <div v-if="otherSessions.length > 0">
    <div
      v-for="session in otherSessions"
      :key="session.id"
      class="dt-session-item"
    >
      <!-- ä¼šè¯å†…å®¹ -->
    </div>
  </div>

  <!-- ä¼šè¯æœç´¢æ¡† -->
  <div class="dt-session-search">
    <el-input
      v-model="searchKeyword"
      placeholder="æœç´¢ä¼šè¯..."
      :prefix-icon="Search"
      class="dt-search-input"
      clearable
    >
    </div>
</div>
```

##### æ­¥éª¤2ï¼šæ·»åŠ ä¼šè¯æœç´¢åŠŸèƒ½

åœ¨ `ImChatLayoutOptimized.vue` çš„ script éƒ¨åˆ†æ·»åŠ æœç´¢é€»è¾‘ï¼š

```javascript
const searchKeyword = ref('')
const filteredSessions = computed(() => {
  if (!searchKeyword.value) {
    return sessions.value
  }
  
  const keyword = searchKeyword.value.toLowerCase()
  return sessions.value.filter(session => {
    return session.name.toLowerCase().includes(keyword) ||
           session.lastMessage?.toLowerCase().includes(keyword)
  })
})
```

##### æ­¥éª¤3ï¼šå®ç°ä¼šè¯åˆ†ç»„é€»è¾‘

```javascript
const groupedSessions = computed(() => {
  return {
    pinned: sessions.value.filter(s => s.isPinned),
    mentioned: sessions.value.filter(s => s.isMentioned),
    unread: sessions.value.filter(s => s.unreadCount > 0),
    other: sessions.value.filter(s => !s.isPinned && !s.isMentioned && s.unreadCount === 0)
  }
})
```

##### æ­¥éª¤4ï¼šå¼•å…¥æ–°æ ·å¼æ–‡ä»¶

```vue
<style scoped lang="scss">
@import '@/styles/dingtalk-session-enhanced.scss';

.dt-session-list {
  // å¯ä»¥é‡å†™æˆ–è¡¥å……æ ·å¼
}
</style>
```

#### éªŒæ”¶æ ‡å‡†

- [ ] ä¼šè¯åˆ—è¡¨ä½¿ç”¨ `.dt-session-list` ç±»å
- [ ] ä¼šè¯æ­£ç¡®åˆ†ç»„ï¼ˆç½®é¡¶ã€@æåŠã€æœªè¯»ã€æ™®é€šï¼‰
- [ ] ç½®é¡¶ä¼šè¯æœ‰æ˜æ˜¾çš„è§†è§‰åŒºåˆ†ï¼ˆğŸ“Œå›¾æ ‡ + èƒŒæ™¯è‰²ï¼‰
- [ ] ä¼šè¯æœç´¢åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æœç´¢æ¡†æœ‰æ­£ç¡®çš„æ ·å¼

---

## å››ã€å®Œæ•´è¿ç§»ç¤ºä¾‹

### 4.1 æ¶ˆæ¯æ°”æ³¡ç»„ä»¶å®Œæ•´ç¤ºä¾‹

```vue
<template>
  <div class="message-list">
    <div
      v-for="msg in messages"
      :key="msg.id || msg.clientMsgId"
      :data-message-id="msg.id"
      :class="['message-item', msg.isOwn ? 'isOwn' : '']"
    >
      <!-- å‘é€æ–¹æ¶ˆæ¯ -->
      <template v-if="!msg.isOwn">
        <div class="dt-message-avatar">
          <el-avatar
            :src="msg.avatar"
            :size="40"
          />
        </div>
        
        <div class="dt-message-content">
          <div class="dt-message-header">
            <div class="dt-sender-name">{{ msg.senderName }}</div>
            <div class="dt-message-time">{{ formatTime(msg.timestamp) }}</div>
          </div>
          
          <div class="dt-message-bubble-wrapper">
            <!-- å¼•ç”¨å›å¤ -->
            <QuoteMessage
              v-if="msg.replyTo"
              :sender-name="msg.replyTo.senderName"
              :content="msg.replyTo.content"
              :message-id="msg.replyTo.id"
              @click-quote="scrollToMessage"
            />
            
            <!-- æ–‡æœ¬æ¶ˆæ¯ -->
            <div
              v-if="msg.type === 'text' || !msg.type"
              class="dt-message-bubble-wrapper"
            >
              <span v-html="formatMessageContent(msg.content)"></span>
            </div>
          </div>
        </div>
        
        <div class="dt-message-status-icons">
          <!-- å‘é€æ—¶é—´ã€å·²è¯»çŠ¶æ€ç­‰ -->
        </div>
      </div>
      
      <!-- æ¥æ”¶æ–¹æ¶ˆæ¯ï¼ˆå‘é€æ–¹ï¼‰ -->
      <template v-else>
        <!-- ç±»ä¼¼ç»“æ„ï¼Œä½¿ç”¨ dt-message-bubble-wrapper -->
      </template>
    </div>
  </div>
</template>

<style scoped lang="scss">
@import '@/styles/dingtalk-message-enhanced.scss';

.message-item {
  // å¯ä»¥é‡å†™æˆ–è¡¥å……æ ·å¼
}
</style>
```

### 4.2 è¾“å…¥æ¡†ç»„ä»¶å®Œæ•´ç¤ºä¾‹

```vue
<template>
  <div class="dt-chat-input-area">
    <!-- è¾“å…¥æ¡†å·¥å…·æ  -->
    <div class="dt-input-toolbar">
      <!-- å·¦ä¾§å·¥å…·æŒ‰é’® -->
      <div class="dt-toolbar-left">
        <el-tooltip content="è¡¨æƒ…" placement="top">
          <button class="dt-toolbar-btn">
            <el-icon><component :is="EmojiOutlined" /></el-icon>
          </button>
        </el-tooltip>
        
        <el-tooltip content="å›¾ç‰‡" placement="top">
          <button class="dt-toolbar-btn">
            <el-icon><component :is="PictureFilled" /></el-icon>
          </button>
        </el-tooltip>
        
        <el-tooltip content="æ–‡ä»¶" placement="top">
          <button class="dt-toolbar-btn">
            <el-icon><component :is="Folder" /></el-icon>
          </button>
        </el-tooltip>
        
        <el-tooltip content="è¯­éŸ³" placement="top">
          <button class="dt-toolbar-btn">
            <el-icon><component :is="Microphone" /></el-icon>
          </button>
        </el-tooltip>
      </div>
      
      <!-- å¿«æ·é”®æç¤º -->
      <div class="dt-shortcut-hint">
        <span class="hint-text">æŒ‰</span>
        <span class="hint-key">
          <span class="kbd-key">Shift</span>
          <span class="kbd-plus">+</span>
          <span class="kbd-key">Enter</span>
        </span>
        <span class="hint-text">æ¢è¡Œ</span>
      </div>
      
      <!-- æ›´å¤šä¸‹æ‹‰èœå• -->
      <el-dropdown trigger="click" placement="top-end">
        <button class="dt-toolbar-btn">
          <el-icon><MoreFilled /></el-icon>
        </button>
        <template #dropdown>
          <el-dropdown-menu class="dt-more-dropdown-menu">
            <el-dropdown-item command="screenshot">
              <div class="dt-menu-icon"><Camera /></div>
              æˆªå›¾
              <span class="dt-shortcut">Ctrl+Alt+S</span>
            </el-dropdown-item>
            <el-dropdown-item command="favorites">
              <div class="dt-menu-icon"><StarFilled /></div>
              æ”¶è—è¡¨æƒ…
              <span class="dt-shortcut">Ctrl+E</span>
            </el-dropdown-item>
            <el-dropdown-item divided command="quick-reply">
              <div class="dt-menu-icon"><ChatDotRound /></div>
              å¿«é€Ÿå›å¤
            </el-dropdown-item>
            <el-dropdown-item divided command="mention-all">
              <div class="dt-menu-icon"><Promotion /></div>
              @æ‰€æœ‰äºº
              <span class="dt-shortcut">@</span>
            </el-dropdown-item>
          </el-dropdown-menu>
        </template>
      </el-dropdown>
    </div>
    
    <!-- è§†è§‰åˆ†éš”çº¿ -->
    <div class="dt-toolbar-divider"></div>
    
    <!-- è¾“å…¥æ¡† -->
    <el-input
      ref="inputRef"
      v-model="inputMessage"
      type="textarea"
      :rows="3"
      placeholder="è¾“å…¥æ¶ˆæ¯... @æåŠã€Enterå‘é€ã€Ctrl+Enteræ¢è¡Œ"
      class="dt-chat-input"
      @keydown="handleInputKeydown"
      @input="handleInputChange"
    />
  </div>
</template>

<script setup>
import { ref } from 'vue'

const inputMessage = ref('')
const inputRef = ref(null)

const handleInputKeydown = (e) => {
  if (e.key === 'Enter' && !e.shiftKey) {
    sendMessage()
  } else if (e.key === 'Enter' && e.shiftKey) {
    // æ¢è¡Œï¼Œä¸å‘é€
  }
}

const sendMessage = () => {
  // å‘é€æ¶ˆæ¯é€»è¾‘
}
</script>

<style scoped lang="scss">
@import '@/styles/dingtalk-input-enhanced.scss';

.dt-chat-input-area {
  // å¯ä»¥é‡å†™æˆ–è¡¥å……æ ·å¼
}
</style>
```

---

## äº”ã€è¿ç§»ä¼˜å…ˆçº§å»ºè®®

### 5.1 ç«‹å³è¿ç§»ï¼ˆæœ¬å‘¨ï¼‰P0çº§

| ç»„ä»¶ | ä¼˜å…ˆçº§ | é¢„è®¡æ—¶é—´ | é£é™© |
|------|--------|----------|------|
| æ¶ˆæ¯æ°”æ³¡ | P0 | 2å°æ—¶ | ä½ |
| è¾“å…¥æ¡†å·¥å…·æ  | P0 | 3å°æ—¶ | ä½ |
| ä¼šè¯åˆ—è¡¨ | P0 | 4å°æ—¶ | ä¸­ |

### 5.2 è¿‘æœŸè¿ç§»ï¼ˆ2å‘¨å†…ï¼‰P1çº§

| ç»„ä»¶ | ä¼˜å…ˆçº§ | é¢„è®¡æ—¶é—´ | é£é™© |
|------|--------|----------|------|
| é€šè®¯å½•A-Zç´¢å¼• | P1 | 1å¤© | ä½ |
| å·¥ä½œå°åº”ç”¨å¡ç‰‡ | P1 | 1.5å¤© | ä½ |

### 5.3 é•¿æœŸä¼˜åŒ–ï¼ˆ1ä¸ªæœˆå†…ï¼‰P2çº§

| ç»„ä»¶ | ä¼˜å…ˆçº§ | é¢„è®¡æ—¶é—´ | é£é™© |
|------|--------|----------|------|
| å…¨å±€Loadingç»„ä»¶ | P2 | 3å¤© | ä½ |
| ç©ºçŠ¶æ€ç»„ä»¶ | P2 | 3å¤© | ä½ |

---

## å…­ã€æ³¨æ„äº‹é¡¹

### 6.1 æ ·å¼å†²çªè§£å†³

**é—®é¢˜**ï¼šæ–°æ—§æ ·å¼å¯èƒ½äº§ç”Ÿå†²çª

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨ `!important` è¦†ç›– Element Plus é»˜è®¤æ ·å¼ï¼ˆå·²åœ¨ `dingtalk-theme-enhanced.scss` ä¸­å®ç°ï¼‰
2. ç»„ä»¶ä½¿ç”¨ `scoped` æ ·å¼ï¼Œé¿å…å…¨å±€æ±¡æŸ“
3. ä½¿ç”¨ CSS è‡ªå®šä¹‰å±æ€§ï¼ˆ`--dt-*` å˜é‡ï¼‰è€Œä¸æ˜¯ç¡¬ç¼–ç é¢œè‰²å€¼

### 6.2 æ€§èƒ½ä¼˜åŒ–

**å»ºè®®**ï¼š
1. æŒ‰éœ€å¼•å…¥æ ·å¼æ–‡ä»¶ï¼Œå‡å°‘æ‰“åŒ…ä½“ç§¯
2. ä½¿ç”¨ CSS å˜é‡è€Œé SCSS å˜é‡ï¼ˆè¿è¡Œæ—¶ï¼‰
3. é¿å…é‡å¤å®šä¹‰ç›¸åŒçš„æ ·å¼

### 6.3 æµ‹è¯•è¦æ±‚

**æµ‹è¯•æ¸…å•**ï¼š
- [ ] é¢œè‰²å¯¹æ¯”é’‰é’‰6.5.xè§„èŒƒ
- [ ] é—´è·å¯¹æ¯”é’‰é’‰è§„èŒƒï¼ˆ8px/12px/16pxï¼‰
- [ ] åœ†è§’å¯¹æ¯”é’‰é’‰è§„èŒƒï¼ˆ4px/6px/8pxï¼‰
- [ ] é˜´å½±å¯¹æ¯”é’‰é’‰è§„èŒƒ
- [ ] æ‚¬åœæ•ˆæœæµ‹è¯•
- [ ] è¿‡æ¸¡åŠ¨ç”»æµ‹è¯•
- [ ] å“åº”å¼æµ‹è¯•ï¼ˆç§»åŠ¨ç«¯ã€å¹³æ¿ï¼‰

---

## ä¸ƒã€æ€»ç»“

### 7.1 ç¬¬ä¸€é˜¶æ®µæˆæœ

âœ… **å·²åˆ›å»º4ä¸ªæ–°æ ·å¼æ–‡ä»¶**ï¼š
1. `dingtalk-theme-enhanced.scss` - ç»Ÿä¸€ä¸»é¢˜å˜é‡ + Element Plusè¦†ç›–
2. `dingtalk-message-enhanced.scss` - æ¶ˆæ¯æ°”æ³¡å®Œæ•´æ ·å¼
3. `dingtalk-input-enhanced.scss` - è¾“å…¥æ¡†å·¥å…·æ å®Œæ•´æ ·å¼
4. `dingtalk-session-enhanced.scss` - ä¼šè¯åˆ—è¡¨å®Œæ•´æ ·å¼

âœ… **å®Œæ•´çš„è¿ç§»æ–‡æ¡£**ï¼š
- å¦‚ä½•å¼•å…¥æ–°æ ·å¼æ–‡ä»¶
- å¦‚ä½•åœ¨ç»„ä»¶ä¸­ä½¿ç”¨æ–°æ ·å¼
- å®Œæ•´çš„ä»£ç ç¤ºä¾‹
- è¿ç§»ä¼˜å…ˆçº§å»ºè®®

### 7.2 ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**ç«‹å³å¼€å§‹è¿ç§»å·¥ä½œ**ï¼š
1. é€‰æ‹©ä¸€ä¸ªç»„ä»¶å¼€å§‹è¿ç§»ï¼ˆå»ºè®®ä»æ¶ˆæ¯æ°”æ³¡å¼€å§‹ï¼‰
2. æŒ‰ç…§è¿ç§»æ­¥éª¤é€æ­¥ä¿®æ”¹ç»„ä»¶
3. æµ‹è¯•æ¯ä¸ªä¿®æ”¹åçš„ç»„ä»¶
4. éªŒæ”¶ç¬¦åˆé’‰é’‰6.5.xè§„èŒƒ

**é¢„æœŸå®Œæˆæ—¶é—´**ï¼šæœ¬å‘¨å†…å®Œæˆæ‰€æœ‰P0çº§ç»„ä»¶è¿ç§»

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-01-15
**è´Ÿè´£äºº**: å‰ç«¯å¼€å‘å›¢é˜Ÿ
