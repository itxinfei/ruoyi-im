/**
 * 钉钉6.5.x风格样式主入口
 * DingTalk 6.5.x Style Main Entry
 *
 * 使用方法：
 * 1. 在 main.js 中导入：import '@/styles/dingtalk-index.scss'
 * 2. 或在组件中单独导入需要的样式文件
 */

/* ============ 导入顺序很重要 ============ */

/* 1. 钉钉主题变量和混合宏 */
@import './dingtalk-theme.scss';

/* 2. IM主题变量 (覆盖钉钉主题变量以保持兼容) */
@import './im-theme.scss';

/* 3. 钉钉导航样式 */
@import './dingtalk-navigation.scss';

/* 4. 钉钉消息样式 */
@import './dingtalk-message.scss';

/* 5. 钉钉组件样式 */
@import './dingtalk-components.scss';

/* 6. 钉钉聊天输入框样式 */
@import './dingtalk-chat-input.scss';

/* 7. 钉钉表情选择器样式 */
@import './dingtalk-emoji.scss';

/* 8. 钉钉通讯录样式 */
@import './dingtalk-contacts.scss';

/* 9. 钉钉通知样式 */
@import './dingtalk-notification.scss';

/* 10. 钉钉模态框样式 */
@import './dingtalk-modal.scss';

/* 11. 钉钉工具类样式 */
@import './dingtalk-utils.scss';

/* ============ 全局样式覆盖 ============ */

/* 确保使用钉钉颜色变量 */
body {
  background: var(--im-bg-base);
  color: var(--im-text-primary);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB',
    'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* 链接样式 */
a {
  color: var(--im-primary-color);
  text-decoration: none;
  transition: color 0.2s ease;

  &:hover {
    color: var(--im-primary-hover);
  }

  &:active {
    color: var(--im-primary-active);
  }
}

/* Element Plus 组件样式覆盖 (钉钉风格) */
.el-button {
  // 基础按钮样式
  border-radius: 6px;
  font-weight: 500;
  transition: all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);

  &.el-button--primary {
    background: linear-gradient(135deg, #1677ff 0%, #40a9ff 100%);
    border: none;
    box-shadow: 0 2px 8px rgba(22, 119, 255, 0.3);

    &:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(22, 119, 255, 0.4);
    }

    &:active {
      transform: translateY(0);
    }
  }

  &.el-button--default {
    border-color: #d9d9d9;
    color: #262626;

    &:hover {
      color: #1677ff;
      border-color: #1677ff;
      background: #f0f9ff;
    }
  }

  &.el-button--text {
    color: #595959;

    &:hover {
      color: #1677ff;
      background: rgba(22, 119, 255, 0.1);
    }
  }

  /* 圆形按钮 */
  &.is-circle {
    border-radius: 50%;

    &:hover {
      background: #f5f7fa;
      transform: scale(1.05);
    }

    &:active {
      transform: scale(0.95);
    }
  }

  // 图标按钮
  &:is(.is-icon) {
    padding: 8px;

    &:hover {
      background: #f5f7fa;
    }
  }
}

/* 输入框样式 */
.el-input {
  .el-input__wrapper {
    border-radius: 6px;
    border: 1px solid #d9d9d9;
    box-shadow: none;
    transition: all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);

    &:hover {
      border-color: #1677ff;
    }

    &.is-focus {
      border-color: #1677ff;
      box-shadow: 0 0 0 2px rgba(22, 119, 255, 0.1);
    }
  }

  .el-input__inner {
    &::placeholder {
      color: #bfbfbf;
    }
  }
}

.el-textarea {
  .el-textarea__inner {
    border-radius: 6px;
    border: 1px solid #d9d9d9;
    transition: all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);

    &:hover {
      border-color: #1677ff;
    }

    &:focus {
      border-color: #1677ff;
      box-shadow: 0 0 0 2px rgba(22, 119, 255, 0.1);
      outline: none;
    }

    &::placeholder {
      color: #bfbfbf;
    }
  }
}

/* 徽章样式 */
.el-badge {
  .el-badge__content {
    background: linear-gradient(135deg, #ff4d4f 0%, #ff7875 100%);
    border: none;
    font-weight: 500;
    box-shadow: 0 2px 6px rgba(255, 77, 79, 0.3);
  }

  .el-badge__content.is-fixed {
    transform: translateX(50%);
  }
}

/* 头像样式 */
.el-avatar {
  border-radius: 8px;
  background: linear-gradient(135deg, #1677ff 0%, #0958d9 100%);
  border: 2px solid transparent;
  transition: all 0.2s ease;

  &:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(22, 119, 255, 0.3);
  }
}

/* 下拉菜单样式 */
.el-dropdown-menu {
  border-radius: 8px;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  border: 1px solid #d9d9d9;
  padding: 4px 0;

  .el-dropdown-menu__item {
    border-radius: 4px;
    margin: 0 8px;
    padding: 8px 12px;
    color: #262626;
    transition: all 0.2s ease;

    &:hover {
      background: #f5f7fa;
      color: #1677ff;
      transform: translateX(2px);
    }

    &.is-divided {
      position: relative;
      border-top: 1px solid #f0f0f0;
    }
  }
}

/* 对话框样式 */
.el-dialog {
  border-radius: 12px;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

  .el-dialog__header {
    border-bottom: 1px solid #f0f0f0;
    padding: 16px 20px;

    .el-dialog__title {
      font-size: 16px;
      font-weight: 600;
      color: #262626;
    }
  }

  .el-dialog__body {
    padding: 20px;
    color: #595959;
  }

  .el-dialog__footer {
    border-top: 1px solid #f0f0f0;
    padding: 16px 20px;
  }
}

/* 弹出层样式 */
.el-popover {
  border-radius: var(--im-radius-lg);
  box-shadow: var(--im-shadow-lg);
  border: 1px solid var(--im-border-color);
}

/* 提示框样式 */
.el-message {
  border-radius: 8px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  padding: 12px 16px;
  border: none;

  &.el-message--success {
    background: #f6ffed;
    color: #52c41a;
  }

  &.el-message--warning {
    background: #fffbe6;
    color: #faad14;
  }

  &.el-message--error {
    background: #fff2f0;
    color: #ff4d4f;
  }

  &.el-message--info {
    background: #e6f7ff;
    color: #1677ff;
  }

  .el-message__content {
    font-weight: 500;
  }
}

/* 标签页样式 */
.el-tabs {
  .el-tabs__item {
    color: #595959;
    font-weight: 500;
    transition: all 0.2s ease;

    &:hover {
      color: #1677ff;
    }

    &.is-active {
      color: #1677ff;
      font-weight: 600;
    }
  }

  .el-tabs__active-bar {
    background: #1677ff;
    height: 2px;
  }

  .el-tabs__nav-wrap::after {
    background: #f0f0f0;
  }
}

/* 工具提示样式 */
.el-tooltip__popper {
  background: rgba(0, 0, 0, 0.85);
  border-radius: 4px;
  padding: 8px 12px;
  backdrop-filter: blur(4px);

  .el-tooltip__inner {
    color: white;
    font-size: 13px;
    font-weight: 400;
    line-height: 1.4;
  }
}

/* 加载样式 */
.el-loading-mask {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(4px);

  .el-loading-spinner {
    .path {
      stroke: #1677ff;
    }

    .el-loading-text {
      color: #262626;
      font-size: 14px;
      margin-top: 12px;
      font-weight: 500;
    }
  }
}

/* 空状态样式 */
.el-empty {
  .el-empty__image {
    svg {
      fill: #d9d9d9;
    }
  }

  .el-empty__description {
    color: #8c8c8c;
    font-size: 14px;
  }
}

/* 图片预览样式 */
.el-image-viewer {
  .el-image-viewer__mask {
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(8px);
  }

  .el-image-viewer__btn {
    color: white;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 50%;
    transition: all 0.2s ease;

    &:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: scale(1.1);
    }

    &:active {
      transform: scale(0.95);
    }
  }
}

/* ============ 暗色主题支持 ============ */
[data-theme='dark'] {
  background: var(--im-bg-base);
  color: var(--im-text-primary);

  /* Element Plus 暗色主题覆盖 */
  .el-button {
    &.el-button--primary {
      background: var(--im-primary-color);
      border-color: var(--im-primary-color);
    }

    &.el-button--text {
      color: var(--im-text-secondary);

      &:hover {
        color: var(--im-primary-color);
        background: rgba(22, 119, 255, 0.1);
      }
    }
  }

  .el-input {
    .el-input__wrapper {
      background: var(--im-bg-white);
      box-shadow: 0 0 0 1px var(--im-border-color) inset;

      &:hover {
        box-shadow: 0 0 0 1px var(--im-border-dark) inset;
      }

      &.is-focus {
        box-shadow: 0 0 0 1px var(--im-primary-color) inset;
      }
    }
  }

  .el-dialog {
    background: var(--im-bg-white);

    .el-dialog__header {
      border-bottom-color: var(--im-border-color);
    }

    .el-dialog__footer {
      border-top-color: var(--im-border-color);
    }
  }
}

/* ============ 打印样式 ============ */
@media print {
  .im-side-nav,
  .nav-sidebar,
  .session-panel,
  .input-area,
  .chat-actions,
  .message-actions {
    display: none !important;
  }

  .message-list {
    overflow: visible !important;
  }

  .message-bubble {
    page-break-inside: avoid;
  }
}

/* ============ 减少动画偏好 ============ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
