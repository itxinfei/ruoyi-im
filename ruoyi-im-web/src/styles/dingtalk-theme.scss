// DingTalk-inspired Theme Variables and Mixins
// 钉钉风格主题变量和混合宏

@use 'sass:color';

// ============ CSS Variables (Runtime Theme Support) ============
:root {
  // 主色系
  --dd-primary: #1677ff;
  --dd-primary-hover: #4096ff;
  --dd-primary-active: #0958d9;
  --dd-primary-light: rgba(22, 119, 255, 0.1);
  --dd-primary-lighter: #e6f7ff;

  // 功能色
  --dd-success: #52c41a;
  --dd-warning: #faad14;
  --dd-error: #ff4d4f;
  --dd-info: #1677ff;

  // 文字颜色
  --dd-text-primary: #262626;
  --dd-text-secondary: #595959;
  --dd-text-tertiary: #8c8c8c;
  --dd-text-placeholder: #bfbfbf;
  --dd-text-disabled: #d9d9d9;

  // 背景色
  --dd-bg-white: #ffffff;
  --dd-bg-base: #f0f2f5;
  --dd-bg-hover: #f5f7fa;
  --dd-bg-disabled: #f5f5f5;
  --dd-bg-mask: rgba(0, 0, 0, 0.45);

  // 边框色
  --dd-border-base: #d9d9d9;
  --dd-border-dark: #bfbfbf;

  // 圆角
  --dd-radius-sm: 4px;
  --dd-radius-base: 6px;
  --dd-radius-lg: 8px;
  --dd-radius-xl: 12px;

  // 阴影
  --dd-shadow-base: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  --dd-shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --dd-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

// 暗色主题
[data-theme='dark'] {
  --dd-text-primary: #e8e8e8;
  --dd-text-secondary: #b8b8b8;
  --dd-text-tertiary: #8c8c8c;
  --dd-bg-white: #1f1f1f;
  --dd-bg-base: #141414;
  --dd-bg-hover: #262626;
  --dd-border-base: #303030;
  --dd-border-dark: #404040;
}

// ============ SCSS Variables (Build Time) ============
// 主色系（钉钉6.5.x规范）
$primary-color: #1677ff;        // 钉钉蓝
$primary-color-light: rgba(22, 119, 255, 0.1);
$primary-color-lighter: #e6f7ff;
$primary-color-dark: #0958d9;
$primary-color-active: #0958d9;
$primary-hover: #4096ff;

// 功能色
$success-color: #52c41a;
$warning-color: #faad14;
$error-color: #ff4d4f;
$info-color: #1677ff;

// 中性色（钉钉规范）
$text-primary: #262626;      // 标题色
$text-secondary: #595959;     // 正文色
$text-tertiary: #8c8c8c;      // 辅助文字/时间戳
$text-placeholder: #bfbfbf;
$text-regular: #666666;       // 次要文字
$text-disabled: #d9d9d9;

$bg-white: #ffffff;
$bg-light: #fafafa;
$bg-base: #f0f2f5;
$bg-hover: #f5f7fa;
$bg-disabled: #f5f5f5;
$bg-mask: rgba(0, 0, 0, 0.45);

$border-light: #f0f0f0;
$border-base: #d9d9d9;       // 钉钉边框色
$border-dark: #bfbfbf;

// ============ Navigation Rail ============
// 布局尺寸（钉钉PC客户端规范）
$topbar-height: 48px;         // 顶部导航栏高度
$nav-sidebar-width: 68px;     // 左侧导航栏宽度 - 钉钉规范68px
$nav-sidebar-expanded-width: 192px; // 左侧导航栏宽度（展开状态）
$nav-item-height: 48px;       // 导航项高度 - 钉钉规范48×48px
$nav-icon-size: 24px;         // 导航图标尺寸 - 钉钉规范24×24px
$sidebar-width: 320px;        // 中间会话列表宽度 - 钉钉规范320px
$session-item-height: 64px;   // 会话列表项高度 - 钉钉规范64px
$session-avatar-size: 40px;   // 会话头像尺寸
$detail-panel-width: 300px;   // 详情面板宽度

// 别名（保持兼容性）
$nav-rail-width: $nav-sidebar-width;
$nav-rail-expanded-width: $nav-sidebar-expanded-width;

// 钉钉5.6 PC版风格的颜色
$nav-bg: #FFFFFF; // 左侧导航栏背景（浅色）
$nav-border: #F0F0F0; // 左侧导航栏边框
$nav-item-hover: rgba(0, 0, 0, 0.04); // 导航项悬停背景色
$nav-item-active: rgba(0, 137, 255, 0.1); // 激活导航项背景色
$nav-item-text: #333333; // 导航项文本颜色（未选中）
$nav-item-icon: #8C8C8C; // 导航项图标颜色（未选中）
$nav-item-text-active: #0089FF; // 导航项文本颜色（选中）
$nav-item-icon-active: #0089FF; // 导航项图标颜色（选中）
$topbar-bg: #FFFFFF; // 顶部导航栏背景
$topbar-border: #E6E6E6; // 顶部导航栏边框
$sidebar-bg: #F5F5F5; // 中间会话列表背景
$chat-bg: #F5F5F5; // 右侧聊天区域背景
$active-session-bg: rgba(0, 137, 255, 0.1); // 活跃会话背景
$primary-hover: rgba(0, 0, 0, 0.04); // 悬停状态背景色

// ============ Spacing ============
$spacing-xs: 4px;
$spacing-sm: 8px;
$spacing-md: 12px;
$spacing-lg: 16px;
$spacing-xl: 24px;
$spacing-2xl: 32px;

// ============ Typography ============
$font-size-xs: 12px;
$font-size-sm: 13px;
$font-size-base: 14px;
$font-size-lg: 16px;
$font-size-xl: 18px;
$font-size-2xl: 20px;

$font-weight-light: 300;
$font-weight-normal: 400;
$font-weight-medium: 500;
$font-weight-semibold: 600;
$font-weight-bold: 700;

$line-height-tight: 1.2;
$line-height-base: 1.5;
$line-height-relaxed: 1.75;

// ============ Border Radius ============
$border-radius-xs: 2px;
$border-radius-sm: 4px;
$border-radius-base: 6px;
$border-radius-lg: 8px;
$border-radius-xl: 12px;
$border-radius-round: 50%;

// ============ Shadows ============
$shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.03), 0 1px 6px -1px rgba(0, 0, 0, 0.02), 0 2px 4px 0 rgba(0, 0, 0, 0.02);
$shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
$shadow-base: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
$shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
$shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
$shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

// ============ Transitions ============
$transition-base: 0.3s;
$transition-fast: 0.15s;
$transition-slow: 0.5s;

$ease-base: cubic-bezier(0.4, 0, 0.2, 1);
$ease-in: cubic-bezier(0.4, 0, 1, 1);
$ease-out: cubic-bezier(0, 0, 0.2, 1);
$ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);

// ============ Breakpoints ============
$breakpoint-xs: 480px;
$breakpoint-sm: 576px;
$breakpoint-md: 768px;
$breakpoint-lg: 992px;
$breakpoint-xl: 1200px;
$breakpoint-2xl: 1600px;

// ============ Header ============
$header-height-mobile: 56px;

// ============ Z-index ============
$z-index-dropdown: 1050;
$z-index-sticky: 1020;
$z-index-fixed: 1030;
$z-index-modal-backdrop: 1040;
$z-index-modal: 1050;
$z-index-popover: 1060;
$z-index-tooltip: 1070;

// ============ Mixins ============

// 文本省略号
@mixin text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// 多行文本省略
@mixin text-ellipsis-multi($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

// 自定义滚动条
@mixin custom-scrollbar($width: 6px, $color: $border-base) {
  &::-webkit-scrollbar {
    width: $width;
    height: $width;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background: $color;
    border-radius: $border-radius-base;
    transition: background $transition-base $ease-base;

    &:hover {
      background: color.scale($color, $lightness: -10%);
    }
  }
}

// Web 滚动条样式（兼容别名）
@mixin web-scrollbar {
  @include custom-scrollbar(6px, #d9d9d9);
}

// Flex 居中
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

// Flex 两端对齐居中
@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

// Flex 列
@mixin flex-column {
  display: flex;
  flex-direction: column;
}

// Flex 行
@mixin flex-row {
  display: flex;
  flex-direction: row;
}

// 绝对居中
@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// 响应式字体
@mixin responsive-font($mobile, $tablet, $desktop) {
  font-size: $mobile;

  @media (min-width: $breakpoint-md) {
    font-size: $tablet;
  }

  @media (min-width: $breakpoint-lg) {
    font-size: $desktop;
  }
}

// 响应式间距
@mixin responsive-padding($mobile, $tablet, $desktop) {
  padding: $mobile;

  @media (min-width: $breakpoint-md) {
    padding: $tablet;
  }

  @media (min-width: $breakpoint-lg) {
    padding: $desktop;
  }
}

// 响应式宽度
@mixin responsive-width($mobile, $tablet, $desktop) {
  width: $mobile;

  @media (min-width: $breakpoint-md) {
    width: $tablet;
  }

  @media (min-width: $breakpoint-lg) {
    width: $desktop;
  }
}

// 按钮基础样式
@mixin button-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: $spacing-sm $spacing-md;
  border-radius: $border-radius-base;
  border: none;
  cursor: pointer;
  font-size: $font-size-base;
  font-weight: $font-weight-medium;
  transition: all $transition-base $ease-base;
  user-select: none;

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
}

// 卡片样式
@mixin card {
  background: $bg-white;
  border-radius: $border-radius-lg;
  box-shadow: $shadow-base;
  padding: $spacing-lg;
  transition: all $transition-base $ease-base;

  &:hover {
    box-shadow: $shadow-md;
  }
}

// 输入框基础样式
@mixin input-base {
  width: 100%;
  padding: $spacing-sm $spacing-md;
  border: 1px solid $border-base;
  border-radius: $border-radius-base;
  font-size: $font-size-base;
  transition: all $transition-base $ease-base;

  &:hover {
    border-color: $primary-color;
  }

  &:focus {
    outline: none;
    border-color: $primary-color;
    box-shadow: 0 0 0 2px rgba($primary-color, 0.2);
  }

  &:disabled {
    background: $bg-disabled;
    cursor: not-allowed;
  }
}

// 渐变背景
@mixin gradient-bg($from, $to, $direction: 135deg) {
  background: linear-gradient($direction, $from 0%, $to 100%);
}

// 玻璃态效果
@mixin glass-effect($opacity: 0.8) {
  background: rgba(255, 255, 255, $opacity);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

// 动画延迟
@mixin animation-delay($delay) {
  animation-delay: $delay;
}

// 过渡延迟
@mixin transition-delay($delay) {
  transition-delay: $delay;
}

// 点击缩放效果
@mixin click-scale($scale: 0.95) {
  &:active {
    transform: scale($scale);
  }
}

// 响应式媒体查询
@mixin respond-to($breakpoint) {
  @if $breakpoint == xs {
    @media (max-width: $breakpoint-xs) {
      @content;
    }
  } @else if $breakpoint == sm {
    @media (min-width: $breakpoint-sm) {
      @content;
    }
  } @else if $breakpoint == md {
    @media (min-width: $breakpoint-md) {
      @content;
    }
  } @else if $breakpoint == lg {
    @media (min-width: $breakpoint-lg) {
      @content;
    }
  } @else if $breakpoint == xl {
    @media (min-width: $breakpoint-xl) {
      @content;
    }
  } @else if $breakpoint == 2xl {
    @media (min-width: $breakpoint-2xl) {
      @content;
    }
  }
}

// ============ DingTalk-specific Interaction Mixins ============

// 消息气泡动画
@mixin bubble-animation {
  animation: bubbleIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

// 导航点击反馈
@mixin nav-click-feedback {
  &:active {
    animation: navClick 0.2s ease;
  }
}

// 徽章弹出动画
@mixin badge-pop-animation {
  animation: badgePop 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

// 在线状态脉冲
@mixin online-pulse {
  animation: onlinePulse 2s ease-in-out infinite;
}

// 卡片悬停效果
@mixin card-hover-effect {
  transition: all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
  }
}

// 按钮点击涟漪
@mixin button-ripple {
  position: relative;
  overflow: hidden;

  &::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    top: 50%;
    left: 50%;
    pointer-events: none;
    background-image: radial-gradient(circle, rgba(255, 255, 255, 0.3) 10%, transparent 10.01%);
    background-repeat: no-repeat;
    background-position: 50%;
    transform: scale(10, 10);
    opacity: 0;
    transition: transform 0.5s, opacity 1s;
  }

  &:active::after {
    transform: scale(0, 0);
    opacity: 0.3;
    transition: 0s;
  }
}

// 下拉菜单滑入
@mixin dropdown-slide-in {
  animation: dropdownSlideDown 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);
}

// 表情弹跳动画
@mixin emoji-bounce {
  &:hover {
    animation: emojiBounce 0.3s ease;
  }
}

// 搜索框聚焦效果
@mixin search-focus-effect {
  transition: all 0.2s ease;

  &:focus {
    animation: searchFocus 0.2s ease;
  }
}

// 消息淡入淡出
@mixin message-fade-in-out {
  animation: messageFade 3s ease;
}

// ============ Global Styles ============

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans',
    'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: $font-size-base;
  line-height: $line-height-base;
  color: $text-primary;
  background: $bg-light;
}

// ============ Animations ============

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideInUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideInDown {
  from {
    transform: translateY(-20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideInLeft {
  from {
    transform: translateX(-20px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInRight {
  from {
    transform: translateX(20px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes bounce {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

// 消息发送弹出动画
@keyframes messagePop {
  0% {
    opacity: 0;
    transform: scale(0.8) translateY(10px);
  }
  50% {
    transform: scale(1.02) translateY(-2px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

// 下拉菜单滑入动画
@keyframes dropdownSlide {
  0% {
    opacity: 0;
    transform: translateY(-8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

// 按钮点击缩放动画
@keyframes buttonClick {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
  }
}

// 工具提示淡入动画
@keyframes tooltipFade {
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

// 列表项滑入动画
@keyframes listSlideIn {
  0% {
    opacity: 0;
    transform: translateX(-10px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

// 钉钉特有的微交互动画

// 消息气泡出现动画
@keyframes bubbleIn {
  0% {
    opacity: 0;
    transform: scale(0.8) translateY(10px);
  }
  50% {
    transform: scale(1.02) translateY(-2px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

// 导航项点击反馈动画
@keyframes navClick {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
  }
}

// 徽章弹出动画
@keyframes badgePop {
  0% {
    transform: scale(0);
  }
  50% {
    transform: scale(1.3);
  }
  100% {
    transform: scale(1);
  }
}

// 在线状态脉冲动画
@keyframes onlinePulse {
  0% {
    box-shadow: 0 0 0 0 rgba(82, 196, 26, 0.4);
  }
  70% {
    box-shadow: 0 0 0 6px rgba(82, 196, 26, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(82, 196, 26, 0);
  }
}

// 卡片悬停提升动画
@keyframes cardHover {
  0% {
    transform: translateY(0);
  }
  100% {
    transform: translateY(-2px);
  }
}

// 按钮点击涟漪效果
@keyframes ripple {
  0% {
    transform: scale(0);
    opacity: 1;
  }
  100% {
    transform: scale(4);
    opacity: 0;
  }
}

// 下拉菜单滑入动画
@keyframes dropdownSlideDown {
  0% {
    opacity: 0;
    transform: translateY(-10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

// 表情动画
@keyframes emojiBounce {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.2);
  }
}

// 加载旋转动画（钉钉风格）
@keyframes spinDing {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

// 提示框淡入淡出动画
@keyframes messageFade {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  10% {
    opacity: 1;
    transform: translateY(0);
  }
  90% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(-10px);
  }
}

// 搜索框聚焦动画
@keyframes searchFocus {
  0% {
    box-shadow: 0 0 0 0 rgba(22, 119, 255, 0);
  }
  100% {
    box-shadow: 0 0 0 3px rgba(22, 119, 255, 0.1);
  }
}
