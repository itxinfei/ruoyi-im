<template>
  <div class="emoji-picker">
    <div class="picker-header">
      <div class="category-tabs">
        <div
          v-for="category in categories"
          :key="category.key"
          class="category-tab"
          :class="{ active: currentCategory === category.key }"
          @click="currentCategory = category.key"
        >
          <i :class="category.icon"></i>
        </div>
      </div>
      <i class="el-icon-close close-btn" @click="$emit('close')"></i>
    </div>

    <div class="picker-content">
      <div class="emoji-grid">
        <div
          v-for="emoji in currentEmojis"
          :key="emoji"
          class="emoji-item"
          @click="selectEmoji(emoji)"
        >
          {{ emoji }}
        </div>
      </div>
    </div>

    <div class="picker-footer">
      <div class="search-box">
        <el-input
          v-model="searchText"
          placeholder="ÊêúÁ¥¢Ë°®ÊÉÖ"
          prefix-icon="el-icon-search"
          size="small"
          clearable
        />
      </div>
      <div class="recent-emojis">
        <span class="recent-label">ÊúÄËøë‰ΩøÁî®:</span>
        <div class="recent-list">
          <span
            v-for="emoji in recentEmojis"
            :key="emoji"
            class="recent-emoji"
            @click="selectEmoji(emoji)"
          >
            {{ emoji }}
          </span>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed, onMounted } from 'vue'

const emit = defineEmits(['select', 'close'])

// Ë°®ÊÉÖÂàÜÁ±ª
const categories = [
  { key: 'recent', icon: 'el-icon-time', name: 'ÊúÄËøë' },
  { key: 'smileys', icon: 'el-icon-sunny', name: 'Ë°®ÊÉÖ' },
  { key: 'animals', icon: 'el-icon-pet', name: 'Âä®Áâ©' },
  { key: 'food', icon: 'el-icon-food', name: 'È£üÁâ©' },
  { key: 'activities', icon: 'el-icon-basketball', name: 'Ê¥ªÂä®' },
  { key: 'travel', icon: 'el-icon-location', name: 'ÊóÖË°å' },
  { key: 'objects', icon: 'el-icon-present', name: 'Áâ©ÂìÅ' },
  { key: 'symbols', icon: 'el-icon-star-on', name: 'Á¨¶Âè∑' },
  { key: 'flags', icon: 'el-icon-flag', name: 'ÊóóÂ∏ú' },
]

// Ë°®ÊÉÖÊï∞ÊçÆ
const emojiData = {
  smileys: [
    'üòÄ',
    'üòÉ',
    'üòÑ',
    'üòÅ',
    'üòÜ',
    'üòÖ',
    'üòÇ',
    'ü§£',
    'üòä',
    'üòá',
    'üôÇ',
    'üôÉ',
    'üòâ',
    'üòå',
    'üòç',
    'ü•∞',
    'üòò',
    'üòó',
    'üòô',
    'üòö',
    'üòã',
    'üòõ',
    'üòù',
    'üòú',
    'ü§™',
    'ü§®',
    'üßê',
    'ü§ì',
    'üòé',
    'ü§©',
    'ü•≥',
    'üòè',
    'üòí',
    'üòû',
    'üòî',
    'üòü',
    'üòï',
    'üôÅ',
    '‚òπÔ∏è',
    'üò£',
    'üòñ',
    'üò´',
    'üò©',
    'ü•∫',
    'üò¢',
    'üò≠',
    'üò§',
    'üò†',
    'üò°',
    'ü§¨',
    'ü§Ø',
    'üò≥',
    'ü•µ',
    'ü•∂',
    'üò±',
    'üò®',
    'üò∞',
    'üò•',
    'üòì',
    'ü§ó',
    'ü§î',
    'ü§≠',
    'ü§´',
    'ü§•',
    'üò∂',
    'üòê',
    'üòë',
    'üòØ',
    'üò¶',
    'üòß',
    'üòÆ',
    'üò≤',
    'ü•±',
    'üò¥',
    'ü§§',
    'üò™',
    'üòµ',
    'ü§ê',
    'ü•¥',
    'ü§¢',
    'ü§Æ',
    'ü§ß',
    'üò∑',
    'ü§í',
    'ü§ï',
    'ü§ë',
    'ü§†',
    'üí©',
    'üëª',
    'üíÄ',
    '‚ò†Ô∏è',
    'üëΩ',
    'üëæ',
    'ü§ñ',
    'üò∫',
    'üò∏',
    'üòπ',
    'üòª',
    'üòº',
    'üòΩ',
    'üôÄ',
    'üòø',
    'üòæ',
    'üôà',
    'üôâ',
    'üôä',
    'üë∂',
    'üëß',
    'üßí',
    'üë¶',
    'üë©',
    'üßë',
    'üë®',
    'üëµ',
    'üßì',
    'üë¥',
    'üëÆ‚Äç‚ôÄÔ∏è',
    'üëÆ',
    'üëÆ‚Äç‚ôÇÔ∏è',
    'üïµÔ∏è‚Äç‚ôÄÔ∏è',
    'üïµÔ∏è',
    'üïµÔ∏è‚Äç‚ôÇÔ∏è',
    'üíÇ‚Äç‚ôÄÔ∏è',
    'üíÇ',
    'üíÇ‚Äç‚ôÇÔ∏è',
    'üë∑‚Äç‚ôÄÔ∏è',
    'üë∑',
    'üë∑‚Äç‚ôÇÔ∏è',
    'ü§¥',
    'üë∏',
    'üë≥‚Äç‚ôÄÔ∏è',
    'üë≥',
    'üë≥‚Äç‚ôÇÔ∏è',
    'üë≤',
    'üßï‚Äç‚ôÄÔ∏è',
    'ü§µ‚Äç‚ôÄÔ∏è',
    'ü§µ',
    'ü§µ‚Äç‚ôÇÔ∏è',
    'üë∞‚Äç‚ôÄÔ∏è',
    'üë∞',
    'üë∞‚Äç‚ôÇÔ∏è',
    'ü§∞‚Äç‚ôÄÔ∏è',
    'ü§∞',
    'ü§∞‚Äç‚ôÇÔ∏è',
    'ü§±‚Äç‚ôÄÔ∏è',
    'ü§±',
    'ü§±‚Äç‚ôÇÔ∏è',
    'üëº',
    'üéÖ',
    'ü§∂',
    'üßô‚Äç‚ôÄÔ∏è',
    'üßô',
    'üßô‚Äç‚ôÇÔ∏è',
    'üßù‚Äç‚ôÄÔ∏è',
    'üßù',
    'üßù‚Äç‚ôÇÔ∏è',
    'üßõ‚Äç‚ôÄÔ∏è',
    'üßõ',
    'üßõ‚Äç‚ôÇÔ∏è',
    'üßú‚Äç‚ôÄÔ∏è',
    'üßú',
    'üßú‚Äç‚ôÇÔ∏è',
    'üßö‚Äç‚ôÄÔ∏è',
    'üßö',
    'üßö‚Äç‚ôÇÔ∏è',
    'üëº',
    'ü§∞',
    'ü¶∏‚Äç‚ôÄÔ∏è',
    'ü¶∏',
    'ü¶∏‚Äç‚ôÇÔ∏è',
    'ü¶π‚Äç‚ôÄÔ∏è',
    'ü¶π',
    'ü¶π‚Äç‚ôÇÔ∏è',
    'ü§∂',
    'üéÖ',
    'üßô‚Äç‚ôÄÔ∏è',
    'üßô',
    'üßô‚Äç‚ôÇÔ∏è',
    'üßù‚Äç‚ôÄÔ∏è',
    'üßù',
    'üßù‚Äç‚ôÇÔ∏è',
    'üßõ‚Äç‚ôÄÔ∏è',
    'üßõ',
    'üßõ‚Äç‚ôÇÔ∏è',
    'üßú‚Äç‚ôÄÔ∏è',
    'üßú',
    'üßú‚Äç‚ôÇÔ∏è',
    'üßö‚Äç‚ôÄÔ∏è',
    'üßö',
    'üßö‚Äç‚ôÇÔ∏è',
  ],
  animals: [
    'üê∂',
    'üê±',
    'üê≠',
    'üêπ',
    'üê∞',
    'ü¶ä',
    'üêª',
    'üêº',
    'üê®',
    'üêØ',
    'ü¶Å',
    'üêÆ',
    'üê∑',
    'üê∏',
    'üêµ',
    'üêî',
    'üêß',
    'üê¶',
    'üê§',
    'üê£',
    'ü¶Ü',
    'ü¶Ö',
    'ü¶â',
    'ü¶á',
    'üê∫',
    'üêó',
    'üê¥',
    'ü¶Ñ',
    'üêù',
    'üêõ',
    'ü¶ã',
    'üêå',
    'üêû',
    'üêú',
    'ü¶ü',
    'ü¶ó',
    'üï∑Ô∏è',
    'üï∏Ô∏è',
    'ü¶Ç',
    'üê¢',
    'üêç',
    'ü¶é',
    'ü¶ñ',
    'ü¶ï',
    'üêô',
    'ü¶ë',
    'ü¶ê',
    'ü¶û',
    'ü¶Ä',
    'üê°',
    'üê†',
    'üêü',
    'üê¨',
    'üê≥',
    'üêã',
    'ü¶à',
    'üêä',
    'üêÖ',
    'üêÜ',
    'ü¶ì',
    'ü¶ç',
    'ü¶ß',
    'üêò',
    'ü¶õ',
    'ü¶è',
    'üê™',
    'üê´',
    'ü¶ô',
    'ü¶í',
    'üêÉ',
    'üêÇ',
    'üêÑ',
    'üêé',
    'üêñ',
    'üêè',
    'üêë',
    'ü¶ô',
    'üêê',
    'ü¶å',
    'üêï',
    'üê©',
    'ü¶Æ',
    'üêï‚Äçü¶∫',
    'üêà',
    'üêà‚Äç‚¨õ',
    'üêì',
    'ü¶É',
    'ü¶ö',
    'ü¶ú',
    'ü¶¢',
    'ü¶©',
    'üïäÔ∏è',
    'üêá',
    'ü¶ù',
    'ü¶®',
    'ü¶°',
    'ü¶´',
    'ü¶¶',
    'ü¶•',
    'üêÅ',
    'üêÄ',
    'üêøÔ∏è',
    'ü¶î',
    'üêâ',
    'üê≤',
    'üåµ',
    'üéÑ',
    'üå≤',
    'üå≥',
    'üå¥',
    'üå±',
    'üåø',
    '‚òòÔ∏è',
    'üçÄ',
    'üéç',
    'üéã',
    'üçÉ',
    'üçÇ',
    'üçÅ',
    'üçÑ',
    'üåæ',
    'üíê',
    'üå∑',
    'üåπ',
    'ü•Ä',
    'üå∫',
    'üåª',
    'üåº',
    'üå∏',
    'üåº',
    'üåª',
    'üå∫',
    'ü•Ä',
    'üåπ',
    'üå∑',
    'üíê',
    'üåæ',
    'üçÑ',
    'üçÅ',
    'üçÇ',
  ],
  food: [
    'üçé',
    'üçê',
    'üçä',
    'üçã',
    'üçå',
    'üçâ',
    'üçá',
    'üçì',
    'ü´ê',
    'üçà',
    'üçí',
    'üçë',
    'ü•≠',
    'üçç',
    'ü••',
    'ü•ù',
    'üçÖ',
    'ü•ë',
    'ü•¶',
    'ü•¨',
    'ü•í',
    'üå∂Ô∏è',
    'ü´ë',
    'üåΩ',
    'ü•ï',
    'ü´í',
    'üßÑ',
    'üßÖ',
    'ü•î',
    'üç†',
    'ü•ê',
    'ü•Ø',
    'üçû',
    'ü•ñ',
    'ü•®',
    'üßÄ',
    'ü•ö',
    'üç≥',
    'üßà',
    'ü•û',
    'üßá',
    'ü•ì',
    'ü•©',
    'üçó',
    'üçñ',
    'ü¶¥',
    'üå≠',
    'üçî',
    'üçü',
    'üçï',
    'ü•™',
    'ü•ô',
    'üßÜ',
    'üåÆ',
    'üåØ',
    'ü´î',
    'ü•ó',
    'ü•ò',
    'ü´ï',
    'ü•´',
    'üçù',
    'üçú',
    'üç≤',
    'üçõ',
    'üç£',
    'üç±',
    'ü•ü',
    'ü¶™',
    'üç§',
    'üçô',
    'üçö',
    'üçò',
    'üç•',
    'ü•†',
    'ü•Æ',
    'üç¢',
    'üç°',
    'üçß',
    'üç®',
    'üç¶',
    'ü•ß',
    'üßÅ',
    'üç∞',
    'üéÇ',
    'üçÆ',
    'üç≠',
    'üç¨',
    'üç´',
    'üçø',
    'üç™',
    'üå∞',
    'ü•ú',
    'üçØ',
    'ü•õ',
    'üçº',
    '‚òï',
    'ü´ñ',
    'üçµ',
    'üßÉ',
    'ü•§',
    'üßã',
    'üç∂',
    'üç∫',
    'üç∑',
    'ü•Ç',
    'ü•É',
    'üç∏',
    'üçπ',
    'üßâ',
    'üçæ',
    'ü•Ñ',
    'üç¥',
    'üçΩÔ∏è',
    'ü•£',
    'ü•°',
    'ü•¢',
    'üßÇ',
    'ü•Ñ',
    'üç¥',
    'üçΩÔ∏è',
  ],
  activities: [
    '‚öΩ',
    'üèÄ',
    'üèà',
    '‚öæ',
    'ü•é',
    'üéæ',
    'üèê',
    'üèâ',
    'ü•è',
    'üé±',
    'ü™Ä',
    'üèì',
    'üè∏',
    'üèí',
    'üèë',
    'ü•ç',
    'üèè',
    'ü•Ö',
    '‚õ≥',
    'ü™Å',
    'üèπ',
    'üé£',
    'ü§ø',
    'ü•ä',
    'ü•ã',
    'üéΩ',
    'üõπ',
    'üõ∑',
    '‚õ∏Ô∏è',
    'ü•å',
    'üéø',
    '‚õ∑Ô∏è',
    'üèÇ',
    'ü™Ç',
    'üèãÔ∏è‚Äç‚ôÄÔ∏è',
    'üèãÔ∏è',
    'üèãÔ∏è‚Äç‚ôÇÔ∏è',
    'ü§º‚Äç‚ôÄÔ∏è',
    'ü§º',
    'ü§º‚Äç‚ôÇÔ∏è',
    'ü§∏‚Äç‚ôÄÔ∏è',
    'ü§∏',
    'ü§∏‚Äç‚ôÇÔ∏è',
    '‚õπÔ∏è‚Äç‚ôÄÔ∏è',
    '‚õπÔ∏è',
    '‚õπÔ∏è‚Äç‚ôÇÔ∏è',
    'ü§∫',
    'ü§æ‚Äç‚ôÄÔ∏è',
    'ü§æ',
    'ü§æ‚Äç‚ôÇÔ∏è',
    'üèä‚Äç‚ôÄÔ∏è',
    'üèä',
    'üèä‚Äç‚ôÇÔ∏è',
    'üö£‚Äç‚ôÄÔ∏è',
    'üö£',
    'üö£‚Äç‚ôÇÔ∏è',
    'üßó‚Äç‚ôÄÔ∏è',
    'üßó',
    'üßó‚Äç‚ôÇÔ∏è',
    'üöµ‚Äç‚ôÄÔ∏è',
    'üöµ',
    'üöµ‚Äç‚ôÇÔ∏è',
    'üö¥‚Äç‚ôÄÔ∏è',
    'üö¥',
    'üö¥‚Äç‚ôÇÔ∏è',
    'üèÜ',
    'ü•á',
    'ü•à',
    'ü•â',
    'üèÖ',
    'üéñÔ∏è',
    'üèµÔ∏è',
    'üéóÔ∏è',
    'üé´',
    'üéüÔ∏è',
    'üé™',
    'ü§π‚Äç‚ôÄÔ∏è',
    'ü§π',
    'ü§π‚Äç‚ôÇÔ∏è',
    'üé≠',
    'üé®',
    'üé¨',
    'üé§',
    'üéß',
    'üéº',
    'üéπ',
    'ü•Å',
    'üé∑',
    'üé∫',
    'üé∏',
    'ü™ï',
    'üéª',
    'üé≤',
    '‚ôüÔ∏è',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üß©',
    'üé®',
    'üì±',
    'üì≤',
    'üíª',
    '‚å®Ô∏è',
    'üñ•Ô∏è',
    'üñ®Ô∏è',
    'üñ±Ô∏è',
    'üñ≤Ô∏è',
    'üïπÔ∏è',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
  ],
  travel: [
    'üöó',
    'üöï',
    'üöô',
    'üöå',
    'üöé',
    'üèéÔ∏è',
    'üöì',
    'üöë',
    'üöí',
    'üöê',
    'üöö',
    'üöõ',
    'üöú',
    'üõ¥',
    'üö≤',
    'üõµ',
    'üèçÔ∏è',
    'üö®',
    'üöî',
    'üöç',
    'üöò',
    'üöñ',
    'üö°',
    'üö†',
    'üöü',
    'üöÉ',
    'üöã',
    'üöû',
    'üöù',
    'üöÑ',
    'üöÖ',
    'üöà',
    'üöÇ',
    'üöÜ',
    'üöá',
    'üöä',
    'üöâ',
    '‚úàÔ∏è',
    'üõ´',
    'üõ¨',
    'üõ©Ô∏è',
    'üí∫',
    'üõ∞Ô∏è',
    'üöÄ',
    'üõ∏',
    'üöÅ',
    'üõ∂',
    '‚õµ',
    'üö§',
    'üõ•Ô∏è',
    'üõ≥Ô∏è',
    '‚õ¥Ô∏è',
    'üö¢',
    'üöó',
    'üöï',
    'üöô',
    'üöå',
    'üöé',
    'üèéÔ∏è',
    'üöì',
    'üöë',
    'üöí',
    'üöê',
    'üöö',
    'üöõ',
    'üöú',
    'üõ¥',
    'üö≤',
    'üõµ',
    'üèçÔ∏è',
    'üö®',
    'üöî',
    'üöç',
    'üöò',
    'üöñ',
    'üö°',
    'üö†',
    'üöü',
    'üöÉ',
    'üöã',
    'üöû',
    'üöù',
    'üöÑ',
    'üöÖ',
    'üöà',
    'üöÇ',
    'üöÜ',
    'üöá',
    'üöä',
    'üöâ',
    '‚úàÔ∏è',
    'üõ´',
    'üõ¨',
    'üõ©Ô∏è',
    'üí∫',
    'üõ∞Ô∏è',
    'üöÄ',
    'üõ∏',
    'üöÅ',
    'üõ∂',
    '‚õµ',
    'üö§',
    'üõ•Ô∏è',
    'üõ≥Ô∏è',
    '‚õ¥Ô∏è',
    'üö¢',
    'üóΩ',
    'üóº',
    'üè∞',
    'üèØ',
    'üèüÔ∏è',
    'üé°',
    'üé¢',
    'üé†',
    '‚õ≤',
    '‚õ±Ô∏è',
    'üèñÔ∏è',
    'üèùÔ∏è',
    'üèîÔ∏è',
    'üóª',
    '‚õ∞Ô∏è',
    'üåã',
    'üóæ',
    'üèïÔ∏è',
    '‚õ∫',
    'üèîÔ∏è',
    'üóª',
    '‚õ∞Ô∏è',
    'üåã',
    'üóæ',
  ],
  objects: [
    '‚åö',
    'üì±',
    'üì≤',
    'üíª',
    '‚å®Ô∏è',
    'üñ•Ô∏è',
    'üñ®Ô∏è',
    'üñ±Ô∏è',
    'üñ≤Ô∏è',
    'üïπÔ∏è',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
    'üé≤',
    'üß©',
    'üéØ',
    'üé≥',
    'üéÆ',
    'üé∞',
  ],
  symbols: [
    '‚ù§Ô∏è',
    'üß°',
    'üíõ',
    'üíö',
    'üíô',
    'üíú',
    'üñ§',
    'ü§ç',
    'ü§é',
    'üíî',
    '‚ù£Ô∏è',
    'üíï',
    'üíû',
    'üíì',
    'üíó',
    'üíñ',
    'üíò',
    'üíù',
    'üíü',
    '‚òÆÔ∏è',
    '‚úùÔ∏è',
    '‚ò™Ô∏è',
    'üïâÔ∏è',
    '‚ò∏Ô∏è',
    '‚ú°Ô∏è',
    'üîØ',
    'üïé',
    '‚òØÔ∏è',
    '‚ò¶Ô∏è',
    'üõê',
    '‚õé',
    '‚ôà',
    '‚ôâ',
    '‚ôä',
    '‚ôã',
    '‚ôå',
    '‚ôç',
    '‚ôé',
    '‚ôè',
    '‚ôê',
    '‚ôë',
    '‚ôí',
    '‚ôì',
    'üÜî',
    '‚öõÔ∏è',
    'üâë',
    '‚ò¢Ô∏è',
    '‚ò£Ô∏è',
    'üì¥',
    'üì≥',
    'üà∂',
    'üàö',
    'üà∏',
    'üà∫',
    'üà∑Ô∏è',
    '‚ú¥Ô∏è',
    'üÜö',
    'üíÆ',
    'üâê',
    '„äôÔ∏è',
    '„äóÔ∏è',
    'üà¥',
    'üàµ',
    'üàπ',
    'üà≤',
    'üÖ∞Ô∏è',
    'üÖ±Ô∏è',
    'üÜé',
    'üÜë',
    'üÖæÔ∏è',
    'üÜò',
    '‚ùå',
    '‚≠ï',
    'üõë',
    '‚õî',
    'üìõ',
    'üö´',
    'üíØ',
    'üí¢',
    '‚ô®Ô∏è',
    'üö∑',
    'üöØ',
    'üö≥',
    'üö±',
    'üîû',
    'üìµ',
    'üö≠',
    '‚ùó',
    '‚ùï',
    '‚ùì',
    '‚ùî',
    '‚ÄºÔ∏è',
    '‚ÅâÔ∏è',
    'üîÖ',
    'üîÜ',
    '„ÄΩÔ∏è',
    '‚ö†Ô∏è',
    'üö∏',
    'üî±',
    '‚öúÔ∏è',
    'üî∞',
    '‚ôªÔ∏è',
    '‚úÖ',
    'üàØ',
    'üíπ',
    '‚ùáÔ∏è',
    '‚ú≥Ô∏è',
    '‚ùé',
    'üåê',
    'üí†',
    '‚ìÇÔ∏è',
    'üåÄ',
    'üí§',
    'üèß',
    'üöæ',
    '‚ôø',
    'üÖøÔ∏è',
    'üõó',
    'üõÇ',
    'üõÉ',
  ],
  flags: [
    'üèÅ',
    'üö©',
    'üéå',
    'üè¥',
    'üè≥Ô∏è',
    'üè≥Ô∏è‚Äçüåà',
    'üè¥‚Äç‚ò†Ô∏è',
    'üá¶üá´',
    'üá¶üáΩ',
    'üá¶üá±',
    'üá©üáø',
    'üá¶üá∏',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
    'üá¶üá©',
  ],
}

// ÂìçÂ∫îÂºèÊï∞ÊçÆ
const currentCategory = ref('smileys')
const searchText = ref('')
const recentEmojis = ref([])

// ËÆ°ÁÆóÂ±ûÊÄß
const currentEmojis = computed(() => {
  if (currentCategory.value === 'recent') {
    return recentEmojis.value
  }

  let emojis = emojiData[currentCategory.value] || []

  if (searchText.value) {
    const searchLower = searchText.value.toLowerCase()
    emojis = emojis.filter(
      emoji => emoji.includes(searchLower) || emojiData.smileys.includes(emoji)
    )
  }

  return emojis
})

// ÊñπÊ≥ï
const selectEmoji = emoji => {
  emit('select', emoji)
  addToRecent(emoji)
}

const addToRecent = emoji => {
  const index = recentEmojis.value.indexOf(emoji)
  if (index > -1) {
    recentEmojis.value.splice(index, 1)
  }
  recentEmojis.value.unshift(emoji)

  // ‰øùÊåÅÊúÄËøë‰ΩøÁî®ÁöÑË°®ÊÉÖÊï∞ÈáèÂú®20‰∏™‰ª•ÂÜÖ
  if (recentEmojis.value.length > 20) {
    recentEmojis.value = recentEmojis.value.slice(0, 20)
  }

  // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
  localStorage.setItem('recentEmojis', JSON.stringify(recentEmojis.value))
}

// ÁîüÂëΩÂë®Êúü
onMounted(() => {
  // ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩÊúÄËøë‰ΩøÁî®ÁöÑË°®ÊÉÖ
  const saved = localStorage.getItem('recentEmojis')
  if (saved) {
    try {
      recentEmojis.value = JSON.parse(saved)
    } catch (error) {
      console.error('Failed to load recent emojis:', error)
    }
  }
})
</script>

<style lang="scss" scoped>
.emoji-picker {
  width: 320px;
  height: 400px;
  background: white;
  border: 1px solid #e5e5e5;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.picker-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid #f0f0f0;
  background: #fafafa;
}

.category-tabs {
  display: flex;
  gap: 8px;
}

.category-tab {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s ease;
  color: #666;

  &:hover {
    background: #f0f0f0;
    color: #1890ff;
  }

  &.active {
    background: #1890ff;
    color: white;
  }

  i {
    font-size: 16px;
  }
}

.close-btn {
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  color: #999;
  transition: all 0.2s ease;

  &:hover {
    background: #f0f0f0;
    color: #666;
  }
}

.picker-content {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
}

.emoji-grid {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 4px;
}

.emoji-item {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  cursor: pointer;
  font-size: 20px;
  transition: all 0.2s ease;

  &:hover {
    background: #f0f0f0;
    transform: scale(1.1);
  }
}

.picker-footer {
  padding: 12px 16px;
  border-top: 1px solid #f0f0f0;
  background: #fafafa;
}

.search-box {
  margin-bottom: 8px;
}

.recent-emojis {
  display: flex;
  align-items: center;
  gap: 8px;
}

.recent-label {
  font-size: 12px;
  color: #666;
  white-space: nowrap;
}

.recent-list {
  display: flex;
  gap: 4px;
  overflow-x: auto;
  flex: 1;
}

.recent-emoji {
  font-size: 16px;
  cursor: pointer;
  padding: 2px;
  border-radius: 2px;
  transition: all 0.2s ease;

  &:hover {
    background: #f0f0f0;
    transform: scale(1.1);
  }
}

// ÊªöÂä®Êù°Ê†∑Âºè
.picker-content::-webkit-scrollbar {
  width: 6px;
}

.picker-content::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

.picker-content::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 3px;
}

.picker-content::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

.recent-list::-webkit-scrollbar {
  height: 4px;
}

.recent-list::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 2px;
}

.recent-list::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 2px;
}

.recent-list::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

// ÂìçÂ∫îÂºèËÆæËÆ°
@media (max-width: 768px) {
  .emoji-picker {
    width: 280px;
    height: 350px;
  }

  .emoji-grid {
    grid-template-columns: repeat(7, 1fr);
  }

  .emoji-item {
    width: 28px;
    height: 28px;
    font-size: 18px;
  }

  .category-tab {
    width: 28px;
    height: 28px;
  }
}
</style>
